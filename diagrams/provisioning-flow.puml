@startuml KiteClass Provisioning Flow
!theme plain

title Quy Trình Mở Node KiteClass

actor "Khách hàng" as customer
participant "Sale Module" as sale
participant "AI Agent" as ai
participant "Maintaining\nModule" as maintain
participant "KiteClass\nInstance" as instance

== 1. Đặt hàng và Thanh toán ==
customer -> sale: Chọn gói dịch vụ\nUpload ảnh cá nhân
activate sale
sale -> sale: Xử lý thanh toán
sale --> customer: Xác nhận đơn hàng
deactivate sale

== 2. Tạo Branding với AI ==
sale -> ai: Gửi ảnh và thông tin
activate ai
ai -> ai: Remove background\nTrích xuất màu sắc\nTạo logo, banner\nSinh nội dung marketing
ai --> customer: Preview branding\n(~30 giây, $0.19)
customer --> ai: Xác nhận
deactivate ai

== 3. Provision Infrastructure ==
ai -> maintain: Yêu cầu provision
activate maintain
maintain -> maintain: Tạo database riêng\nTạo storage buckets\nCấu hình hạ tầng
maintain --> sale: Hạ tầng sẵn sàng
deactivate maintain

== 4. Deploy Services ==
maintain -> instance: Deploy microservices\nDeploy frontend có branding
activate maintain
activate instance
instance -> instance: Build & khởi động\nÁp dụng AI branding
instance --> maintain: Triển khai hoàn tất
deactivate instance
maintain --> customer: Gửi URL truy cập\nhttps://[tên].kiteclass.com
deactivate maintain

== 5. Sử dụng ==
customer -> instance: Truy cập và sử dụng
activate instance
instance --> customer: Platform sẵn sàng
deactivate instance

note right of ai
  Tạo logo, banner,
  nội dung marketing
  tự động với AI
end note

note right of maintain
  Toàn bộ quy trình
  tự động 3-5 phút
end note

@enduml
