@startuml business-flow-v3
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 11
skinparam sequenceMessageAlign center

title KITECLASS PLATFORM V3.1 - COMPLETE BUSINESS FLOW

' ==================== PARTICIPANTS ====================
actor "Customer" as CUST #2196F3
participant "KiteHub\nFrontend" as HUB_FE #BBDEFB
participant "Sale\nModule" as SALE #90CAF9
participant "AI Agent\nModule" as AI #90CAF9
participant "Maintaining\nModule" as MAINT #90CAF9
participant "KiteClass\nInstance" as KC #FFE0B2
actor "Center Owner" as OWNER #E65100
actor "Center Admin" as ADMIN #F57C00
actor "Teacher" as TEACHER #FF9800
actor "Student" as STUDENT #FFB74D
actor "Parent" as PARENT #4CAF50

' ==================== PHASE 1: SALES ====================
== PHASE 1: ฤฤNG Kร & MUA GรI ==

CUST -> HUB_FE : 1. Truy cแบญp kiteclass.com
HUB_FE --> CUST : Hiแปn thแป Landing Page\n(Pricing, Features)

CUST -> HUB_FE : 2. Chแปn gรณi (Basic/Standard/Premium)
HUB_FE -> SALE : Tแบกo ฤฦกn hรng
note right of SALE
  Order includes:
  - Gรณi dแปch vแปฅ
  - Subdomain: abc.kiteclass.com
  - Billing cycle: Monthly/Yearly
  - Add-ons (optional)
end note

CUST -> HUB_FE : 3. Upload logo/แบฃnh
HUB_FE -> AI : Xแปญ lรฝ AI Marketing

activate AI #F3E5F5
AI -> AI : Remove background
AI -> AI : Extract colors
AI -> AI : Generate marketing copy (GPT-4)
AI -> AI : Create logos/banners (SDXL)
AI --> HUB_FE : Preview assets (~30s)
deactivate AI

CUST -> HUB_FE : 4. Xรกc nhแบญn & Thanh toรกn
HUB_FE -> SALE : Process payment
SALE --> HUB_FE : Payment success

' ==================== PHASE 2: PROVISIONING ====================
== PHASE 2: TแบO INSTANCE Tแปฐ ฤแปNG ==

SALE -> MAINT : 5. Trigger provisioning

activate MAINT #C8E6C9
MAINT -> MAINT : Create PostgreSQL database
MAINT -> MAINT : Deploy User+Gateway Service
MAINT -> MAINT : Deploy Core Service
MAINT -> MAINT : Deploy Frontend
MAINT -> MAINT : Apply branding assets
MAINT -> MAINT : Configure DNS (abc.kiteclass.com)
MAINT --> KC : Instance ready (~3-5 min)
deactivate MAINT

MAINT --> CUST : Email: Instance ฤรฃ sแบตn sรng\n+ Admin credentials

' ==================== PHASE 3: CENTER SETUP ====================
== PHASE 3: CรI ฤแบถT TRUNG TรM ==

CUST -> KC : 6. ฤฤng nhแบญp lแบงn ฤแบงu
note right of KC : Becomes CENTER_OWNER

OWNER -> KC : 7. Cรi ฤแบทt cฦก bแบฃn
KC --> OWNER : - Thรดng tin trung tรขm\n- Cแบฅu hรฌnh hแปc phรญ\n- Tแบกo tรi khoแบฃn Admin

OWNER -> KC : 8. Tแบกo tรi khoแบฃn Admin
KC --> ADMIN : Account created

ADMIN -> KC : 9. Setup khรณa hแปc & lแปp
KC --> KC : - Tแบกo Courses\n- Tแบกo Classes\n- Phรขn lแปch\n- Phรขn phรฒng

ADMIN -> KC : 10. Tแบกo tรi khoแบฃn GV
KC --> TEACHER : Teacher accounts

' ==================== PHASE 4: OPERATIONS ====================
== PHASE 4: VแบฌN HรNH TRUNG TรM ==

ADMIN -> KC : 11. ฤฤng kรฝ hแปc viรชn
KC --> STUDENT : Student accounts\n+ QR Code liรชn kแบฟt PH

STUDENT --> PARENT : 12. Chia sแบป QR Code
PARENT -> KC : 13. Quรฉt QR + OTP Zalo
KC --> PARENT : Liรชn kแบฟt thรnh cรดng

group Daily Operations
    TEACHER -> KC : ฤiแปm danh buแปi hแปc
    KC -> PARENT : ๐ฑ Notification: Con ฤรฃ ฤiแปm danh

    TEACHER -> KC : Nhแบญp ฤiแปm
    KC -> PARENT : ๐ฑ Notification: ฤiแปm mแปi

    ADMIN -> KC : Tแบกo hรณa ฤฦกn hแปc phรญ
    KC -> PARENT : ๐ฑ Notification: Hรณa ฤฦกn + QR VietQR

    PARENT -> KC : Thanh toรกn qua QR
    KC --> KC : Cแบญp nhแบญt trแบกng thรกi\nINVOICE: PAID
end

' ==================== PHASE 5: GAMIFICATION ====================
== PHASE 5: GAMIFICATION (Optional) ==

note over KC
  Nแบฟu trung tรขm enable Engagement Service
end note

STUDENT -> KC : Hoรn thรnh bรi tแบญp
KC -> KC : +10 ฤiแปm thฦฐแปng

STUDENT -> KC : ฤiแปm danh ฤแบงy ฤแปง tuแบงn
KC -> KC : +50 ฤiแปm bonus\n๐ Badge "Chuyรชn cแบงn"

STUDENT -> KC : Xem ฤiแปm & ฤแปi quร
KC --> STUDENT : Danh sรกch rewards

' ==================== PHASE 6: REPORTS ====================
== PHASE 6: BรO CรO & THEO DรI ==

OWNER -> KC : Xem Dashboard
KC --> OWNER : - Tแปng hแปc viรชn\n- Doanh thu thรกng\n- Cรดng nแปฃ\n- Top teachers

ADMIN -> KC : Xuแบฅt bรกo cรกo
KC --> ADMIN : - Bรกo cรกo ฤiแปm danh\n- Bรกo cรกo hแปc phรญ\n- Bรกo cรกo tiแบฟn ฤแป

PARENT -> KC : Xem bรกo cรกo con
KC --> PARENT : - Lแปch sแปญ ฤiแปm danh\n- ฤiแปm sแป\n- Nhแบญn xรฉt GV

' ==================== NOTES ====================
note right of KC
  **KiteClass Instance**
  abc.kiteclass.com

  Actors:
  ๐ CENTER_OWNER
  ๐ง CENTER_ADMIN
  ๐จโ๐ซ TEACHER
  ๐จโ๐ STUDENT
  ๐จโ๐ฉโ๐ง PARENT
end note

@enduml
