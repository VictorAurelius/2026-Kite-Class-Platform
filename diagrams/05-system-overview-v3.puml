@startuml system-overview-v3
skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 10
skinparam monochrome true
skinparam shadowing false
skinparam packageStyle rectangle
skinparam rectangleBorderThickness 1

title Kiến Trúc Tổng Quan - KiteClass Platform

actor "Người dùng" as USER

rectangle "Đăng ký" as REG
rectangle "Sử dụng" as USE

USER -down-> REG
USER -down-> USE

package "KiteHub Platform (Modular Monolith)" {
    rectangle "Message Module" as MSG
    rectangle "Sale Module" as SALE

    rectangle "AI Agent Module" as AI
    rectangle "Maintaining Module" as MAINT

    rectangle "Storage" as STORAGE
    rectangle "AI Services" as AI_SVC

    MSG -[hidden]right- SALE
    AI -[hidden]right- MAINT
    AI -down-> AI_SVC
    MAINT -down-> STORAGE
}

note right of AI_SVC
    - GPT-4: Tạo marketing copy
    - SDXL: Tạo logo, banner
    - Remove.bg: Xóa nền ảnh
end note

package "KiteClass Instance #1 (abc.kiteclass.com)" as KC1 {
    rectangle "Frontend" as FE1
    rectangle "User+Gateway" as UG1
    rectangle "Core Service" as CORE1
    rectangle "Engagement" as ENG1
    rectangle "Database" as DB1
    rectangle "Cache" as CACHE1
}

note bottom of KC1
    **Ví dụ 1: Trung tâm Anh ngữ ABC**
    - 500 học viên, 20 giáo viên, 50 lớp
    - Gói Premium: $99/tháng
    - Services: Full (Core + Engagement)
    - RAM: ~2.5GB
end note

package "KiteClass Instance #2 (xyz.kiteclass.com)" as KC2 {
    rectangle "Frontend" as FE2
    rectangle "User+Gateway" as UG2
    rectangle "Core Service" as CORE2
    rectangle "Database" as DB2
    rectangle "Cache" as CACHE2
}

note bottom of KC2
    **Ví dụ 2: Gia sư IELTS XYZ**
    - 100 học viên, 5 giáo viên, 10 lớp
    - Gói Standard: $49/tháng
    - Services: Core only (không Engagement)
    - RAM: ~2GB
end note

package "KiteClass Instance #3 (math123.kiteclass.com)" as KC3 {
    rectangle "Frontend" as FE3
    rectangle "User+Gateway" as UG3
    rectangle "Core Service" as CORE3
    rectangle "Database" as DB3
}

note bottom of KC3
    **Ví dụ 3: Lớp Toán thầy Minh**
    - 30 học viên, 1 giáo viên, 3 lớp
    - Gói Basic: $29/tháng
    - Services: Core only (minimal)
    - RAM: ~1.5GB
end note

REG -down-> SALE
SALE -right-> AI : Tạo branding
AI -down-> MAINT : Quản lý
MAINT -down..> KC1 : Auto Provision\n(3-5 phút)
MAINT -down..> KC2 : Auto Provision
MAINT -down..> KC3 : Auto Provision

USE -down-> FE1
USE -down-> FE2
USE -down-> FE3

FE1 -down-> UG1
UG1 -down-> CORE1
UG1 -down-> ENG1
CORE1 -down-> DB1
CORE1 -right-> CACHE1

FE2 -down-> UG2
UG2 -down-> CORE2
CORE2 -down-> DB2
CORE2 -right-> CACHE2

FE3 -down-> UG3
UG3 -down-> CORE3
CORE3 -down-> DB3

@enduml
