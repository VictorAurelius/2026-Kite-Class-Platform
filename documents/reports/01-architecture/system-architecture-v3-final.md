# BÃO CÃO KIáº¾N TRÃšC Há»† THá»NG V3 - KITECLASS PLATFORM
## PhiÃªn báº£n chÃ­nh thá»©c - Final Version

## ThÃ´ng tin tÃ i liá»‡u

| Thuá»™c tÃ­nh | GiÃ¡ trá»‹ |
|------------|---------|
| **TÃªn dá»± Ã¡n** | KiteClass Platform V3.1 |
| **PhiÃªn báº£n** | 3.1 (Optimized) |
| **NgÃ y táº¡o** | 23/12/2025 |
| **Loáº¡i tÃ i liá»‡u** | BÃ¡o cÃ¡o kiáº¿n trÃºc há»‡ thá»‘ng chÃ­nh thá»©c |
| **Thay Ä‘á»•i chÃ­nh V3** | Bá»• sung Phá»¥ huynh, HÃ³a Ä‘Æ¡n, Gamification tá»« BeeClass |
| **Thay Ä‘á»•i chÃ­nh V3.1** | Merge Gateway+User, tÃ¡ch Engagement Service, Add-on pricing |

---

# Má»¤C Lá»¤C

**Tá»”NG QUAN**
- [Tá»•ng quan thay Ä‘á»•i tá»« V2](#tá»•ng-quan-thay-Ä‘á»•i-tá»«-v2)

**PHáº¦N 1: KIáº¾N TRÃšC Tá»”NG QUAN**
- [1.1. SÆ¡ Ä‘á»“ kiáº¿n trÃºc toÃ n há»‡ thá»‘ng](#11-sÆ¡-Ä‘á»“-kiáº¿n-trÃºc-toÃ n-há»‡-thá»‘ng)
- [1.2. Actors trong há»‡ thá»‘ng V3](#12-actors-trong-há»‡-thá»‘ng-v3)

**PHáº¦N 1B: KITEHUB FRONTEND** â­ NEW
- [1B.1. Tá»•ng quan KiteHub Frontend](#1b1-tá»•ng-quan-kitehub-frontend)
- [1B.2. Component Architecture](#1b2-component-architecture)
- [1B.3. Page Components Detail](#1b3-page-components-detail)
- [1B.4. API Integration](#1b4-kitehub-frontend---api-integration)

**PHáº¦N 2-6: KITECLASS INSTANCE**
- [Pháº§n 2: Kiáº¿n trÃºc KiteClass Instance V3](#pháº§n-2-kiáº¿n-trÃºc-kiteclass-instance-v3)
- [Pháº§n 3: Há»‡ thá»‘ng hÃ³a Ä‘Æ¡n há»c phÃ­ (Billing)](#pháº§n-3-há»‡-thá»‘ng-hÃ³a-Ä‘Æ¡n-há»c-phÃ­-billing)
- [Pháº§n 4: Há»‡ thá»‘ng Gamification](#pháº§n-4-há»‡-thá»‘ng-gamification)
- [Pháº§n 5: Cá»•ng phá»¥ huynh (Parent Portal)](#pháº§n-5-cá»•ng-phá»¥-huynh-parent-portal)
- [Pháº§n 6: Authentication & Authorization V3](#pháº§n-6-authentication--authorization-v3)

**Tá»”NG Káº¾T**
- [Pháº§n 7: Tá»•ng káº¿t kiáº¿n trÃºc V3](#pháº§n-7-tá»•ng-káº¿t-kiáº¿n-trÃºc-v3)

---

## Tá»”NG QUAN THAY Äá»”I Tá»ª V2

| TÃ­nh nÄƒng | V2 | V3 | LÃ½ do |
|-----------|----|----|-------|
| **AI Quiz Generator** | âœ… CÃ³ | âŒ Loáº¡i bá» | Phá»©c táº¡p, chÆ°a á»•n Ä‘á»‹nh, khÃ³ triá»ƒn khai |
| **AI Marketing Agent** | âœ… CÃ³ | âœ… Giá»¯ nguyÃªn | ÄÃ£ á»•n Ä‘á»‹nh, mang láº¡i giÃ¡ trá»‹ cao |
| **Actor Phá»¥ huynh** | âŒ KhÃ´ng | âœ… Bá»• sung | Há»c tá»« BeeClass - nhu cáº§u thá»±c táº¿ |
| **Há»‡ thá»‘ng HÃ³a Ä‘Æ¡n** | âŒ KhÃ´ng | âœ… Bá»• sung | Há»c tá»« BeeClass - quáº£n lÃ½ tÃ i chÃ­nh |
| **Gamification** | âŒ KhÃ´ng | âœ… Bá»• sung | Há»c tá»« BeeClass - tÄƒng engagement |
| **Kiáº¿n trÃºc KiteClass** | 7 services | 4 services | Tá»‘i Æ°u tá»« service-optimization-report |

---

# PHáº¦N 1: KIáº¾N TRÃšC Tá»”NG QUAN V3

## 1.1. SÆ¡ Ä‘á»“ kiáº¿n trÃºc toÃ n há»‡ thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     KITECLASS PLATFORM V3.1 (OPTIMIZED)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                       KITEHUB (MODULAR MONOLITH)                           â”‚ â”‚
â”‚  â”‚                        Java Spring Boot Application                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚    Sale      â”‚  â”‚   Message    â”‚  â”‚  Maintaining â”‚  â”‚  AI Agent    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   Module     â”‚  â”‚    Module    â”‚  â”‚    Module    â”‚  â”‚   Module     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚  (Marketing) â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                     KITEHUB FRONTEND (Next.js)                     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Landing Page  â€¢ Admin Dashboard  â€¢ Customer Portal  â€¢ Chat UI  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                            â”‚ â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚                    â”‚         Shared Layer            â”‚                    â”‚ â”‚
â”‚  â”‚                    â”‚  â€¢ Auth  â€¢ Database  â€¢ Queue    â”‚                    â”‚ â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â”‚                                                                            â”‚ â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚  â”‚         â”‚ PostgreSQL  â”‚    â”‚    Redis    â”‚    â”‚  RabbitMQ   â”‚             â”‚ â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                       â”‚                                         â”‚
â”‚                              RESTful API / Events                               â”‚
â”‚                                       â”‚                                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚          â”‚                            â”‚                            â”‚            â”‚
â”‚          â–¼                            â–¼                            â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   KITECLASS #1     â”‚    â”‚   KITECLASS #2     â”‚    â”‚   KITECLASS #N     â”‚    â”‚
â”‚  â”‚ (3-5 Services V3.1)â”‚    â”‚ (3-5 Services V3.1)â”‚    â”‚ (3-5 Services V3.1)â”‚    â”‚
â”‚  â”‚                    â”‚    â”‚                    â”‚    â”‚                    â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚User+GW Service â”‚ â”‚    â”‚ â”‚User+GW Service â”‚ â”‚    â”‚ â”‚User+GW Service â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚ â”‚ Core Service   â”‚ â”‚    â”‚ â”‚ Core Service   â”‚ â”‚    â”‚ â”‚ Core Service   â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚ â”‚Engagement Svc  â”‚ â”‚    â”‚ â”‚Engagement Svc  â”‚ â”‚    â”‚ â”‚Engagement Svc  â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚ â”‚ Media Service  â”‚ â”‚    â”‚ â”‚ Media Service  â”‚ â”‚    â”‚ â”‚ Media Service  â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚ â”‚  (TÃ¹y chá»n)    â”‚ â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚ â”‚   Frontend     â”‚ â”‚    â”‚ â”‚   Frontend     â”‚ â”‚    â”‚ â”‚   Frontend     â”‚ â”‚    â”‚
â”‚  â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚ â”‚  (Báº¯t buá»™c)    â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      EXTERNAL SERVICES                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚   OpenAI     â”‚  â”‚  Stability   â”‚  â”‚  Remove.bg   â”‚  â”‚   Zalo API   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   GPT-4      â”‚  â”‚    SDXL      â”‚  â”‚              â”‚  â”‚   (OTP/Msg)  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1.2. Actors trong há»‡ thá»‘ng V3

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ACTORS Há»† THá»NG V3                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        KITEHUB ACTORS                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚   Customer   â”‚     â”‚    Admin     â”‚     â”‚    Agent     â”‚              â”‚   â”‚
â”‚  â”‚  â”‚  (ÄÄƒng kÃ½    â”‚     â”‚  (Quáº£n trá»‹   â”‚     â”‚  (Há»— trá»£     â”‚              â”‚   â”‚
â”‚  â”‚  â”‚   mua gÃ³i)   â”‚     â”‚   KiteHub)   â”‚     â”‚   khÃ¡ch)     â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      KITECLASS INSTANCE ACTORS                            â”‚   â”‚
â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚CENTER_OWNER  â”‚     â”‚CENTER_ADMIN  â”‚     â”‚   TEACHER    â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ (Chá»§ trung   â”‚     â”‚ (Quáº£n trá»‹    â”‚     â”‚  (GiÃ¡o viÃªn) â”‚              â”‚   â”‚
â”‚  â”‚  â”‚    tÃ¢m)      â”‚     â”‚   viÃªn)      â”‚     â”‚              â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚  â”‚  â”‚   STUDENT    â”‚     â”‚   PARENT     â”‚  â­ NEW                           â”‚   â”‚
â”‚  â”‚  â”‚  (Há»c viÃªn)  â”‚     â”‚ (Phá»¥ huynh)  â”‚                                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Chi tiáº¿t Actor PARENT (Má»›i)

| Thuá»™c tÃ­nh | MÃ´ táº£ |
|------------|-------|
| **MÃ´ táº£** | Phá»¥ huynh cá»§a há»c viÃªn, theo dÃµi con em táº¡i trung tÃ¢m |
| **ÄÄƒng kÃ½** | Tá»± Ä‘Äƒng kÃ½ qua link/QR code, xÃ¡c thá»±c OTP Zalo |
| **Quan há»‡** | LiÃªn káº¿t vá»›i 1 hoáº·c nhiá»u STUDENT (con em) |
| **Quyá»n háº¡n** | Xem Ä‘iá»ƒm danh, Ä‘iá»ƒm sá»‘, hÃ³a Ä‘Æ¡n há»c phÃ­ cá»§a con |
| **KÃªnh liÃªn láº¡c** | Nháº­n thÃ´ng bÃ¡o qua Zalo, app, email |

---

# PHáº¦N 1B: KIáº¾N TRÃšC KITEHUB FRONTEND

## 1B.1. Tá»•ng quan KiteHub Frontend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         KITEHUB FRONTEND ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  Technology Stack:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Framework: Next.js 14 (App Router)                                     â”‚  â”‚
â”‚  â”‚  â€¢ Language: TypeScript                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Styling: TailwindCSS + Shadcn/UI                                       â”‚  â”‚
â”‚  â”‚  â€¢ State Management: Zustand + React Query                                â”‚  â”‚
â”‚  â”‚  â€¢ Real-time: Socket.io Client                                            â”‚  â”‚
â”‚  â”‚  â€¢ Form: React Hook Form + Zod                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  URL Structure:                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  https://kiteclass.com/               â†’ Landing Page (Public)             â”‚  â”‚
â”‚  â”‚  https://kiteclass.com/admin          â†’ Admin Dashboard (Internal)        â”‚  â”‚
â”‚  â”‚  https://kiteclass.com/portal         â†’ Customer Portal (Authenticated)   â”‚  â”‚
â”‚  â”‚  https://kiteclass.com/chat           â†’ Agent Chat Interface              â”‚  â”‚
â”‚  â”‚  https://kiteclass.com/instances      â†’ Instance Management               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1B.2. Component Architecture

```
kitehub-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                              # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (public)/                     # Public routes (no auth)
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                  # Landing page
â”‚   â”‚   â”‚   â”œâ”€â”€ pricing/page.tsx          # Pricing page
â”‚   â”‚   â”‚   â”œâ”€â”€ features/page.tsx         # Features showcase
â”‚   â”‚   â”‚   â””â”€â”€ contact/page.tsx          # Contact form
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (auth)/                       # Authentication routes
â”‚   â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ register/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ forgot-password/page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ admin/                        # Admin Dashboard (KiteHub Admin)
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx                # Admin layout with sidebar
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                  # Dashboard overview
â”‚   â”‚   â”‚   â”œâ”€â”€ instances/                # Instance management
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # List all instances
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/page.tsx         # Instance detail
â”‚   â”‚   â”‚   â”œâ”€â”€ customers/page.tsx        # Customer management
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/page.tsx           # Order management
â”‚   â”‚   â”‚   â”œâ”€â”€ subscriptions/page.tsx    # Subscription management
â”‚   â”‚   â”‚   â”œâ”€â”€ agents/page.tsx           # AI Agent management
â”‚   â”‚   â”‚   â””â”€â”€ settings/page.tsx         # System settings
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ portal/                       # Customer Portal
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx                # Customer layout
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                  # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ instances/page.tsx        # My instances
â”‚   â”‚   â”‚   â”œâ”€â”€ billing/page.tsx          # Billing & invoices
â”‚   â”‚   â”‚   â”œâ”€â”€ support/page.tsx          # Support tickets
â”‚   â”‚   â”‚   â””â”€â”€ profile/page.tsx          # Profile settings
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/                         # Agent Chat Interface
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                  # Chat list
â”‚   â”‚   â”‚   â””â”€â”€ [sessionId]/page.tsx      # Chat conversation
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ api/                          # API routes (BFF pattern)
â”‚   â”‚       â”œâ”€â”€ auth/[...nextauth]/route.ts
â”‚   â”‚       â””â”€â”€ proxy/[...path]/route.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                       # Reusable components
â”‚   â”‚   â”œâ”€â”€ ui/                           # Base UI (Shadcn)
â”‚   â”‚   â”œâ”€â”€ landing/                      # Landing page components
â”‚   â”‚   â”‚   â”œâ”€â”€ Hero.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Features.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Pricing.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Testimonials.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ admin/                        # Admin components
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ InstanceTable.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AIAgentConfig.tsx
â”‚   â”‚   â”œâ”€â”€ portal/                       # Customer portal components
â”‚   â”‚   â”‚   â”œâ”€â”€ InstanceCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BillingHistory.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SupportTicket.tsx
â”‚   â”‚   â””â”€â”€ chat/                         # Chat components
â”‚   â”‚       â”œâ”€â”€ ChatWindow.tsx
â”‚   â”‚       â”œâ”€â”€ MessageBubble.tsx
â”‚   â”‚       â”œâ”€â”€ TypingIndicator.tsx
â”‚   â”‚       â””â”€â”€ AIResponseStream.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                            # Custom hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ useInstance.ts
â”‚   â”‚   â”œâ”€â”€ useChat.ts
â”‚   â”‚   â””â”€â”€ useRealtime.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                              # Utilities
â”‚   â”‚   â”œâ”€â”€ api-client.ts                 # API client (Axios)
â”‚   â”‚   â”œâ”€â”€ socket.ts                     # Socket.io client
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”‚
â”‚   â””â”€â”€ stores/                           # Zustand stores
â”‚       â”œâ”€â”€ authStore.ts
â”‚       â”œâ”€â”€ instanceStore.ts
â”‚       â””â”€â”€ chatStore.ts
â”‚
â”œâ”€â”€ public/                               # Static assets
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ icons/
â”‚
â””â”€â”€ tailwind.config.ts
```

## 1B.3. Page Components Detail

### Landing Page (Public)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           KITECLASS LANDING PAGE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  NAVIGATION BAR                                                           â”‚  â”‚
â”‚  â”‚  [Logo] KiteClass     Features  Pricing  Blog  Contact     [Login] [Demo] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            HERO SECTION                                   â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚     Ná»n táº£ng quáº£n lÃ½ trung tÃ¢m giÃ¡o dá»¥c                                  â”‚  â”‚
â”‚  â”‚            TOÃ€N DIá»†N & THÃ”NG MINH                                        â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Quáº£n lÃ½ lá»›p há»c, há»c viÃªn, Ä‘iá»ƒm danh, há»c phÃ­ - táº¥t cáº£ trong má»™t ná»n   â”‚  â”‚
â”‚  â”‚  táº£ng duy nháº¥t vá»›i há»— trá»£ AI Marketing                                   â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚           [DÃ¹ng thá»­ miá»…n phÃ­ 14 ngÃ y]   [Xem demo]                       â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          FEATURES GRID                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ“š Quáº£n lÃ½ â”‚  â”‚ ğŸ‘¥ Há»c viÃªnâ”‚  â”‚ ğŸ“Š Äiá»ƒm    â”‚  â”‚ ğŸ’° Há»c phÃ­ â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ lá»›p há»c    â”‚  â”‚ & Phá»¥ huynhâ”‚  â”‚ danh       â”‚  â”‚ & HÃ³a Ä‘Æ¡n  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ® Game    â”‚  â”‚ ğŸ“¹ Live    â”‚  â”‚ ğŸ¤– AI      â”‚  â”‚ ğŸ“± Mobile  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ hÃ³a        â”‚  â”‚ Streaming  â”‚  â”‚ Marketing  â”‚  â”‚ Friendly   â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          PRICING SECTION                                  â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚   STARTER    â”‚  â”‚  STANDARD    â”‚  â”‚   PREMIUM    â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚   1,500k/th  â”‚  â”‚  2,500k/th   â”‚  â”‚   4,500k/th  â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚  â­ Popular  â”‚  â”‚              â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚  â‰¤50 HV      â”‚  â”‚  â‰¤200 HV     â”‚  â”‚  Unlimited   â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚  Basic       â”‚  â”‚  + Live      â”‚  â”‚  + AI Agent  â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚  [Chá»n gÃ³i]  â”‚  â”‚  [Chá»n gÃ³i]  â”‚  â”‚  [Chá»n gÃ³i]  â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FOOTER: About | Blog | Privacy | Terms | Contact | Â© 2025 KiteClass     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          KITEHUB ADMIN DASHBOARD                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   SIDEBAR    â”‚  â”‚  MAIN CONTENT                                          â”‚  â”‚
â”‚  â”‚              â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  [Logo]      â”‚  â”‚  Dashboard Overview                                    â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  ğŸ“Š Dashboardâ”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  ğŸ–¥ï¸ Instancesâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  ğŸ‘¥ Customersâ”‚  â”‚  â”‚ Total      â”‚ â”‚ Active     â”‚ â”‚ Revenue    â”‚ â”‚MRR   â”‚ â”‚  â”‚
â”‚  â”‚  ğŸ“¦ Orders   â”‚  â”‚  â”‚ Instances  â”‚ â”‚ Customers  â”‚ â”‚ This Month â”‚ â”‚      â”‚ â”‚  â”‚
â”‚  â”‚  ğŸ’³ Billing  â”‚  â”‚  â”‚   127      â”‚ â”‚   89       â”‚ â”‚ 245,000k   â”‚ â”‚+12%  â”‚ â”‚  â”‚
â”‚  â”‚  ğŸ¤– AI Agent â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  ğŸ“ˆ Analyticsâ”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  âš™ï¸ Settings â”‚  â”‚  Recent Instances                                      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ ID      â”‚ Name         â”‚ Status â”‚ Plan    â”‚ MRR â”‚   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ #001    â”‚ ABC Academy  â”‚ ğŸŸ¢ OK  â”‚ Premium â”‚ 4.5Mâ”‚   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ #002    â”‚ XYZ Center   â”‚ ğŸŸ¢ OK  â”‚ Standardâ”‚ 2.5Mâ”‚   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ #003    â”‚ DEF English  â”‚ ğŸŸ¡ New â”‚ Starter â”‚ 1.5Mâ”‚   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  System Health                                          â”‚  â”‚
â”‚  â”‚  [Logout]    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ CPU: 45%  â”‚ Memory: 62%  â”‚ Storage: 38%         â”‚   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Customer Portal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            CUSTOMER PORTAL                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [Logo] KiteClass    My Instances  Billing  Support    [ğŸ‘¤ ABC Academy â–¼] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  Welcome back, ABC Academy!                                                     â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  MY INSTANCES                                                            â”‚   â”‚
â”‚  â”‚                                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  ğŸŒ abc-academy.kiteclass.com                                      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Plan: Standard              Status: ğŸŸ¢ Active                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Students: 156/200           Expires: 25/01/2026                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  [Manage Instance]  [View Analytics]  [Upgrade Plan]              â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                                          â”‚   â”‚
â”‚  â”‚  [+ Add New Instance]                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  BILLING OVERVIEW            â”‚  â”‚  SUPPORT TICKETS                     â”‚   â”‚
â”‚  â”‚                              â”‚  â”‚                                       â”‚   â”‚
â”‚  â”‚  Current Plan: 2,500,000Ä‘/th â”‚  â”‚  ğŸ”´ #1234 - Login issue (Open)       â”‚   â”‚
â”‚  â”‚  Next Invoice: 01/01/2026    â”‚  â”‚  ğŸŸ¢ #1233 - Feature request (Closed) â”‚   â”‚
â”‚  â”‚  Payment Method: Bank ***789 â”‚  â”‚                                       â”‚   â”‚
â”‚  â”‚                              â”‚  â”‚  [Create New Ticket]                  â”‚   â”‚
â”‚  â”‚  [View Invoices]             â”‚  â”‚                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent Chat Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AGENT CHAT INTERFACE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CONVERSATIONS â”‚  â”‚  CHAT WINDOW                                          â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  ğŸ” Search...  â”‚  â”‚  Customer: Anh Minh - ABC Academy                     â”‚  â”‚
â”‚  â”‚                â”‚  â”‚  Status: ğŸŸ¢ Online                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ Activeâ”‚  â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  [Customer] 10:30                                     â”‚  â”‚
â”‚  â”‚  â”‚ Anh Minh â”‚  â”‚  â”‚  TÃ´i muá»‘n tÃ¬m hiá»ƒu vá» gÃ³i Premium                     â”‚  â”‚
â”‚  â”‚  â”‚ ABC Acad â”‚  â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”‚ 2 min agoâ”‚  â”‚  â”‚  [AI Agent] 10:30                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  ChÃ o anh Minh! GÃ³i Premium cá»§a KiteClass bao gá»“m:   â”‚  â”‚
â”‚  â”‚  â”‚ Chá»‹ Lan  â”‚  â”‚  â”‚  â€¢ KhÃ´ng giá»›i háº¡n há»c viÃªn                            â”‚  â”‚
â”‚  â”‚  â”‚ XYZ Cent â”‚  â”‚  â”‚  â€¢ AI Marketing Agent                                 â”‚  â”‚
â”‚  â”‚  â”‚ 15 min   â”‚  â”‚  â”‚  â€¢ Live streaming khÃ´ng giá»›i háº¡n                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â€¢ Priority support                                   â”‚  â”‚
â”‚  â”‚                â”‚  â”‚  Anh cÃ³ muá»‘n Ä‘Æ°á»£c tÆ° váº¥n thÃªm khÃ´ng áº¡?                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”‚ ğŸ”´ Closedâ”‚  â”‚  â”‚  [Customer] 10:32                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  GiÃ¡ bao nhiÃªu váº­y?                                   â”‚  â”‚
â”‚  â”‚  â”‚ Anh TÃ¹ng â”‚  â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”‚ Yesterdayâ”‚  â”‚  â”‚  [AI Agent typing...]                                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â—â—â—                                                   â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  ğŸ“Š Stats     â”‚  â”‚  â”‚  Type your message...                            â”‚  â”‚  â”‚
â”‚  â”‚  Today: 23    â”‚  â”‚  â”‚  [ğŸ“] [ğŸ˜Š]                           [Send â†’] â”‚  â”‚  â”‚
â”‚  â”‚  Week: 145    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1B.4. KiteHub Frontend - API Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND - BACKEND INTEGRATION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         BFF PATTERN (Backend For Frontend)                â”‚  â”‚
â”‚  â”‚                                                                           â”‚  â”‚
â”‚  â”‚  Next.js API Routes (/api/*) Ä‘Ã³ng vai trÃ² BFF:                           â”‚  â”‚
â”‚  â”‚  â€¢ Aggregate multiple API calls                                          â”‚  â”‚
â”‚  â”‚  â€¢ Handle authentication tokens                                          â”‚  â”‚
â”‚  â”‚  â€¢ Transform data for frontend needs                                     â”‚  â”‚
â”‚  â”‚  â€¢ Cache responses                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  API Endpoints mapping:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Frontend Route          â”‚  BFF Route           â”‚  Backend API          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  /portal/instances       â”‚  /api/my-instances   â”‚  GET /sale/instances  â”‚    â”‚
â”‚  â”‚  /admin/instances        â”‚  /api/admin/instancesâ”‚  GET /maintaining/*   â”‚    â”‚
â”‚  â”‚  /chat                   â”‚  /api/chat/sessions  â”‚  GET /message/sessionsâ”‚    â”‚
â”‚  â”‚  /admin/ai-agent         â”‚  /api/ai-agent/configâ”‚  POST /ai-agent/*     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  Real-time Communication:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  Browser â†â”€â”€â”€ WebSocket â”€â”€â”€â†’ Socket.io Server â†â”€â”€â”€ RabbitMQ â”€â”€â”€â†’ Backend    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  Events:                                                                â”‚    â”‚
â”‚  â”‚  â€¢ chat:message          - New chat message                            â”‚    â”‚
â”‚  â”‚  â€¢ chat:typing           - Agent/Customer typing indicator             â”‚    â”‚
â”‚  â”‚  â€¢ instance:status       - Instance health update                      â”‚    â”‚
â”‚  â”‚  â€¢ notification:new      - Real-time notifications                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 2: KIáº¾N TRÃšC KITECLASS INSTANCE V3.1 (OPTIMIZED)

## 2.1. Cáº¥u trÃºc 3-5 Services (Tá»‘i Æ°u vá»›i Add-ons)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       KITECLASS INSTANCE V3.1 (OPTIMIZED)                        â”‚
â”‚                        (3-5 Services - Dynamic Architecture)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              USER + GATEWAY SERVICE (Merged - Báº¯t buá»™c)                     â”‚ â”‚
â”‚  â”‚                        Java Spring Boot                                     â”‚ â”‚
â”‚  â”‚                                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  GATEWAY LAYER (Embedded Spring Cloud Gateway)                      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ JWT Validation  â€¢ Rate Limiting (Redis)  â€¢ CORS  â€¢ Routing       â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  AUTH LAYER                                                          â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ JWT Generation  â€¢ OAuth 2.0 (Google, Facebook)  â€¢ Session Mgmt   â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  USER MANAGEMENT                                                     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ User CRUD  â€¢ Role/Permission  â€¢ Multi-tenant isolation           â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                             â”‚ â”‚
â”‚  â”‚  Resources: ~640MB RAM, ~0.5 vCPU                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                       â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚         â”‚                             â”‚                             â”‚           â”‚
â”‚         â–¼                             â–¼                             â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    CORE SERVICE      â”‚  â”‚  ENGAGEMENT SERVICE  â”‚  â”‚    MEDIA SERVICE     â”‚  â”‚
â”‚  â”‚     (Báº¯t buá»™c)       â”‚  â”‚     (TÃ¹y chá»n)       â”‚  â”‚     (TÃ¹y chá»n)       â”‚  â”‚
â”‚  â”‚  Java Spring Boot    â”‚  â”‚   Java Spring Boot   â”‚  â”‚      Node.js         â”‚  â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â€¢ Video upload      â”‚  â”‚
â”‚  â”‚  â”‚ Class Module   â”‚  â”‚  â”‚  â”‚ Gamification   â”‚  â”‚  â”‚  â€¢ Transcoding       â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ KhÃ³a há»c     â”‚  â”‚  â”‚  â”‚ â€¢ Äiá»ƒm tÃ­ch lÅ©yâ”‚  â”‚  â”‚  â€¢ Live streaming    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Lá»›p há»c      â”‚  â”‚  â”‚  â”‚ â€¢ Äá»•i quÃ       â”‚  â”‚  â”‚  â€¢ WebSocket         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Lá»‹ch há»c     â”‚  â”‚  â”‚  â”‚ â€¢ Huy hiá»‡u     â”‚  â”‚  â”‚  â€¢ Recording         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Há»c viÃªn     â”‚  â”‚  â”‚  â”‚ â€¢ Báº£ng xáº¿p háº¡ngâ”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚Learning Module â”‚  â”‚  â”‚  â”‚ Parent Portal  â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Äiá»ƒm danh    â”‚  â”‚  â”‚  â”‚ â€¢ Dashboard    â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ BÃ i táº­p      â”‚  â”‚  â”‚  â”‚ â€¢ ThÃ´ng bÃ¡o    â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Äiá»ƒm sá»‘      â”‚  â”‚  â”‚  â”‚ â€¢ Xem Ä‘iá»ƒm     â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Nháº­n xÃ©t     â”‚  â”‚  â”‚  â”‚ â€¢ Zalo OTP     â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚Billing Module  â”‚  â”‚  â”‚  â”‚ Forum Module   â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Há»c phÃ­      â”‚  â”‚  â”‚  â”‚ â€¢ Diá»…n Ä‘Ã n     â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ HÃ³a Ä‘Æ¡n      â”‚  â”‚  â”‚  â”‚ â€¢ Há»i Ä‘Ã¡p      â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ CÃ´ng ná»£      â”‚  â”‚  â”‚  â”‚ â€¢ Tháº£o luáº­n    â”‚  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ QR Payment   â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚                      â”‚  â”‚  ~384MB RAM          â”‚  â”‚  ~512MB RAM          â”‚  â”‚
â”‚  â”‚  ~768MB RAM          â”‚  â”‚  ~0.4 vCPU           â”‚  â”‚  ~0.5 vCPU           â”‚  â”‚
â”‚  â”‚  ~0.75 vCPU          â”‚  â”‚                      â”‚  â”‚                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                       FRONTEND (Next.js - Báº¯t buá»™c)                         â”‚ â”‚
â”‚  â”‚  â€¢ Server-Side Rendering  â€¢ Multi-role UI  â€¢ Responsive Design            â”‚ â”‚
â”‚  â”‚  â€¢ Resources: ~256MB RAM, ~0.25 vCPU                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          SHARED INFRASTRUCTURE                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚ â”‚
â”‚  â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis     â”‚  â”‚   RabbitMQ   â”‚                      â”‚ â”‚
â”‚  â”‚  â”‚  (Primary)   â”‚  â”‚ (Cache/Rate) â”‚  â”‚   (Queue)    â”‚                      â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2.2. Resource Allocation theo gÃ³i dá»‹ch vá»¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESOURCE ALLOCATION BY SERVICE PLAN                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  GÃ“I BASIC (500k/th) - 3 Services                                       â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  User+Gateway     Core Service      Frontend        TOTAL               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚    â”‚
â”‚  â”‚  â”‚  640MB   â”‚ +  â”‚  768MB   â”‚  +  â”‚  256MB   â”‚  =  ~1.7GB RAM          â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Features: Class, Learning, Billing                                     â”‚    â”‚
â”‚  â”‚  âŒ Gamification  âŒ Parent Portal  âŒ Forum  âŒ Media                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  GÃ“I BASIC + ENGAGEMENT (800k/th) - 4 Services                          â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  User+Gateway   Core Service   Engagement   Frontend     TOTAL          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚  â”‚  640MB   â”‚+ â”‚  768MB   â”‚+ â”‚  384MB   â”‚+ â”‚  256MB   â”‚ = ~2GB RAM    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Features: Class, Learning, Billing + Gamification, Parent, Forum       â”‚    â”‚
â”‚  â”‚  âŒ Media                                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  GÃ“I STANDARD (1tr/th) - 4 Services (= BASIC + Engagement)              â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  TÆ°Æ¡ng tá»± BASIC + ENGAGEMENT: ~2GB RAM                                  â”‚    â”‚
â”‚  â”‚  + Giá»›i háº¡n há»c viÃªn cao hÆ¡n (200 vs 50)                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  GÃ“I STANDARD + MEDIA (1.5tr/th) - 5 Services                           â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  User+GW   Core     Engagement   Media     Frontend     TOTAL           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚    â”‚
â”‚  â”‚  â”‚ 640MBâ”‚+â”‚ 768MBâ”‚+â”‚  384MB   â”‚+â”‚ 512MBâ”‚+ â”‚  256MB   â”‚ = ~2.5GB RAM   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Features: ALL (Video upload limited)                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  GÃ“I PREMIUM (2.8tr/th) - 5 Services (Full Features)                    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  TÆ°Æ¡ng tá»± STANDARD + MEDIA: ~2.5GB RAM                                  â”‚    â”‚
â”‚  â”‚  + Unlimited há»c viÃªn                                                   â”‚    â”‚
â”‚  â”‚  + Unlimited video storage                                               â”‚    â”‚
â”‚  â”‚  + Priority support                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2.3. Báº£ng giÃ¡ linh hoáº¡t (Add-on Pricing)

| GÃ³i cÆ¡ báº£n | GiÃ¡ | Há»c viÃªn | Services | RAM |
|------------|-----|----------|----------|-----|
| **BASIC** | 500k/th | â‰¤50 | User+GW, Core, FE | ~1.7GB |
| **STANDARD** | 1tr/th | â‰¤200 | User+GW, Core, Engagement, FE | ~2GB |
| **PREMIUM** | 2tr/th | Unlimited | User+GW, Core, Engagement, FE | ~2GB |

| Add-on | GiÃ¡ | MÃ´ táº£ | RAM thÃªm |
|--------|-----|-------|----------|
| **ENGAGEMENT PACK** | +300k/th | Gamification + Parent Portal + Forum | +384MB |
| **MEDIA PACK** | +500k/th | Video (50GB) + Live Streaming + Recording | +512MB |
| **MEDIA UNLIMITED** | +800k/th | Video (Unlimited) + Live (Unlimited) | +512MB |

**VÃ­ dá»¥:**
- BASIC + Engagement = 500k + 300k = **800k/th**
- BASIC + Media = 500k + 500k = **1tr/th**
- STANDARD + Media = 1tr + 500k = **1.5tr/th**
- PREMIUM + Media Unlimited = 2tr + 800k = **2.8tr/th**

## 2.2. Module Structure cá»§a Core Service V3

```
core-service/
â”œâ”€â”€ src/main/java/com/kiteclass/core/
â”‚   â”‚
â”‚   â”œâ”€â”€ class/                          # Class Module
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ CourseController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ClassController.java
â”‚   â”‚   â”‚   â””â”€â”€ ScheduleController.java
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â”œâ”€â”€ learning/                       # Learning Module
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ AttendanceController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ AssignmentController.java
â”‚   â”‚   â”‚   â””â”€â”€ GradeController.java
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â”œâ”€â”€ billing/                        # â­ Billing Module (NEW)
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ TuitionController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentController.java
â”‚   â”‚   â”‚   â””â”€â”€ DebtController.java
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”‚   â”œâ”€â”€ TuitionCalculatorService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ InvoiceGeneratorService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ QRCodePaymentService.java
â”‚   â”‚   â”‚   â””â”€â”€ DebtTrackingService.java
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â”œâ”€â”€ Tuition.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Invoice.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Payment.java
â”‚   â”‚   â”‚   â””â”€â”€ Debt.java
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â”œâ”€â”€ gamification/                   # â­ Gamification Module (NEW)
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ PointController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ RewardController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ BadgeController.java
â”‚   â”‚   â”‚   â””â”€â”€ LeaderboardController.java
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”‚   â”œâ”€â”€ PointCalculatorService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ RewardExchangeService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ BadgeAwardService.java
â”‚   â”‚   â”‚   â””â”€â”€ LeaderboardService.java
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â”œâ”€â”€ Point.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Reward.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Badge.java
â”‚   â”‚   â”‚   â”œâ”€â”€ StudentBadge.java
â”‚   â”‚   â”‚   â””â”€â”€ RewardExchange.java
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â”œâ”€â”€ parent/                         # â­ Parent Module (NEW)
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentPortalController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentNotificationController.java
â”‚   â”‚   â”‚   â””â”€â”€ ParentReportController.java
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentRegistrationService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentNotificationService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ ChildLinkingService.java
â”‚   â”‚   â”‚   â””â”€â”€ ParentReportService.java
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â”œâ”€â”€ ParentStudent.java       # LiÃªn káº¿t phá»¥ huynh - há»c viÃªn
â”‚   â”‚   â”‚   â””â”€â”€ ParentNotification.java
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â”œâ”€â”€ forum/                          # Forum Module
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚
â”‚   â””â”€â”€ shared/                         # Shared components
â”‚       â”œâ”€â”€ config/
â”‚       â”œâ”€â”€ security/
â”‚       â”œâ”€â”€ exception/
â”‚       â””â”€â”€ util/
```

---

# PHáº¦N 3: Há»† THá»NG HÃ“A ÄÆ N Há»ŒC PHÃ (BILLING)

## 3.1. Tá»•ng quan Billing Module

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BILLING MODULE OVERVIEW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  Má»¥c Ä‘Ã­ch:                                                                      â”‚
â”‚  Quáº£n lÃ½ toÃ n bá»™ chu trÃ¬nh tÃ i chÃ­nh: TÃ­nh há»c phÃ­ â†’ Táº¡o hÃ³a Ä‘Æ¡n â†’ Thu tiá»n    â”‚
â”‚  â†’ Theo dÃµi cÃ´ng ná»£ â†’ BÃ¡o cÃ¡o tÃ i chÃ­nh                                        â”‚
â”‚                                                                                  â”‚
â”‚  TÃ­nh nÄƒng chÃ­nh (Há»c tá»« BeeClass):                                            â”‚
â”‚  âœ… TÃ­nh há»c phÃ­ theo buá»•i hoáº·c cá»‘ Ä‘á»‹nh theo thÃ¡ng                             â”‚
â”‚  âœ… Tá»± Ä‘á»™ng táº¡o phiáº¿u thu hÃ ng thÃ¡ng                                           â”‚
â”‚  âœ… QR Code chuyá»ƒn khoáº£n ngÃ¢n hÃ ng                                             â”‚
â”‚  âœ… Theo dÃµi cÃ´ng ná»£ theo há»c viÃªn                                              â”‚
â”‚  âœ… ThÃ´ng bÃ¡o nháº¯c thanh toÃ¡n cho phá»¥ huynh                                     â”‚
â”‚  âœ… BÃ¡o cÃ¡o doanh thu theo thá»i gian                                            â”‚
â”‚                                                                                  â”‚
â”‚  Luá»“ng hoáº¡t Ä‘á»™ng:                                                               â”‚
â”‚                                                                                  â”‚
â”‚  [1] Cáº¥u hÃ¬nh há»c phÃ­     [2] TÃ­nh há»c phÃ­      [3] Táº¡o hÃ³a Ä‘Æ¡n               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
â”‚  â€¢ Há»c phÃ­ lá»›p            â€¢ Cuá»‘i thÃ¡ng tá»± Ä‘á»™ng  â€¢ PDF phiáº¿u thu               â”‚
â”‚  â€¢ Loáº¡i tÃ­nh (buá»•i/thÃ¡ng) â€¢ Hoáº·c thá»§ cÃ´ng       â€¢ QR Code thanh toÃ¡n          â”‚
â”‚  â€¢ Giáº£m giÃ¡/Æ°u Ä‘Ã£i        â€¢ Trá»« Ä‘iá»ƒm danh váº¯ng  â€¢ Gá»­i cho phá»¥ huynh           â”‚
â”‚                                                                                  â”‚
â”‚  [4] Thu tiá»n             [5] CÃ´ng ná»£           [6] BÃ¡o cÃ¡o                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚  â€¢ Tiá»n máº·t               â€¢ Theo dÃµi chÆ°a Ä‘Ã³ng  â€¢ Doanh thu                    â”‚
â”‚  â€¢ Chuyá»ƒn khoáº£n           â€¢ Nháº¯c thanh toÃ¡n     â€¢ CÃ´ng ná»£                      â”‚
â”‚  â€¢ Äá»‘i soÃ¡t QR            â€¢ Lá»‹ch sá»­ thanh toÃ¡n  â€¢ Há»c viÃªn ná»£                  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3.2. Database Schema - Billing

```sql
-- Schema: billing
CREATE SCHEMA billing;

-- Cáº¥u hÃ¬nh há»c phÃ­ theo lá»›p
CREATE TABLE billing.tuition_configs (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    class_id UUID NOT NULL REFERENCES class_module.classes(id),
    calculation_type VARCHAR(20) NOT NULL, -- 'FIXED' hoáº·c 'PER_SESSION'
    fixed_amount DECIMAL(12,0),            -- Há»c phÃ­ cá»‘ Ä‘á»‹nh/thÃ¡ng
    per_session_amount DECIMAL(12,0),      -- Há»c phÃ­ theo buá»•i
    discount_percent DECIMAL(5,2) DEFAULT 0,
    effective_from DATE NOT NULL,
    effective_to DATE,
    created_at TIMESTAMP DEFAULT NOW(),
    created_by UUID NOT NULL
);

-- HÃ³a Ä‘Æ¡n há»c phÃ­
CREATE TABLE billing.invoices (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    invoice_number VARCHAR(50) UNIQUE NOT NULL, -- VD: INV-2025-001234
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    class_id UUID NOT NULL REFERENCES class_module.classes(id),
    billing_month DATE NOT NULL,               -- ThÃ¡ng tÃ­nh phÃ­

    -- Chi tiáº¿t tÃ­nh phÃ­
    total_sessions INT,                        -- Tá»•ng buá»•i trong thÃ¡ng
    attended_sessions INT,                     -- Sá»‘ buá»•i Ä‘i há»c
    absent_sessions INT,                       -- Sá»‘ buá»•i váº¯ng

    -- Sá»‘ tiá»n
    base_amount DECIMAL(12,0) NOT NULL,        -- Há»c phÃ­ gá»‘c
    discount_amount DECIMAL(12,0) DEFAULT 0,   -- Giáº£m giÃ¡
    final_amount DECIMAL(12,0) NOT NULL,       -- Sá»‘ tiá»n cáº§n Ä‘Ã³ng
    paid_amount DECIMAL(12,0) DEFAULT 0,       -- ÄÃ£ Ä‘Ã³ng
    debt_amount DECIMAL(12,0) DEFAULT 0,       -- CÃ²n ná»£

    status VARCHAR(20) NOT NULL DEFAULT 'PENDING', -- PENDING, PARTIAL, PAID, OVERDUE
    due_date DATE NOT NULL,

    -- QR Payment
    qr_code_data TEXT,                         -- Ná»™i dung QR VietQR
    bank_account VARCHAR(50),
    bank_name VARCHAR(100),

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Thanh toÃ¡n
CREATE TABLE billing.payments (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    invoice_id UUID NOT NULL REFERENCES billing.invoices(id),
    amount DECIMAL(12,0) NOT NULL,
    payment_method VARCHAR(20) NOT NULL,      -- CASH, BANK_TRANSFER, MOMO, ZALOPAY
    payment_date TIMESTAMP NOT NULL,
    transaction_ref VARCHAR(100),              -- MÃ£ giao dá»‹ch ngÃ¢n hÃ ng
    note TEXT,
    received_by UUID REFERENCES user_module.users(id),
    created_at TIMESTAMP DEFAULT NOW()
);

-- CÃ´ng ná»£
CREATE TABLE billing.debts (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    total_debt DECIMAL(12,0) NOT NULL DEFAULT 0,
    last_payment_date TIMESTAMP,
    overdue_months INT DEFAULT 0,
    status VARCHAR(20) DEFAULT 'NORMAL',      -- NORMAL, WARNING, CRITICAL
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_invoices_student ON billing.invoices(student_id);
CREATE INDEX idx_invoices_status ON billing.invoices(status);
CREATE INDEX idx_invoices_month ON billing.invoices(billing_month);
CREATE INDEX idx_payments_invoice ON billing.payments(invoice_id);
CREATE INDEX idx_debts_student ON billing.debts(student_id);
```

## 3.3. QR Code Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          QR CODE PAYMENT FLOW                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  [1] Táº O HÃ“A ÄÆ N                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                               â”‚
â”‚                                                                                  â”‚
â”‚  Cuá»‘i thÃ¡ng, há»‡ thá»‘ng tá»± Ä‘á»™ng:                                                 â”‚
â”‚  â€¢ TÃ­nh há»c phÃ­ dá»±a trÃªn Ä‘iá»ƒm danh                                             â”‚
â”‚  â€¢ Táº¡o hÃ³a Ä‘Æ¡n cho tá»«ng há»c viÃªn                                               â”‚
â”‚  â€¢ Generate QR Code VietQR                                                      â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [2] GENERATE QR CODE (VietQR Standard)                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                                  â”‚
â”‚  QR Data Format:                                                                â”‚
â”‚  {                                                                              â”‚
â”‚    "bankId": "970415",                    // MÃ£ ngÃ¢n hÃ ng VietinBank           â”‚
â”‚    "accountNo": "1234567890",             // Sá»‘ tÃ i khoáº£n trung tÃ¢m            â”‚
â”‚    "accountName": "TRUNG TAM TIENG ANH ABC",                                   â”‚
â”‚    "amount": 1500000,                     // Sá»‘ tiá»n                           â”‚
â”‚    "description": "HP T12-2025 NGUYEN VAN A"  // Ná»™i dung chuyá»ƒn khoáº£n        â”‚
â”‚  }                                                                              â”‚
â”‚                                                                                  â”‚
â”‚  QR Code Image:                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                                       â”‚
â”‚  â”‚  â”‚      â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”         â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚      â”‚â–‘â–‘â–‘â”‚    â”‚â–‘â–‘â–‘â”‚         â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚      â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜         â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚    â–‘â–‘â–‘â–‘ VIETQR â–‘â–‘â–‘â–‘        â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚      â”Œâ”€â”€â”€â”                  â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚      â”‚â–‘â–‘â–‘â”‚                  â”‚    â”‚                                       â”‚
â”‚  â”‚  â”‚      â””â”€â”€â”€â”˜                  â”‚    â”‚                                       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                                       â”‚
â”‚  â”‚                                      â”‚                                       â”‚
â”‚  â”‚  TRUNG TAM TIENG ANH ABC            â”‚                                       â”‚
â”‚  â”‚  STK: 1234567890 - VietinBank       â”‚                                       â”‚
â”‚  â”‚  Sá»‘ tiá»n: 1,500,000 VND             â”‚                                       â”‚
â”‚  â”‚  ND: HP T12-2025 NGUYEN VAN A       â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [3] Gá»¬I CHO PHá»¤ HUYNH                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚                                                                                  â”‚
â”‚  â€¢ Push notification lÃªn app                                                   â”‚
â”‚  â€¢ Gá»­i qua Zalo OA                                                             â”‚
â”‚  â€¢ Email (náº¿u cÃ³)                                                              â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [4] PHá»¤ HUYNH THANH TOÃN                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚                                                                                  â”‚
â”‚  Phá»¥ huynh má»Ÿ app ngÃ¢n hÃ ng:                                                   â”‚
â”‚  â€¢ QuÃ©t QR Code                                                                 â”‚
â”‚  â€¢ Tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin chuyá»ƒn khoáº£n                                         â”‚
â”‚  â€¢ XÃ¡c nháº­n vÃ  thanh toÃ¡n                                                      â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [5] Äá»I SOÃT Tá»° Äá»˜NG                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚                                                                                  â”‚
â”‚  Há»‡ thá»‘ng kiá»ƒm tra:                                                            â”‚
â”‚  â€¢ Match ná»™i dung chuyá»ƒn khoáº£n vá»›i mÃ£ hÃ³a Ä‘Æ¡n                                  â”‚
â”‚  â€¢ Cáº­p nháº­t tráº¡ng thÃ¡i PAID                                                    â”‚
â”‚  â€¢ Gá»­i xÃ¡c nháº­n cho phá»¥ huynh                                                  â”‚
â”‚  â€¢ Cáº­p nháº­t cÃ´ng ná»£ há»c viÃªn                                                   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 4: Há»† THá»NG GAMIFICATION

## 4.1. Tá»•ng quan Gamification Module

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GAMIFICATION MODULE OVERVIEW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  Má»¥c Ä‘Ã­ch:                                                                      â”‚
â”‚  TÄƒng engagement cá»§a há»c viÃªn thÃ´ng qua cÆ¡ cháº¿ game: Äiá»ƒm thÆ°á»Ÿng, huy hiá»‡u,    â”‚
â”‚  báº£ng xáº¿p háº¡ng, Ä‘á»•i quÃ .                                                        â”‚
â”‚                                                                                  â”‚
â”‚  TÃ­nh nÄƒng chÃ­nh (Há»c tá»« BeeClass):                                            â”‚
â”‚  âœ… TÃ­ch Ä‘iá»ƒm khi tham gia hoáº¡t Ä‘á»™ng                                           â”‚
â”‚  âœ… Äá»•i Ä‘iá»ƒm láº¥y quÃ /voucher                                                   â”‚
â”‚  âœ… Huy hiá»‡u thÃ nh tÃ­ch                                                        â”‚
â”‚  âœ… Báº£ng xáº¿p háº¡ng theo lá»›p/toÃ n trÆ°á»ng                                         â”‚
â”‚                                                                                  â”‚
â”‚  CÆ¡ cháº¿ tÃ­ch Ä‘iá»ƒm:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  HÃ nh Ä‘á»™ng                          â”‚  Äiá»ƒm thÆ°á»Ÿng                     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  Äiá»ƒm danh Ä‘Ãºng giá»                 â”‚  +10 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  HoÃ n thÃ nh bÃ i táº­p Ä‘Ãºng háº¡n        â”‚  +20 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  Äiá»ƒm kiá»ƒm tra >= 8                 â”‚  +30 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  Äiá»ƒm kiá»ƒm tra = 10                 â”‚  +50 Ä‘iá»ƒm (bonus)                â”‚    â”‚
â”‚  â”‚  Streak Ä‘iá»ƒm danh 7 ngÃ y            â”‚  +100 Ä‘iá»ƒm (bonus)               â”‚    â”‚
â”‚  â”‚  Tham gia diá»…n Ä‘Ã n (há»i/tráº£ lá»i)    â”‚  +5 Ä‘iá»ƒm                         â”‚    â”‚
â”‚  â”‚  Xem háº¿t video bÃ i giáº£ng            â”‚  +15 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  Danh má»¥c quÃ  Ä‘á»•i:                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  QuÃ                                 â”‚  Äiá»ƒm cáº§n                        â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  Sticker pack                       â”‚  100 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  Voucher giáº£m 50k há»c phÃ­           â”‚  500 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  SÃ¡ch/TÃ i liá»‡u há»c táº­p              â”‚  800 Ä‘iá»ƒm                        â”‚    â”‚
â”‚  â”‚  Voucher giáº£m 200k há»c phÃ­          â”‚  1500 Ä‘iá»ƒm                       â”‚    â”‚
â”‚  â”‚  KhÃ³a há»c miá»…n phÃ­ 1 thÃ¡ng          â”‚  3000 Ä‘iá»ƒm                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4.2. Database Schema - Gamification

```sql
-- Schema: gamification
CREATE SCHEMA gamification;

-- Cáº¥u hÃ¬nh Ä‘iá»ƒm
CREATE TABLE gamification.point_rules (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    action_type VARCHAR(50) NOT NULL UNIQUE, -- ATTENDANCE, ASSIGNMENT, TEST_SCORE, etc
    action_name VARCHAR(100) NOT NULL,
    base_points INT NOT NULL,
    bonus_condition JSONB,                   -- Äiá»u kiá»‡n thÆ°á»Ÿng thÃªm
    bonus_points INT DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Äiá»ƒm tÃ­ch lÅ©y cá»§a há»c viÃªn
CREATE TABLE gamification.student_points (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    total_points INT NOT NULL DEFAULT 0,
    available_points INT NOT NULL DEFAULT 0,  -- Äiá»ƒm chÆ°a Ä‘á»•i
    used_points INT NOT NULL DEFAULT 0,       -- Äiá»ƒm Ä‘Ã£ Ä‘á»•i
    updated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(student_id)
);

-- Lá»‹ch sá»­ tÃ­ch Ä‘iá»ƒm
CREATE TABLE gamification.point_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    action_type VARCHAR(50) NOT NULL,
    points INT NOT NULL,                      -- CÃ³ thá»ƒ Ã¢m (khi Ä‘á»•i quÃ )
    reference_id UUID,                        -- ID cá»§a attendance/assignment/etc
    description TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Huy hiá»‡u
CREATE TABLE gamification.badges (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    icon_url TEXT,
    requirement_type VARCHAR(50) NOT NULL,    -- TOTAL_POINTS, STREAK, PERFECT_SCORE, etc
    requirement_value INT NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Huy hiá»‡u cá»§a há»c viÃªn
CREATE TABLE gamification.student_badges (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    badge_id UUID NOT NULL REFERENCES gamification.badges(id),
    awarded_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(student_id, badge_id)
);

-- Danh má»¥c quÃ 
CREATE TABLE gamification.rewards (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(200) NOT NULL,
    description TEXT,
    image_url TEXT,
    points_required INT NOT NULL,
    reward_type VARCHAR(50) NOT NULL,         -- VOUCHER, PHYSICAL, DIGITAL
    reward_value JSONB,                       -- Chi tiáº¿t quÃ  (giÃ¡ trá»‹ voucher, etc)
    quantity_available INT,                   -- NULL = unlimited
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Lá»‹ch sá»­ Ä‘á»•i quÃ 
CREATE TABLE gamification.reward_exchanges (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    reward_id UUID NOT NULL REFERENCES gamification.rewards(id),
    points_used INT NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'PENDING', -- PENDING, APPROVED, DELIVERED, CANCELLED
    exchange_code VARCHAR(50) UNIQUE,          -- MÃ£ Ä‘á»•i quÃ 
    approved_by UUID REFERENCES user_module.users(id),
    approved_at TIMESTAMP,
    delivered_at TIMESTAMP,
    note TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Báº£ng xáº¿p háº¡ng (cached, updated daily)
CREATE TABLE gamification.leaderboard (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    class_id UUID REFERENCES class_module.classes(id), -- NULL = toÃ n trÆ°á»ng
    period VARCHAR(20) NOT NULL,              -- WEEKLY, MONTHLY, ALL_TIME
    rank INT NOT NULL,
    total_points INT NOT NULL,
    calculated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(student_id, class_id, period)
);

-- Indexes
CREATE INDEX idx_point_history_student ON gamification.point_history(student_id);
CREATE INDEX idx_point_history_date ON gamification.point_history(created_at);
CREATE INDEX idx_student_badges_student ON gamification.student_badges(student_id);
CREATE INDEX idx_leaderboard_class ON gamification.leaderboard(class_id, period, rank);
```

## 4.3. Gamification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GAMIFICATION FLOW                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  [A] TÃCH ÄIá»‚M Tá»° Äá»˜NG                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   GiÃ¡o viÃªn â”‚      â”‚   Core Service  â”‚      â”‚  Gamification   â”‚             â”‚
â”‚  â”‚  Ä‘iá»ƒm danh  â”‚â”€â”€â”€â”€â”€â–¶â”‚   Event Bus     â”‚â”€â”€â”€â”€â”€â–¶â”‚    Service      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                         â”‚                       â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                              â”‚                                                   â”‚
â”‚                              â–¼                                                   â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                       â”‚  1. Check point rule for ATTENDANCE      â”‚              â”‚
â”‚                       â”‚  2. Calculate base points (+10)          â”‚              â”‚
â”‚                       â”‚  3. Check bonus conditions               â”‚              â”‚
â”‚                       â”‚     - ÄÃºng giá»? â†’ +5 bonus               â”‚              â”‚
â”‚                       â”‚     - Streak 7 ngÃ y? â†’ +100 bonus        â”‚              â”‚
â”‚                       â”‚  4. Update student_points                â”‚              â”‚
â”‚                       â”‚  5. Insert point_history                 â”‚              â”‚
â”‚                       â”‚  6. Check badge achievements             â”‚              â”‚
â”‚                       â”‚  7. Notify student                       â”‚              â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                  â”‚
â”‚  [B] Äá»”I QUÃ€                                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Há»c viÃªn   â”‚      â”‚   Reward Store  â”‚      â”‚   Admin/Staff   â”‚             â”‚
â”‚  â”‚  chá»n quÃ    â”‚â”€â”€â”€â”€â”€â–¶â”‚   (Frontend)    â”‚â”€â”€â”€â”€â”€â–¶â”‚   Duyá»‡t & phÃ¡t  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                        â”‚                        â”‚                       â”‚
â”‚       â–¼                        â–¼                        â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Xem Ä‘iá»ƒm â”‚          â”‚ Táº¡o request  â”‚          â”‚ XÃ¡c nháº­n     â”‚              â”‚
â”‚  â”‚ hiá»‡n cÃ³  â”‚          â”‚ Ä‘á»•i quÃ       â”‚          â”‚ giao quÃ      â”‚              â”‚
â”‚  â”‚ 1500 pts â”‚          â”‚ (trá»« Ä‘iá»ƒm)   â”‚          â”‚ cáº­p nháº­t     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ status       â”‚              â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                  â”‚
â”‚  [C] Báº¢NG Xáº¾P Háº NG                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Báº¢NG Xáº¾P Háº NG - THÃNG 12/2025                        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Háº¡ng â”‚ Há»c viÃªn             â”‚ Äiá»ƒm thÃ¡ng    â”‚ ThÃ nh tÃ­ch                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸ¥‡  â”‚ Nguyá»…n VÄƒn A         â”‚ 850 pts       â”‚ ğŸ¯ 100% Ä‘iá»ƒm danh        â”‚   â”‚
â”‚  â”‚  ğŸ¥ˆ  â”‚ Tráº§n Thá»‹ B           â”‚ 720 pts       â”‚ â­ 3 bÃ i 10 Ä‘iá»ƒm          â”‚   â”‚
â”‚  â”‚  ğŸ¥‰  â”‚ LÃª VÄƒn C             â”‚ 680 pts       â”‚ ğŸ“š HoÃ n thÃ nh 100% BT    â”‚   â”‚
â”‚  â”‚  4   â”‚ Pháº¡m Thá»‹ D           â”‚ 550 pts       â”‚                           â”‚   â”‚
â”‚  â”‚  5   â”‚ HoÃ ng VÄƒn E          â”‚ 480 pts       â”‚                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 5: Cá»”NG PHá»¤ HUYNH (PARENT PORTAL)

## 5.1. Tá»•ng quan Parent Module

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PARENT PORTAL OVERVIEW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  Má»¥c Ä‘Ã­ch:                                                                      â”‚
â”‚  Cung cáº¥p kÃªnh thÃ´ng tin cho phá»¥ huynh theo dÃµi con em táº¡i trung tÃ¢m           â”‚
â”‚                                                                                  â”‚
â”‚  TÃ­nh nÄƒng chÃ­nh (Há»c tá»« BeeClass):                                            â”‚
â”‚  âœ… Tá»± Ä‘Äƒng kÃ½ qua Zalo OTP (khÃ´ng cáº§n admin táº¡o tÃ i khoáº£n)                    â”‚
â”‚  âœ… LiÃªn káº¿t vá»›i con em (1 phá»¥ huynh - nhiá»u há»c viÃªn)                          â”‚
â”‚  âœ… Xem Ä‘iá»ƒm danh, Ä‘iá»ƒm sá»‘, nháº­n xÃ©t cá»§a con                                   â”‚
â”‚  âœ… Xem vÃ  thanh toÃ¡n hÃ³a Ä‘Æ¡n há»c phÃ­                                          â”‚
â”‚  âœ… Nháº­n thÃ´ng bÃ¡o tá»« giÃ¡o viÃªn/trung tÃ¢m                                      â”‚
â”‚  âœ… Xem lá»‹ch há»c vÃ  lá»‹ch thi                                                   â”‚
â”‚                                                                                  â”‚
â”‚  KÃªnh tiáº¿p cáº­n:                                                                 â”‚
â”‚  â€¢ Web Portal: parent.{instance}.kiteclass.com                                  â”‚
â”‚  â€¢ Mobile App: KiteClass Parent (iOS/Android)                                   â”‚
â”‚  â€¢ Zalo Mini App (tÆ°Æ¡ng lai)                                                    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5.2. Parent Registration Flow (Zalo OTP)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PARENT REGISTRATION FLOW (Zalo OTP)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  [1] TRUNG TÃ‚M Táº O LINK ÄÄ‚NG KÃ                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                                  â”‚
â”‚  Admin/Teacher táº¡o link cho há»c viÃªn â†’ Gá»­i link cho phá»¥ huynh                  â”‚
â”‚  Link format: https://acme.kiteclass.com/parent/register?student=ABC123        â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [2] PHá»¤ HUYNH Má» LINK                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚           ÄÄ‚NG KÃ TÃ€I KHOáº¢N PHá»¤ HUYNH                  â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  Trung tÃ¢m: ACME Academy                               â”‚                    â”‚
â”‚  â”‚  Há»c viÃªn: Nguyá»…n VÄƒn An (Lá»›p ToÃ¡n 10A)               â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  Há» tÃªn phá»¥ huynh: _______________________             â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  Sá»‘ Ä‘iá»‡n thoáº¡i Zalo: _______________________           â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  Quan há»‡ vá»›i há»c viÃªn: [ Bá»‘ â–¼ ]                        â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  [ Gá»­i mÃ£ OTP qua Zalo ]                               â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [3] Gá»¬I OTP QUA ZALO                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                                  â”‚
â”‚  Há»‡ thá»‘ng call Zalo OA API â†’ Gá»­i tin nháº¯n OTP                                  â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  ğŸ“± ZALO - ACME Academy                                â”‚                    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  ChÃ o Anh/Chá»‹ Nguyá»…n VÄƒn BÃ¬nh,                         â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  MÃ£ OTP xÃ¡c thá»±c tÃ i khoáº£n phá»¥ huynh cá»§a báº¡n lÃ :       â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚              ğŸ” 123456                                  â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  MÃ£ cÃ³ hiá»‡u lá»±c trong 5 phÃºt.                          â”‚                    â”‚
â”‚  â”‚  Vui lÃ²ng khÃ´ng chia sáº» mÃ£ nÃ y vá»›i ngÆ°á»i khÃ¡c.         â”‚                    â”‚
â”‚  â”‚                                                         â”‚                    â”‚
â”‚  â”‚  ACME Academy                                          â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [4] XÃC THá»°C & Táº O TÃ€I KHOáº¢N                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                                  â”‚
â”‚  Phá»¥ huynh nháº­p OTP â†’ Há»‡ thá»‘ng verify â†’ Táº¡o tÃ i khoáº£n PARENT                   â”‚
â”‚  â†’ Link vá»›i student_id â†’ Redirect to Parent Dashboard                          â”‚
â”‚                                                                                  â”‚
â”‚       â”‚                                                                         â”‚
â”‚       â–¼                                                                         â”‚
â”‚                                                                                  â”‚
â”‚  [5] PARENT DASHBOARD                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    TRANG PHá»¤ HUYNH - ACME Academy                      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  ğŸ‘‹ Xin chÃ o, Anh Nguyá»…n VÄƒn BÃ¬nh                                     â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ‘¦ CON EM Cá»¦A Báº N                                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ“· Avatar  â”‚  Nguyá»…n VÄƒn An                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  Lá»›p: ToÃ¡n 10A - Tháº§y Minh                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  Äiá»ƒm danh thÃ¡ng: 95% âœ…                        â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚            â”‚  [Xem chi tiáº¿t â†’]                               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                                                                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  [+ ThÃªm con em khÃ¡c]                                           â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“… Lá»ŠCH Há»ŒC  â”‚  â”‚ ğŸ“ ÄIá»‚M Sá»  â”‚  â”‚ ğŸ’° Há»ŒC PHÃ  â”‚                â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ 3 buá»•i/tuáº§n  â”‚  â”‚ TB: 8.5      â”‚  â”‚ CÃ²n ná»£: 0Ä‘  â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ [Xem â†’]      â”‚  â”‚ [Xem â†’]      â”‚  â”‚ [Xem â†’]     â”‚                â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ”” THÃ”NG BÃO Má»šI                                              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Nháº¯c Ä‘iá»ƒm danh: NgÃ y mai cÃ³ buá»•i há»c lÃºc 18:00             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Tháº§y Minh: An Ä‘Ã£ hoÃ n thÃ nh tá»‘t bÃ i kiá»ƒm tra tuáº§n nÃ y      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ HÃ³a Ä‘Æ¡n thÃ¡ng 12 Ä‘Ã£ Ä‘Æ°á»£c táº¡o                               â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5.3. Database Schema - Parent

```sql
-- Báº£ng liÃªn káº¿t phá»¥ huynh - há»c viÃªn
CREATE TABLE user_module.parent_students (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    parent_id UUID NOT NULL REFERENCES user_module.users(id),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    relationship VARCHAR(20) NOT NULL,        -- FATHER, MOTHER, GUARDIAN, OTHER
    is_primary BOOLEAN DEFAULT false,         -- Phá»¥ huynh chÃ­nh
    linked_at TIMESTAMP DEFAULT NOW(),
    linked_by UUID REFERENCES user_module.users(id), -- Admin/teacher link hoáº·c tá»± Ä‘Äƒng kÃ½
    status VARCHAR(20) DEFAULT 'ACTIVE',
    UNIQUE(parent_id, student_id)
);

-- ÄÄƒng kÃ½ phá»¥ huynh (pending verification)
CREATE TABLE user_module.parent_registrations (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id UUID NOT NULL REFERENCES user_module.students(id),
    phone_number VARCHAR(15) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    relationship VARCHAR(20) NOT NULL,
    otp_code VARCHAR(6),
    otp_expires_at TIMESTAMP,
    status VARCHAR(20) DEFAULT 'PENDING',     -- PENDING, VERIFIED, EXPIRED
    created_at TIMESTAMP DEFAULT NOW()
);

-- ThÃ´ng bÃ¡o cho phá»¥ huynh
CREATE TABLE user_module.parent_notifications (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    parent_id UUID NOT NULL REFERENCES user_module.users(id),
    student_id UUID REFERENCES user_module.students(id), -- NULL = thÃ´ng bÃ¡o chung
    notification_type VARCHAR(50) NOT NULL,   -- ATTENDANCE, GRADE, INVOICE, GENERAL
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    is_read BOOLEAN DEFAULT false,
    sent_via JSONB,                           -- ["APP", "ZALO", "EMAIL"]
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_parent_students_parent ON user_module.parent_students(parent_id);
CREATE INDEX idx_parent_students_student ON user_module.parent_students(student_id);
CREATE INDEX idx_parent_notifications_parent ON user_module.parent_notifications(parent_id);
```

---

# PHáº¦N 6: AUTHENTICATION & AUTHORIZATION V3

## 6.1. Ma tráº­n phÃ¢n quyá»n cáº­p nháº­t (thÃªm PARENT)

| Permission | CENTER_OWNER | CENTER_ADMIN | TEACHER | STUDENT | PARENT |
|------------|:------------:|:------------:|:-------:|:-------:|:------:|
| **Course** |
| course:create | âœ… | âœ… | âŒ | âŒ | âŒ |
| course:read | âœ… | âœ… | âœ… | âœ… | âœ…* |
| **Class** |
| class:create | âœ… | âœ… | âŒ | âŒ | âŒ |
| class:read | âœ… | âœ… | âœ…* | âœ…* | âœ…* |
| **Attendance** |
| attendance:view | âœ… | âœ… | âœ…* | âœ…* | âœ…* |
| attendance:mark | âœ… | âœ… | âœ…* | âŒ | âŒ |
| **Grade** |
| grade:view | âœ… | âœ… | âœ…* | âœ…* | âœ…* |
| grade:create | âœ… | âœ… | âœ…* | âŒ | âŒ |
| **Billing** |
| billing:manage | âœ… | âœ… | âŒ | âŒ | âŒ |
| billing:view_own | âœ… | âœ… | âŒ | âœ…* | âœ…* |
| billing:pay | âŒ | âŒ | âŒ | âŒ | âœ…* |
| **Gamification** |
| points:view | âœ… | âœ… | âœ…* | âœ…* | âœ…* |
| rewards:exchange | âŒ | âŒ | âŒ | âœ…* | âŒ |
| rewards:manage | âœ… | âœ… | âŒ | âŒ | âŒ |
| **Parent Portal** |
| parent:register | âŒ | âŒ | âŒ | âŒ | âœ… |
| parent:view_child | âŒ | âŒ | âŒ | âŒ | âœ…* |
| parent:receive_notification | âŒ | âŒ | âŒ | âŒ | âœ… |

*\* Chá»‰ trong pháº¡m vi lá»›p/há»c viÃªn Ä‘Æ°á»£c liÃªn káº¿t*

## 6.2. JWT Token Structure V3 (thÃªm parent_of)

```json
{
  "sub": "user-uuid-12345",
  "email": "parent@example.com",
  "name": "Nguyá»…n VÄƒn BÃ¬nh",
  "roles": ["PARENT"],
  "permissions": [
    "attendance:view",
    "grade:view",
    "billing:view_own",
    "billing:pay",
    "parent:view_child"
  ],
  "tenant_id": "center-uuid-789",
  "instance_id": "instance-001",

  // â­ NEW: Danh sÃ¡ch con em (cho PARENT role)
  "parent_of": [
    {
      "student_id": "student-uuid-001",
      "student_name": "Nguyá»…n VÄƒn An",
      "class_ids": ["class-uuid-001", "class-uuid-002"]
    },
    {
      "student_id": "student-uuid-002",
      "student_name": "Nguyá»…n Thá»‹ BÃ¬nh",
      "class_ids": ["class-uuid-003"]
    }
  ],

  "iat": 1703145600,
  "exp": 1703149200,
  "iss": "kiteclass-auth"
}
```

---

# PHáº¦N 6B: FEATURE DETECTION & INSTANCE CONFIGURATION

## 6B.1. Feature Detection API

### Endpoint Specification

**Endpoint:** `GET /api/v1/instance/config`

**Purpose:** Frontend query Ä‘á»ƒ detect available features vÃ  resource limits

**Authentication:** Required (JWT token)

**Response:**

```json
{
  "instanceId": "abc-academy-001",
  "tier": "STANDARD",
  "addOns": ["ENGAGEMENT"],
  "services": ["user-gateway", "core", "engagement", "frontend"],
  "features": {
    // Core features (all tiers)
    "classManagement": true,
    "studentManagement": true,
    "attendance": true,
    "grading": true,
    "billing": true,

    // Engagement Pack features (STANDARD+)
    "gamification": true,
    "parentPortal": true,
    "forum": true,

    // Media Pack features (add-on)
    "videoUpload": false,
    "liveStreaming": false,

    // Premium features
    "aiMarketing": false,
    "prioritySupport": false
  },
  "limits": {
    "maxStudents": 200,
    "maxCourses": null,
    "videoStorageGB": 0,
    "maxConcurrentStreams": 0
  },
  "owner": {
    "id": "owner-uuid-123",
    "name": "Nguyá»…n VÄƒn A",
    "email": "owner@example.com"
  }
}
```

### Caching Strategy

**Client-side caching:**
- Cache in localStorage vá»›i TTL = 1 giá»
- Key: `kiteclass:instance_config`
- Invalidate khi user logout

**Server-side caching:**
- Cache in Redis vá»›i TTL = 5 phÃºt
- Invalidate khi instance config thay Ä‘á»•i (upgrade/downgrade)

**Runtime Updates:**
- âŒ Features KHÃ”NG thay Ä‘á»•i trong runtime
- User muá»‘n nÃ¢ng cáº¥p â†’ Pháº£i vÃ o KiteHub portal
- Sau khi upgrade â†’ User login láº¡i Ä‘á»ƒ load new config

### Feature Detection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FEATURE DETECTION FLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User Login to Instance                                                     â”‚
â”‚         â†“                                                                   â”‚
â”‚  Frontend calls: GET /api/v1/instance/config                               â”‚
â”‚         â†“                                                                   â”‚
â”‚  Backend checks Redis cache                                                 â”‚
â”‚    â”œâ”€ Cache hit â†’ Return cached config                                     â”‚
â”‚    â””â”€ Cache miss â†’ Query DB + Cache result                                 â”‚
â”‚         â†“                                                                   â”‚
â”‚  Frontend receives config                                                   â”‚
â”‚         â†“                                                                   â”‚
â”‚  Store in localStorage (1hr TTL)                                            â”‚
â”‚         â†“                                                                   â”‚
â”‚  Initialize FeatureFlagProvider                                             â”‚
â”‚         â†“                                                                   â”‚
â”‚  Render UI with conditional features                                        â”‚
â”‚    â”œâ”€ Navigation: Hide/show menu items                                     â”‚
â”‚    â”œâ”€ Routes: Enable/disable pages                                         â”‚
â”‚    â””â”€ Components: Show UpgradePrompt for locked features                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6B.2. Instance Configuration Management

### Centralized Management via KiteHub

**Design Principle:** Táº¥t cáº£ thay Ä‘á»•i instance configuration pháº£i qua KiteHub

**LÃ½ do:**
1. **Táº­p trung Billing:** Subscription vÃ  payment quáº£n lÃ½ táº¡i KiteHub
2. **Audit Trail:** Track má»i thay Ä‘á»•i config, billing history
3. **Security:** Instance users khÃ´ng trá»±c tiáº¿p access billing APIs
4. **Conflict Prevention:** NgÄƒn nhiá»u ngÆ°á»i cÃ¹ng lÃºc thay Ä‘á»•i config
5. **Service Provisioning:** KiteHub orchestrate viá»‡c deploy/undeploy services

### Tier Upgrade Flow

**Case 1: CENTER_OWNER muá»‘n nÃ¢ng cáº¥p**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TIER UPGRADE FLOW (OWNER)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [KiteClass Instance]                                                       â”‚
â”‚    Owner click feature bá»‹ lock (e.g., "Gamification")                      â”‚
â”‚         â†“                                                                   â”‚
â”‚    Show "Soft Block" Modal:                                                â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚  ğŸ”’ TÃ­nh nÄƒng Game hÃ³a chá»‰ cÃ³ trÃªn gÃ³i STANDARD      â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  Preview: [Screenshot cá»§a Gamification dashboard]    â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  Benefits:                                           â”‚              â”‚
â”‚      â”‚  âœ“ Báº£ng xáº¿p háº¡ng há»c viÃªn                           â”‚              â”‚
â”‚      â”‚  âœ“ Há»‡ thá»‘ng Ä‘iá»ƒm thÆ°á»Ÿng                             â”‚              â”‚
â”‚      â”‚  âœ“ Badges & Achievements                            â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  GiÃ¡: 1,000,000Ä‘/thÃ¡ng (STANDARD tier)              â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  [NÃ¢ng cáº¥p ngay]    [ÄÃ³ng]                          â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â†“                                                                   â”‚
â”‚    Click "NÃ¢ng cáº¥p ngay"                                                   â”‚
â”‚         â†“                                                                   â”‚
â”‚    Redirect to KiteHub Portal: https://kiteclass.com/portal               â”‚
â”‚                                                                             â”‚
â”‚  [KiteHub Portal]                                                           â”‚
â”‚    Trang: Upgrade Instance "ABC Academy"                                   â”‚
â”‚         â†“                                                                   â”‚
â”‚    Show pricing comparison:                                                â”‚
â”‚      Current: BASIC (500k/thÃ¡ng)                                           â”‚
â”‚      Upgrade to: STANDARD (1tr/thÃ¡ng)                                      â”‚
â”‚      Add-ons: â–¡ Media Pack (+500k)                                         â”‚
â”‚         â†“                                                                   â”‚
â”‚    Owner confirm upgrade                                                    â”‚
â”‚         â†“                                                                   â”‚
â”‚    Payment gateway (VNPay/MoMo)                                            â”‚
â”‚         â†“                                                                   â”‚
â”‚    Payment success                                                          â”‚
â”‚         â†“                                                                   â”‚
â”‚    KiteHub Backend:                                                         â”‚
â”‚      1. Update subscription in DB                                          â”‚
â”‚      2. Trigger service provisioning:                                      â”‚
â”‚         - Deploy Engagement Service                                        â”‚
â”‚         - Update instance config                                           â”‚
â”‚         - Invalidate Redis cache                                           â”‚
â”‚      3. Send notification email                                            â”‚
â”‚         â†“                                                                   â”‚
â”‚    Success message: "NÃ¢ng cáº¥p thÃ nh cÃ´ng!"                                â”‚
â”‚         â†“                                                                   â”‚
â”‚    Redirect back to instance: https://abc-academy.kiteclass.com           â”‚
â”‚                                                                             â”‚
â”‚  [KiteClass Instance]                                                       â”‚
â”‚    Owner login láº¡i (hoáº·c refresh page)                                     â”‚
â”‚         â†“                                                                   â”‚
â”‚    Frontend calls GET /api/v1/instance/config                             â”‚
â”‚         â†“                                                                   â”‚
â”‚    Receive updated config: tier = "STANDARD"                               â”‚
â”‚         â†“                                                                   â”‚
â”‚    UI updates:                                                              â”‚
â”‚      âœ“ "Game hÃ³a" menu visible                                            â”‚
â”‚      âœ“ Gamification pages accessible                                       â”‚
â”‚      âœ“ No more "upgrade prompt" for this feature                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Case 2: Non-Owner Actor (ADMIN/TEACHER/STUDENT) click locked feature**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UPGRADE REQUEST (NON-OWNER)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [KiteClass Instance]                                                       â”‚
â”‚    Teacher/Admin click feature bá»‹ lock                                     â”‚
â”‚         â†“                                                                   â”‚
â”‚    Show "Contact Owner" Modal:                                             â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚  ğŸ”’ TÃ­nh nÄƒng Game hÃ³a chá»‰ cÃ³ trÃªn gÃ³i STANDARD      â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  Preview: [Screenshot]                               â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  Äá»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y, vui lÃ²ng liÃªn há»‡:        â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  ğŸ‘¤ Nguyá»…n VÄƒn A (Center Owner)                      â”‚              â”‚
â”‚      â”‚  ğŸ“§ owner@example.com                                â”‚              â”‚
â”‚      â”‚  ğŸ“± 0123456789                                        â”‚              â”‚
â”‚      â”‚                                                       â”‚              â”‚
â”‚      â”‚  [Gá»­i yÃªu cáº§u qua email]    [ÄÃ³ng]                  â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â†“                                                                   â”‚
â”‚    Click "Gá»­i yÃªu cáº§u qua email"                                           â”‚
â”‚         â†“                                                                   â”‚
â”‚    Backend gá»­i email notification Ä‘áº¿n Owner:                               â”‚
â”‚      Subject: "[ABC Academy] YÃªu cáº§u nÃ¢ng cáº¥p tÃ­nh nÄƒng"                  â”‚
â”‚      Body:                                                                  â”‚
â”‚        "GiÃ¡o viÃªn [Name] muá»‘n sá»­ dá»¥ng tÃ­nh nÄƒng Game hÃ³a.                 â”‚
â”‚         TÃ­nh nÄƒng nÃ y yÃªu cáº§u nÃ¢ng cáº¥p lÃªn gÃ³i STANDARD."                 â”‚
â”‚         â†“                                                                   â”‚
â”‚    Show success: "ÄÃ£ gá»­i yÃªu cáº§u Ä‘áº¿n Center Owner"                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Resource Limit Warnings

**Warning Thresholds:**

| Capacity | Behavior | UI Display |
|----------|----------|------------|
| < 80% | Normal | No warning |
| 80-89% | Warning | âš ï¸ Yellow banner: "Sáº¯p Ä‘áº¡t giá»›i háº¡n há»c viÃªn (160/200)" |
| 90-99% | Alert | ğŸŸ  Orange banner: "Gáº§n Ä‘áº¡t giá»›i háº¡n (180/200). NÃ¢ng cáº¥p Ä‘á»ƒ thÃªm há»c viÃªn." |
| 100% | Block | ğŸ”´ Red banner: "ÄÃ£ Ä‘áº¡t giá»›i háº¡n 200 há»c viÃªn. NÃ¢ng cáº¥p Ä‘á»ƒ tiáº¿p tá»¥c." + Disable "ThÃªm há»c viÃªn" button |

**UI Example:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ Cáº£nh bÃ¡o giá»›i háº¡n há»c viÃªn                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Báº¡n Ä‘ang cÃ³ 185/200 há»c viÃªn (93%)                                        â”‚
â”‚                                                                             â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 93%                                              â”‚
â”‚                                                                             â”‚
â”‚  Báº¡n sáº¯p Ä‘áº¡t giá»›i háº¡n gÃ³i STANDARD. NÃ¢ng cáº¥p lÃªn PREMIUM Ä‘á»ƒ:              â”‚
â”‚  âœ“ KhÃ´ng giá»›i háº¡n sá»‘ há»c viÃªn                                             â”‚
â”‚  âœ“ AI Marketing Agent                                                      â”‚
â”‚  âœ“ Priority Support                                                        â”‚
â”‚                                                                             â”‚
â”‚  [NÃ¢ng cáº¥p ngay]    [Nháº¯c tÃ´i sau]                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**At 100% Limit:**

```tsx
// Student Management Page
<div className="p-4">
  <Alert variant="destructive">
    <AlertTitle>ÄÃ£ Ä‘áº¡t giá»›i háº¡n há»c viÃªn</AlertTitle>
    <AlertDescription>
      Báº¡n Ä‘Ã£ Ä‘áº¡t giá»›i háº¡n 200 há»c viÃªn cá»§a gÃ³i STANDARD.
      Vui lÃ²ng nÃ¢ng cáº¥p lÃªn gÃ³i PREMIUM Ä‘á»ƒ thÃªm há»c viÃªn má»›i.
    </AlertDescription>
  </Alert>

  <Button
    disabled={isAtLimit}
    onClick={handleAddStudent}
  >
    <Plus className="mr-2" />
    ThÃªm há»c viÃªn
  </Button>
</div>
```

## 6B.3. Feature Lock UI Patterns

### Soft Block Modal (Best Practice)

**Trigger:** User click vÃ o feature bá»‹ lock

**Modal Structure:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”’ [Feature Name] chá»‰ cÃ³ trÃªn gÃ³i [Required Tier]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“¸ Preview Screenshot                                        â”‚
â”‚  [Preview image cá»§a feature - 600x400px]                     â”‚
â”‚                                                               â”‚
â”‚  âœ¨ Benefits:                                                 â”‚
â”‚  â€¢ Benefit 1                                                  â”‚
â”‚  â€¢ Benefit 2                                                  â”‚
â”‚  â€¢ Benefit 3                                                  â”‚
â”‚                                                               â”‚
â”‚  ğŸ’° Pricing Info:                                             â”‚
â”‚  GÃ³i [Required Tier]: [Price]/thÃ¡ng                          â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  If OWNER:                                      â”‚          â”‚
â”‚  â”‚  [NÃ¢ng cáº¥p ngay] [Xem chi tiáº¿t] [ÄÃ³ng]        â”‚          â”‚
â”‚  â”‚                                                 â”‚          â”‚
â”‚  â”‚  If NOT OWNER:                                  â”‚          â”‚
â”‚  â”‚  [LiÃªn há»‡ Owner] [ÄÃ³ng]                        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**

```tsx
// src/components/upgrade/FeatureLockModal.tsx
interface FeatureLockModalProps {
  feature: {
    name: string;
    requiredTier: 'STANDARD' | 'PREMIUM';
    previewImage: string;
    benefits: string[];
    price: string;
  };
  currentUser: {
    role: UserRole;
    isOwner: boolean;
  };
  instanceOwner: {
    name: string;
    email: string;
  };
  onClose: () => void;
}

export function FeatureLockModal({
  feature,
  currentUser,
  instanceOwner,
  onClose
}: FeatureLockModalProps) {
  const handleUpgrade = () => {
    // Redirect to KiteHub portal
    const upgradeUrl = `https://kiteclass.com/portal/upgrade?instance=${instanceId}&tier=${feature.requiredTier}`;
    window.location.href = upgradeUrl;
  };

  const handleContactOwner = () => {
    // Send email notification to owner
    sendUpgradeRequest(feature.name, instanceOwner.email);
    toast.success('ÄÃ£ gá»­i yÃªu cáº§u Ä‘áº¿n Center Owner');
    onClose();
  };

  return (
    <Dialog open onOpenChange={onClose}>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle className="flex items-center gap-2">
            <Lock className="h-5 w-5" />
            {feature.name} chá»‰ cÃ³ trÃªn gÃ³i {feature.requiredTier}
          </DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          {/* Preview Image */}
          <img
            src={feature.previewImage}
            alt={feature.name}
            className="w-full rounded-lg border"
          />

          {/* Benefits */}
          <div>
            <h3 className="font-semibold mb-2">âœ¨ Lá»£i Ã­ch:</h3>
            <ul className="list-disc list-inside space-y-1">
              {feature.benefits.map((benefit, i) => (
                <li key={i}>{benefit}</li>
              ))}
            </ul>
          </div>

          {/* Pricing */}
          <div className="bg-muted p-4 rounded-lg">
            <p className="font-semibold">
              ğŸ’° GÃ³i {feature.requiredTier}: {feature.price}/thÃ¡ng
            </p>
          </div>

          {/* Actions */}
          <DialogFooter>
            {currentUser.isOwner ? (
              <>
                <Button onClick={handleUpgrade}>
                  NÃ¢ng cáº¥p ngay
                </Button>
                <Button variant="outline" onClick={onClose}>
                  ÄÃ³ng
                </Button>
              </>
            ) : (
              <>
                <Button onClick={handleContactOwner}>
                  LiÃªn há»‡ {instanceOwner.name}
                </Button>
                <Button variant="outline" onClick={onClose}>
                  ÄÃ³ng
                </Button>
              </>
            )}
          </DialogFooter>
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

---

# PHáº¦N 6C: AI BRANDING & UI CUSTOMIZATION

## 6C.1. UI Customization by Tier

### Customization Capabilities

**ALL TIERS cÃ³ quyá»n customize:**

| Feature | BASIC | STANDARD | PREMIUM | Notes |
|---------|-------|----------|---------|-------|
| **Custom Logo** | âœ… | âœ… | âœ… | All tiers upload logo riÃªng |
| **Custom Colors** | âœ… | âœ… | âœ… | Primary, secondary colors |
| **AI Branding** | âœ… | âœ… | âœ… | Auto-generate marketing assets |
| **Theme Templates** | âœ… | âœ… | âœ… | Classic, Modern, Friendly, etc. |
| **Dark Mode** | âœ… | âœ… | âœ… | User preference |
| **Watermark** | âš ï¸ | âš ï¸ | âš ï¸ | "Powered by KiteClass" trÃªn táº¥t cáº£ tier |
| **Custom Domain** | âŒ | âŒ | âœ… | Chá»‰ PREMIUM: custom-domain.com |
| **Remove Watermark** | âŒ | âŒ | âŒ | KhÃ´ng tier nÃ o remove Ä‘Æ°á»£c |

### Watermark Implementation

**Watermark hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢u:**

```tsx
// Footer cá»§a má»i page
<footer className="border-t py-4 text-center text-sm text-muted-foreground">
  <p>
    Â© {new Date().getFullYear()} {instanceName}.
    Powered by <a href="https://kiteclass.com" target="_blank" className="underline">KiteClass</a>
  </p>
</footer>
```

**LÃ½ do watermark trÃªn táº¥t cáº£ tier:**
1. Brand awareness cho KiteClass
2. SEO backlinks
3. Trust signal (powered by established platform)
4. Future: CÃ³ thá»ƒ offer "Remove watermark" as add-on

### Analytics & Reporting

**Táº¥t cáº£ tier cÃ³ FULL analytics features:**

| Feature | BASIC | STANDARD | PREMIUM |
|---------|-------|----------|---------|
| Dashboard Overview | âœ… | âœ… | âœ… |
| Student Analytics | âœ… | âœ… | âœ… |
| Attendance Reports | âœ… | âœ… | âœ… |
| Revenue Reports | âœ… | âœ… | âœ… |
| Export to Excel | âœ… | âœ… | âœ… |
| Custom Reports | âœ… | âœ… | âœ… |
| API Access | âœ… | âœ… | âœ… |

**KhÃ¡c biá»‡t giá»¯a cÃ¡c tier:**
- **Data Retention:** KhÃ´ng khÃ¡c (táº¥t cáº£ unlimited)
- **Service Scale:** PREMIUM cÃ³ more compute resources cho heavy analytics
- **Support:** PREMIUM cÃ³ priority support cho analytics questions

**Philosophy:** "Cung cáº¥p Ä‘á»§ features cho ngÆ°á»i giÃ u"
- NgÆ°á»i giÃ u (PREMIUM) tráº£ cho scale, performance, support
- KHÃ”NG tráº£ cho features (features Ä‘á»u cÃ³ Ä‘áº§y Ä‘á»§)

## 6C.2. Custom Domain Implementation (PREMIUM Only)

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CUSTOM DOMAIN ROUTING                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Customer buys custom domain: abc-academy.com                               â”‚
â”‚         â†“                                                                   â”‚
â”‚  Customer adds CNAME record:                                                â”‚
â”‚    abc-academy.com â†’ instances.kiteclass.com                                â”‚
â”‚         â†“                                                                   â”‚
â”‚  Customer submits domain in KiteHub Portal                                  â”‚
â”‚         â†“                                                                   â”‚
â”‚  KiteHub Backend:                                                           â”‚
â”‚    1. Verify DNS CNAME record                                               â”‚
â”‚    2. Provision SSL certificate (Let's Encrypt)                             â”‚
â”‚    3. Update domain_mappings table                                          â”‚
â”‚    4. Configure Nginx reverse proxy                                         â”‚
â”‚         â†“                                                                   â”‚
â”‚  User visits abc-academy.com                                                â”‚
â”‚         â†“                                                                   â”‚
â”‚  DNS resolves to instances.kiteclass.com (KiteClass server)                â”‚
â”‚         â†“                                                                   â”‚
â”‚  Nginx reads Host header: abc-academy.com                                   â”‚
â”‚         â†“                                                                   â”‚
â”‚  Nginx looks up domain_mappings:                                            â”‚
â”‚    abc-academy.com â†’ instanceId: abc-academy-001                            â”‚
â”‚         â†“                                                                   â”‚
â”‚  Nginx proxies request to instance container                                â”‚
â”‚         â†“                                                                   â”‚
â”‚  Instance serves content with custom domain                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Schema

```sql
CREATE TABLE domain_mappings (
    id BIGSERIAL PRIMARY KEY,
    instance_id VARCHAR(255) NOT NULL,
    custom_domain VARCHAR(255) NOT NULL UNIQUE,
    default_domain VARCHAR(255) NOT NULL, -- abc-academy.kiteclass.com
    ssl_certificate_path VARCHAR(500),
    ssl_status VARCHAR(50), -- 'pending', 'active', 'failed', 'expired'
    verified_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT fk_instance
        FOREIGN KEY (instance_id)
        REFERENCES instances(id)
        ON DELETE CASCADE
);

CREATE INDEX idx_custom_domain ON domain_mappings(custom_domain);
CREATE INDEX idx_instance_id ON domain_mappings(instance_id);
```

### SSL Certificate Provisioning

**Auto-provision vá»›i Certbot (Let's Encrypt):**

```bash
# KiteHub Backend tá»± Ä‘á»™ng cháº¡y khi customer submit domain
certbot certonly \
  --webroot \
  -w /var/www/certbot \
  -d abc-academy.com \
  --email admin@kiteclass.com \
  --agree-tos \
  --non-interactive
```

**Certificate Renewal:**
- Cronjob cháº¡y daily: `certbot renew`
- Auto-reload Nginx khi certificate renewed
- Email alert náº¿u renewal fails

### Nginx Configuration Template

```nginx
# /etc/nginx/sites-available/custom-domain-abc-academy.com
server {
    listen 80;
    listen [::]:80;
    server_name abc-academy.com www.abc-academy.com;

    # Redirect to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name abc-academy.com www.abc-academy.com;

    # SSL Certificate
    ssl_certificate /etc/letsencrypt/live/abc-academy.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/abc-academy.com/privkey.pem;

    # SSL Configuration (Mozilla Intermediate)
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:...';
    ssl_prefer_server_ciphers off;

    # Proxy to instance container
    location / {
        proxy_pass http://instance-abc-academy-001:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### Customer Setup Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUSTOM DOMAIN SETUP (CUSTOMER VIEW)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  [KiteHub Portal - Settings]                                                â”‚
â”‚                                                                             â”‚
â”‚  Current Domain: abc-academy.kiteclass.com                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ğŸŒ Custom Domain (PREMIUM Feature)                      â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Hiá»‡n táº¡i: abc-academy.kiteclass.com                     â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Báº¡n muá»‘n sá»­ dá»¥ng domain riÃªng?                          â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  [Input: abc-academy.com]                                â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  HÆ°á»›ng dáº«n:                                              â”‚              â”‚
â”‚  â”‚  1. Mua domain táº¡i: GoDaddy, Namecheap, etc.            â”‚              â”‚
â”‚  â”‚  2. VÃ o DNS settings, thÃªm CNAME record:                â”‚              â”‚
â”‚  â”‚     Name: @ (hoáº·c www)                                   â”‚              â”‚
â”‚  â”‚     Value: instances.kiteclass.com                       â”‚              â”‚
â”‚  â”‚  3. Chá» DNS propagate (15-60 phÃºt)                      â”‚              â”‚
â”‚  â”‚  4. Click "XÃ¡c minh" bÃªn dÆ°á»›i                           â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  [XÃ¡c minh Domain]                                       â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Status: â³ Äang xÃ¡c minh DNS...                         â”‚              â”‚
â”‚  â”‚          (Kiá»ƒm tra láº¡i sau 5 phÃºt)                       â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â”‚  Sau khi xÃ¡c minh thÃ nh cÃ´ng:                                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Status: âœ… Active                                        â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Domain: abc-academy.com                                 â”‚              â”‚
â”‚  â”‚  SSL Certificate: âœ… Valid (expires in 89 days)          â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Truy cáº­p instance táº¡i:                                  â”‚              â”‚
â”‚  â”‚  ğŸ”— https://abc-academy.com                              â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  [Remove Domain]                                         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementation Complexity

**Effort Estimate:** 2-3 tuáº§n

**Components cáº§n implement:**
1. **Backend API** (1 tuáº§n):
   - POST /api/v1/instance/custom-domain (submit domain)
   - GET /api/v1/instance/custom-domain/verify (check DNS)
   - DELETE /api/v1/instance/custom-domain (remove)
   - Certbot integration
   - Nginx config generation

2. **Frontend UI** (3 ngÃ y):
   - Custom domain settings page
   - DNS setup instructions
   - Verification status
   - Error handling

3. **Infrastructure** (1 tuáº§n):
   - Nginx dynamic config reload
   - SSL certificate automation
   - DNS verification logic
   - Database schema

**Risks:**
- DNS propagation delays (customer confusion)
- SSL certificate failures (rate limits, validation issues)
- Nginx reload disruption

**Mitigation:**
- Clear instructions + expected timeframes
- Retry logic for SSL provisioning
- Graceful Nginx reload (zero-downtime)

## 6C.3. AI Branding System

### Overview

**AI Branding tá»± Ä‘á»™ng generate 10+ marketing assets tá»« 1 áº£nh upload.**

**Input:** Logo hoáº·c áº£nh Ä‘áº¡i diá»‡n (PNG/JPG, max 10MB)
**Output:** Complete branding package trong ~5 phÃºt
**Cost:** ~$0.10 per generation (cost-effective)

### Asset Storage Architecture

**2-Tier Storage Strategy:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ASSET STORAGE HIERARCHY                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Tier 1: KiteHub Level (Draft Assets)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Path: /kitehub/users/{userId}/branding-drafts/         â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Purpose:                                                 â”‚              â”‚
â”‚  â”‚  - User experiment vá»›i branding options                  â”‚              â”‚
â”‚  â”‚  - Generate multiple versions                            â”‚              â”‚
â”‚  â”‚  - Preview before publish                                â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Retention: 30 days                                       â”‚              â”‚
â”‚  â”‚  Quota: 10 draft sets per user                           â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Example:                                                 â”‚              â”‚
â”‚  â”‚  /users/user-123/branding-drafts/                        â”‚              â”‚
â”‚  â”‚    â”œâ”€â”€ draft-001-20260129/                               â”‚              â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ hero-banner.webp                              â”‚              â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ logo-primary.png                              â”‚              â”‚
â”‚  â”‚    â”‚   â””â”€â”€ metadata.json                                 â”‚              â”‚
â”‚  â”‚    â”œâ”€â”€ draft-002-20260130/                               â”‚              â”‚
â”‚  â”‚    â””â”€â”€ draft-003-20260131/                               â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Benefits:                                                â”‚              â”‚
â”‚  â”‚  âœ“ Can re-use drafts across multiple instances          â”‚              â”‚
â”‚  â”‚  âœ“ Can A/B test different branding options              â”‚              â”‚
â”‚  â”‚  âœ“ Draft khÃ´ng affect production                        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                          â†“                                                  â”‚
â”‚                    User clicks "Publish"                                    â”‚
â”‚                          â†“                                                  â”‚
â”‚  Tier 2: Instance Level (Published Assets)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Path: /instances/{instanceId}/branding/                â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Purpose:                                                 â”‚              â”‚
â”‚  â”‚  - Active branding cho instance                          â”‚              â”‚
â”‚  â”‚  - Served via CDN                                        â”‚              â”‚
â”‚  â”‚  - High availability                                      â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Retention: Until replaced                                â”‚              â”‚
â”‚  â”‚  Versioning: Keep last 3 versions                        â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  Example:                                                 â”‚              â”‚
â”‚  â”‚  /instances/abc-academy-001/branding/                    â”‚              â”‚
â”‚  â”‚    â”œâ”€â”€ current/                                          â”‚              â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ hero-banner.webp                              â”‚              â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ logo-primary.png                              â”‚              â”‚
â”‚  â”‚    â”‚   â””â”€â”€ metadata.json                                 â”‚              â”‚
â”‚  â”‚    â”œâ”€â”€ version-2/  (previous)                            â”‚              â”‚
â”‚  â”‚    â””â”€â”€ version-1/  (original)                            â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â”‚  CDN:                                                     â”‚              â”‚
â”‚  â”‚  - CloudFlare R2 + CDN                                   â”‚              â”‚
â”‚  â”‚  - Edge caching (reduce latency)                         â”‚              â”‚
â”‚  â”‚  - Auto WebP conversion                                  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Who Can Upload Branding?

**Best Practice: CENTER_OWNER vÃ  CENTER_ADMIN**

| Actor | Draft Upload | Publish | Delete |
|-------|--------------|---------|--------|
| **CENTER_OWNER** | âœ… | âœ… | âœ… |
| **CENTER_ADMIN** | âœ… | âš ï¸ Need OWNER approval | âŒ |
| **TEACHER** | âŒ | âŒ | âŒ |
| **STUDENT** | âŒ | âŒ | âŒ |

**Workflow:**

```
CENTER_ADMIN uploads logo
  â†“
Generate branding (draft)
  â†“
ADMIN previews & saves draft
  â†“
ADMIN clicks "Request Approval"
  â†“
Email notification to OWNER
  â†“
OWNER reviews in KiteHub Portal
  â†“
OWNER clicks "Approve & Publish"
  â†“
Branding goes live on instance
```

### Re-generation Policy

**User cÃ³ 2 options:**

**Option 1: AI Auto-Generate (Recommended)**
- Upload logo/photo
- AI generate full branding package
- Free: Unlimited generations (cost absorbed by platform)
- Rationale: Encourage adoption, showcase AI capability

**Option 2: Manual Upload (Advanced)**
- User upload each asset manually:
  - Hero banner (1920x600)
  - Logo variants (3 sizes)
  - Section banners (3 items)
  - Marketing copy (text fields)
- Use case: User cÃ³ designer riÃªng, muá»‘n full control
- Requirement: Must follow asset specs (size, format)

**Hybrid Approach:**
- Start with AI generation
- User can override individual assets
  - Example: AI generates hero banner, user uploads custom logo
- Best of both worlds

### Manual Override Capabilities

**User cÃ³ thá»ƒ edit:**

| Asset Type | AI Generated | Manual Override | Notes |
|------------|--------------|-----------------|-------|
| **Hero Banner** | âœ… | âœ… | Upload custom 1920x600 image |
| **Logo** | âœ… | âœ… | Upload PNG with transparent background |
| **Colors** | âœ… (extracted) | âœ… | Pick custom primary/secondary |
| **Marketing Copy** | âœ… | âœ… | Edit headlines, CTAs in text editor |
| **Section Banners** | âœ… | âœ… | Upload custom or use AI |

**UI Example:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BRANDING EDITOR                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Hero Banner                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  [Preview: AI-generated gradient background]             â”‚              â”‚
â”‚  â”‚                                                           â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  Source: ğŸ¤– AI Generated                                                    â”‚
â”‚  [Replace with Custom Image] [Re-generate]                                 â”‚
â”‚                                                                             â”‚
â”‚  Marketing Headline                                                         â”‚
â”‚  [Input: "Há»c viá»‡n ABC - NÆ¡i Æ°Æ¡m máº§m tÃ i nÄƒng"]                           â”‚
â”‚  Source: ğŸ¤– AI Generated (editable)                                        â”‚
â”‚                                                                             â”‚
â”‚  Primary Color                                                              â”‚
â”‚  [Color Picker: #0ea5e9]                                                   â”‚
â”‚  Source: ğŸ¨ Extracted from logo (editable)                                 â”‚
â”‚                                                                             â”‚
â”‚  [Save Draft]  [Preview]  [Publish]                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI Generation Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI BRANDING GENERATION PIPELINE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Step 1: Upload (0:00-0:10)                                                â”‚
â”‚    User uploads logo/photo                                                  â”‚
â”‚    Backend validates: format, size, dimensions                              â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 2: Background Removal (0:10-0:20)                                    â”‚
â”‚    Service: U2-Net (self-hosted)                                           â”‚
â”‚    Output: Cutout image (transparent background)                            â”‚
â”‚    Cost: Free                                                               â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 3: Color Extraction (0:20-0:30)                                      â”‚
â”‚    Extract dominant colors from logo                                        â”‚
â”‚    Generate color palette (primary, secondary, accent)                      â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 4: Text Generation (0:30-0:45)                                       â”‚
â”‚    Service: GPT-4o-mini                                                     â”‚
â”‚    Input: Organization name, industry                                       â”‚
â”‚    Output: Headlines, sub-headlines, CTAs, value props                      â”‚
â”‚    Language: Customer selects (Vietnamese, English, etc.)                   â”‚
â”‚    Cost: ~$0.002                                                            â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 5: Hero Banner Generation (0:45-2:00)                                â”‚
â”‚    Service: Stable Diffusion XL                                             â”‚
â”‚    Prompt: "Professional gradient background, [colors], modern, clean"      â”‚
â”‚    Output: 1920x600 background image                                        â”‚
â”‚    Composite: Background + cutout logo + text overlay                       â”‚
â”‚    Cost: ~$0.08                                                             â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 6: Section Banners (2:00-4:30)                                       â”‚
â”‚    Generate 3 banners: About, Courses, Contact                              â”‚
â”‚    Each with different AI background                                        â”‚
â”‚    Cost: ~$0.08 Ã— 3 = $0.24                                                â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 7: Logo Variants (4:30-4:45)                                         â”‚
â”‚    Create 3 variants:                                                       â”‚
â”‚      - Primary: Cutout + circular bg + org name                            â”‚
â”‚      - Secondary: Alternate color scheme                                    â”‚
â”‚      - Icon-only: Square crop                                               â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 8: OG Image (4:45-5:00)                                              â”‚
â”‚    Generate 1200x630 for social sharing                                     â”‚
â”‚    Contains: Logo + tagline + domain                                        â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 9: Upload to CDN (5:00-5:30)                                         â”‚
â”‚    Upload all assets to CloudFlare R2                                       â”‚
â”‚    Generate CDN URLs                                                        â”‚
â”‚    Save metadata to database                                                â”‚
â”‚         â†“                                                                   â”‚
â”‚  Step 10: Complete (5:30)                                                   â”‚
â”‚    Return branding package to frontend                                      â”‚
â”‚    Total Cost: ~$0.10 per generation                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Asset Quality Settings (Best Practice)

**WebP with JPEG Fallback:**

```typescript
// Asset specifications
const ASSET_SPECS = {
  heroBanner: {
    dimensions: { width: 1920, height: 600 },
    formats: {
      webp: { quality: 85, size: '200-300KB' },
      jpeg: { quality: 85, size: '300-400KB' }
    }
  },
  profileImages: {
    dimensions: { width: 400, height: 400 },
    formats: {
      webp: { quality: 90, size: '50-80KB' },
      jpeg: { quality: 90, size: '80-120KB' }
    }
  },
  sectionBanners: {
    dimensions: { width: 1200, height: 400 },
    formats: {
      webp: { quality: 85, size: '150-200KB' },
      jpeg: { quality: 85, size: '200-300KB' }
    }
  }
};
```

### AI Provider Selection (Best Practice)

**Image Generation: Stable Diffusion XL**
- Rationale: Best balance of cost, quality, control
- Cost: ~$0.08 per image
- Quality: Excellent for marketing backgrounds
- Customization: Full prompt control
- Fallback: DALL-E 3 if Stability AI unavailable

**Background Removal: U2-Net (Self-Hosted)**
- Rationale: Free, good quality, fast
- Cost: $0 (infrastructure only)
- Quality: 95% accuracy for clean logos
- Speed: 2-3 seconds per image
- Fallback: Remove.bg API ($0.09/image) for complex images

**Text Generation: GPT-4o-mini**
- Rationale: Excellent quality, very cheap, fast
- Cost: ~$0.002 per generation
- Quality: Professional marketing copy
- Languages: Native multi-language support
- Speed: < 2 seconds

### Multi-Language Support

**Customer chá»n ngÃ´n ngá»¯ khi generate:**

```typescript
// Language options
type SupportedLanguage = 'vi' | 'en' | 'zh' | 'ja' | 'ko';

interface BrandingGenerationRequest {
  organizationName: string;
  industry: string;
  language: SupportedLanguage; // Customer selects
  logoFile: File;
}
```

**Implementation:**
- GPT-4o-mini native multi-language
- Prompt includes language instruction
- Marketing copy generated in selected language
- Can regenerate in different language later

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Branding                                          â”‚
â”‚                                                             â”‚
â”‚  Organization Name: [ABC Academy]                          â”‚
â”‚  Industry: [Education]                                     â”‚
â”‚  Language: [ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t â–¼]                              â”‚
â”‚            - ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t                                â”‚
â”‚            - ğŸ‡ºğŸ‡¸ English                                    â”‚
â”‚            - ğŸ‡¨ğŸ‡³ ä¸­æ–‡                                        â”‚
â”‚            - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª                                      â”‚
â”‚            - ğŸ‡°ğŸ‡· í•œêµ­ì–´                                      â”‚
â”‚                                                             â”‚
â”‚  Upload Logo: [Browse...]                                  â”‚
â”‚                                                             â”‚
â”‚  [Generate Branding]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 6D: PREVIEW WEBSITE - TRANG WEB MARKETING CÃ”NG KHAI

## 6D.1. Tá»•ng Quan Preview Website

### Äá»‹nh NghÄ©a

**Preview Website** lÃ  trang web marketing cÃ´ng khai cho má»—i KiteClass instance, tá»± Ä‘á»™ng táº¡o tá»« AI branding assets vÃ  dá»¯ liá»‡u instance, giÃºp trung tÃ¢m thu hÃºt há»c viÃªn tiá»m nÄƒng thÃ´ng qua SEO vÃ  marketing trá»±c tuyáº¿n.

### Má»¥c ÄÃ­ch

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUSINESS GOALS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Thu HÃºt Há»c ViÃªn      â†’ +30-50% tuyá»ƒn sinh         â”‚
â”‚  2. SEO Organic Traffic   â†’ Giáº£m CAC                   â”‚
â”‚  3. Professional Image    â†’ TÄƒng uy tÃ­n                â”‚
â”‚  4. Zero Effort Setup     â†’ Tá»± Ä‘á»™ng táº¡o                â”‚
â”‚  5. Competitive Advantage â†’ KhÃ¡c biá»‡t vs LMS khÃ¡c       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### URL Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PUBLIC ROUTES (No Authentication)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  https://abc-academy.kiteclass.com/                     â”‚
â”‚    â†’ Landing page (Hero, About, Courses, Contact)      â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/courses              â”‚
â”‚    â†’ Course catalog (grid view vá»›i filters)            â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/courses/101          â”‚
â”‚    â†’ Course details (syllabus, instructor, pricing)     â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/about                â”‚
â”‚    â†’ Vá» trung tÃ¢m                                       â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/contact              â”‚
â”‚    â†’ Form liÃªn há»‡                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           PROTECTED ROUTES (Authentication)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  https://abc-academy.kiteclass.com/login                â”‚
â”‚    â†’ Student login/register                             â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/enroll/101           â”‚
â”‚    â†’ Enrollment form (requires auth)                    â”‚
â”‚                                                         â”‚
â”‚  https://abc-academy.kiteclass.com/dashboard            â”‚
â”‚    â†’ Student dashboard (requires auth)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              CUSTOM DOMAIN (PREMIUM Tier)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  https://abc-academy.com/                               â”‚
â”‚    â†’ Custom domain cho PREMIUM tier                     â”‚
â”‚    â†’ DNS CNAME â†’ proxy.kiteclass.com                    â”‚
â”‚    â†’ SSL auto-provision (Let's Encrypt)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6D.2. Content Architecture

### Content Source Mapping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CONTENT SOURCES                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Content Type       â”‚  Source           â”‚  Public?      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Hero Banner        â”‚  AI Branding      â”‚  âœ… Public    â”‚
â”‚  Logo & Colors      â”‚  AI Branding      â”‚  âœ… Public    â”‚
â”‚  Headlines/CTAs     â”‚  AI Branding      â”‚  âœ… Public    â”‚
â”‚  Center Name/Desc   â”‚  Instance Data    â”‚  âœ… Public    â”‚
â”‚  Course Titles      â”‚  Course API       â”‚  âœ… Public    â”‚
â”‚  Course Pricing     â”‚  Course API       â”‚  âœ… Public    â”‚
â”‚  Teacher Bios       â”‚  Teacher API      â”‚  âœ… Public    â”‚
â”‚  Lesson Content     â”‚  Course API       â”‚  âŒ Private   â”‚
â”‚  Student Data       â”‚  Student API      â”‚  âŒ Private   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Landing Page Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LANDING PAGE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  HERO SECTION                                     â”‚  â”‚
â”‚  â”‚  - AI-generated hero banner (1920x600)           â”‚  â”‚
â”‚  â”‚  - AI-generated headline                         â”‚  â”‚
â”‚  â”‚  - AI-generated subheadline                      â”‚  â”‚
â”‚  â”‚  - CTA button: "Xem KhÃ³a Há»c"                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ABOUT SECTION                                    â”‚  â”‚
â”‚  â”‚  - Center logo (AI-generated)                    â”‚  â”‚
â”‚  â”‚  - Center description (admin input)              â”‚  â”‚
â”‚  â”‚  - Contact info (phone, email, address)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  COURSE CATALOG SECTION                           â”‚  â”‚
â”‚  â”‚  - Course grid (4 featured courses)              â”‚  â”‚
â”‚  â”‚  - Course cards:                                  â”‚  â”‚
â”‚  â”‚    â€¢ Thumbnail image                              â”‚  â”‚
â”‚  â”‚    â€¢ Title, description (truncated)               â”‚  â”‚
â”‚  â”‚    â€¢ Price, duration, enrolled count              â”‚  â”‚
â”‚  â”‚    â€¢ "Xem Chi Tiáº¿t" button                        â”‚  â”‚
â”‚  â”‚  - "Xem Táº¥t Cáº£ KhÃ³a Há»c" link                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  INSTRUCTORS SECTION                              â”‚  â”‚
â”‚  â”‚  - Teacher grid (top 3 teachers)                 â”‚  â”‚
â”‚  â”‚  - Photo, name, bio, expertise                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CTA SECTION                                      â”‚  â”‚
â”‚  â”‚  - "Sáºµn sÃ ng báº¯t Ä‘áº§u?"                           â”‚  â”‚
â”‚  â”‚  - "ÄÄƒng KÃ½ Ngay" button â†’ /courses               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FOOTER                                           â”‚  â”‚
â”‚  â”‚  - Links: Vá» chÃºng tÃ´i, KhÃ³a há»c, LiÃªn há»‡        â”‚  â”‚
â”‚  â”‚  - Social media icons                             â”‚  â”‚
â”‚  â”‚  - "Powered by KiteClass" watermark               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6D.3. Technical Stack

### Frontend Architecture

```typescript
// Next.js 14+ App Router Structure
app/
â”œâ”€â”€ (public)/                // Public route group (no auth)
â”‚   â”œâ”€â”€ layout.tsx          // Public layout (no AuthProvider)
â”‚   â”œâ”€â”€ page.tsx            // Landing page (SSR + ISR)
â”‚   â”œâ”€â”€ courses/
â”‚   â”‚   â”œâ”€â”€ page.tsx        // Course catalog
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx    // Course details
â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â””â”€â”€ page.tsx        // About page
â”‚   â””â”€â”€ contact/
â”‚       â””â”€â”€ page.tsx        // Contact form
â”‚
â”œâ”€â”€ (auth)/                  // Authenticated routes
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ enroll/[id]/
â”‚   â””â”€â”€ settings/
â”‚
â””â”€â”€ api/
    â”œâ”€â”€ public/              // Public APIs (no auth)
    â”‚   â”œâ”€â”€ instance/
    â”‚   â”œâ”€â”€ courses/
    â”‚   â””â”€â”€ contact/
    â””â”€â”€ v1/                  // Authenticated APIs
```

### Backend Public APIs

```java
// Public Instance Controller
@RestController
@RequestMapping("/api/v1/public")
public class PublicInstanceController {

    // Get instance config & branding
    @GetMapping("/instance/{instanceId}/config")
    public ResponseEntity<InstanceConfig> getInstanceConfig(
        @PathVariable String instanceId
    ) {
        // Return: name, description, logo, branding assets
        // No authentication required
    }

    // Get public course catalog
    @GetMapping("/instance/{instanceId}/courses")
    @RateLimit(value = 100, period = "1m") // 100 req/min per IP
    public ResponseEntity<List<PublicCourseDTO>> getPublicCourses(
        @PathVariable String instanceId,
        @RequestParam(required = false) String category,
        @RequestParam(required = false) String level
    ) {
        // Filter: Only PUBLISHED courses
        // Exclude: Lesson content, student lists, private data
    }

    // Get course details
    @GetMapping("/courses/{courseId}")
    public ResponseEntity<PublicCourseDetailDTO> getCourseDetails(
        @PathVariable String courseId
    ) {
        // Return: Full course info except lesson content
    }

    // Get instructor profiles
    @GetMapping("/instance/{instanceId}/instructors")
    public ResponseEntity<List<PublicInstructorDTO>> getInstructors(
        @PathVariable String instanceId
    ) {
        // Return: Name, bio, photo, courses taught
    }

    // Contact form submission
    @PostMapping("/contact")
    @ReCaptchaValidation
    public ResponseEntity<Void> submitContactForm(
        @RequestBody ContactFormDTO form
    ) {
        // Send email to CENTER_OWNER
        // Spam protection via reCAPTCHA
    }
}
```

### Data Transfer Objects

```java
// PublicCourseDTO.java - Filter private fields
public class PublicCourseDTO {
    private String id;
    private String title;
    private String description;
    private String thumbnail;
    private BigDecimal price;
    private Integer duration; // weeks
    private String schedule;
    private LocalDate startDate;
    private LocalDate endDate;

    private PublicInstructorDTO instructor;
    private Integer enrolledCount;
    private String level; // beginner, intermediate, advanced
    private String category;
    private List<String> tags;

    // âŒ NOT INCLUDED (private):
    // - List<Lesson> lessons
    // - List<Student> students
    // - List<Grade> grades
    // - Assessment data
}
```

## 6D.4. SEO Optimization

### Metadata Configuration

```typescript
// app/(public)/page.tsx
import { Metadata } from 'next'

export async function generateMetadata(): Promise<Metadata> {
  const instance = await fetchInstanceConfig()
  const branding = await fetchBrandingAssets()

  return {
    title: `${instance.name} - ${branding.textContent.hero_headline}`,
    description: branding.textContent.hero_subheadline,

    openGraph: {
      title: instance.name,
      description: branding.textContent.hero_subheadline,
      images: [{
        url: branding.ogImage, // 1200x630
        width: 1200,
        height: 630,
        alt: instance.name
      }],
      locale: 'vi_VN',
      type: 'website',
      siteName: instance.name
    },

    twitter: {
      card: 'summary_large_image',
      title: instance.name,
      description: branding.textContent.hero_subheadline,
      images: [branding.ogImage]
    },

    alternates: {
      canonical: `https://${instance.domain}`
    }
  }
}
```

### Structured Data (Schema.org)

```typescript
// Course Schema for SEO
const courseStructuredData = {
  '@context': 'https://schema.org',
  '@type': 'Course',
  name: course.title,
  description: course.description,

  provider: {
    '@type': 'Organization',
    name: instance.name,
    url: `https://${instance.domain}`
  },

  instructor: {
    '@type': 'Person',
    name: course.instructor.name,
    description: course.instructor.bio
  },

  offers: {
    '@type': 'Offer',
    category: 'Paid',
    price: course.price,
    priceCurrency: 'VND',
    availability: 'https://schema.org/InStock'
  },

  timeRequired: `P${course.duration}W`, // ISO 8601 duration
  educationalLevel: course.level,

  hasCourseInstance: {
    '@type': 'CourseInstance',
    courseMode: 'online',
    startDate: course.startDate,
    endDate: course.endDate
  }
}
```

### Sitemap Generation

```typescript
// app/sitemap.ts
export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const instance = await fetchInstanceConfig()
  const courses = await fetchAllPublicCourses()

  const baseUrl = `https://${instance.domain}`

  return [
    {
      url: baseUrl,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1.0
    },
    {
      url: `${baseUrl}/courses`,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 0.9
    },
    ...courses.map(course => ({
      url: `${baseUrl}/courses/${course.id}`,
      lastModified: course.updatedAt,
      changeFrequency: 'weekly' as const,
      priority: 0.8
    })),
    {
      url: `${baseUrl}/about`,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.5
    },
    {
      url: `${baseUrl}/contact`,
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.5
    }
  ]
}
```

## 6D.5. Performance Optimization

### ISR (Incremental Static Regeneration)

```typescript
// Revalidation Strategy
export const revalidate = {
  landingPage: 3600,      // 1 hour - landing page
  courseCatalog: 1800,    // 30 min - course catalog
  courseDetails: 3600,    // 1 hour - course details
  aboutPage: 86400,       // 24 hours - about page
}

// app/(public)/page.tsx
export const revalidate = 3600 // Rebuild every 1 hour

// How ISR works:
// 1. First visitor: Server fetches fresh data (~200ms)
// 2. Next 1 hour: Serve cached static HTML (0ms)
// 3. After 1 hour: Background revalidation starts
// 4. Updated page ready for next request
// 5. CDN caches static HTML globally
```

### Performance Targets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               PERFORMANCE TARGETS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Metric                 â”‚  Target                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Lighthouse Score       â”‚  90+                          â”‚
â”‚  First Contentful Paint â”‚  < 1.5s                       â”‚
â”‚  Largest Contentful     â”‚  < 2.5s                       â”‚
â”‚  Time to Interactive    â”‚  < 3.0s                       â”‚
â”‚  Total Page Size        â”‚  < 1MB                        â”‚
â”‚  Hero Banner Size       â”‚  < 300KB (WebP)               â”‚
â”‚  Course Card Images     â”‚  < 100KB (WebP)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6D.6. Conversion Flow

### Guest to Student Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CONVERSION FUNNEL                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Discovery (SEO)
  Google search: "khÃ³a há»c láº­p trÃ¬nh HÃ  Ná»™i"
  â†’ Click organic result
  â†’ Lands on abc-academy.kiteclass.com

Step 2: Browse (Public)
  Landing page â†’ Course catalog â†’ Course details
  - No login required
  - View pricing, schedule, instructor
  - Read course description, syllabus

Step 3: Interest
  Clicks "ÄÄƒng KÃ½ Ngay" button on course card

Step 4: Authentication Gate
  Redirect to: /login?redirect=/enroll/101
  - Option A: Login (existing student)
  - Option B: Register (new student)

Step 5: Registration
  Register form:
  - Name, Email, Phone
  - Zalo OTP verification
  - Create account

Step 6: Enrollment
  Redirect to: /enroll/101 (authenticated)
  Enrollment form:
  - Confirm course selection
  - Payment (if paid course)
  - VNPay/MoMo integration

Step 7: Enrolled
  Success â†’ Redirect to /dashboard/courses/101
  Now a registered student with course access

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 CONVERSION METRICS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Stage                  â”‚  Expected Conversion          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Landing â†’ Browse       â”‚  60-70%                       â”‚
â”‚  Browse â†’ Interest      â”‚  20-30%                       â”‚
â”‚  Interest â†’ Register    â”‚  40-50%                       â”‚
â”‚  Register â†’ Enroll      â”‚  70-80%                       â”‚
â”‚  Overall (Landâ†’Enroll)  â”‚  5-10%                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6D.7. Custom Domain (PREMIUM Tier)

### DNS Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CUSTOM DOMAIN SETUP (PREMIUM)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Customer adds CNAME record
  Type: CNAME
  Name: www (hoáº·c @)
  Value: proxy.kiteclass.com
  TTL: 3600

Step 2: KiteClass Backend verifies DNS
  - Poll DNS records every 5 minutes
  - Verify CNAME points to proxy.kiteclass.com
  - Mark domain as "verified" when successful

Step 3: SSL Auto-Provision
  - Generate Let's Encrypt SSL certificate
  - Auto-renewal every 60 days
  - Certificate stored in /etc/letsencrypt/

Step 4: Nginx Reverse Proxy
  - Add server block for custom domain
  - Proxy to abc-academy.kiteclass.com
  - Enable HTTPS redirect (HTTP â†’ HTTPS)

Step 5: Database Update
  INSERT INTO domain_mappings (
    instance_id,
    custom_domain,
    verified_at,
    ssl_cert_path,
    status
  ) VALUES (
    'abc-academy-001',
    'abc-academy.com',
    NOW(),
    '/etc/letsencrypt/live/abc-academy.com/',
    'ACTIVE'
  );
```

### Nginx Configuration

```nginx
# /etc/nginx/sites-enabled/abc-academy.com
server {
    listen 443 ssl http2;
    server_name abc-academy.com www.abc-academy.com;

    # SSL Configuration
    ssl_certificate /etc/letsencrypt/live/abc-academy.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/abc-academy.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # Reverse Proxy to KiteClass Instance
    location / {
        proxy_pass https://abc-academy.kiteclass.com;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Caching
        proxy_cache_valid 200 1h;
        proxy_cache_bypass $http_upgrade;
    }
}

# HTTP â†’ HTTPS Redirect
server {
    listen 80;
    server_name abc-academy.com www.abc-academy.com;
    return 301 https://$server_name$request_uri;
}
```

## 6D.8. Analytics & Tracking

### Google Analytics 4 Events

```typescript
// Track key conversion events
export function trackPreviewWebsiteEvents() {

  // Landing page view
  gtag('event', 'page_view', {
    page_title: 'Landing Page',
    page_location: window.location.href
  })

  // Course view
  gtag('event', 'view_course', {
    course_id: course.id,
    course_name: course.title,
    course_price: course.price,
    course_category: course.category
  })

  // Enrollment click
  gtag('event', 'click_enroll', {
    course_id: course.id,
    placement: 'course_card', // or 'course_details'
    value: course.price
  })

  // Contact form submit
  gtag('event', 'submit_contact_form', {
    form_location: 'landing_page'
  })

  // Instructor view
  gtag('event', 'view_instructor', {
    instructor_id: instructor.id,
    instructor_name: instructor.name
  })
}
```

## 6D.9. Security & Privacy

### Public Data Only

```java
// Security Filter - Ensure no private data leakage
@Component
public class PublicDataFilter {

    public PublicCourseDTO filterCourse(Course course) {
        return PublicCourseDTO.builder()
            // âœ… SAFE to expose
            .id(course.getId())
            .title(course.getTitle())
            .description(course.getDescription())
            .price(course.getPrice())
            .instructor(filterInstructor(course.getInstructor()))

            // âŒ NEVER expose
            // .lessons - Private content
            // .students - PII
            // .grades - Private data
            // .attendance - Private data
            .build();
    }
}
```

### Rate Limiting

```java
// Prevent abuse of public APIs
@RateLimit(value = 100, period = "1m") // 100 requests/min per IP
public ResponseEntity<List<PublicCourseDTO>> getPublicCourses() {
    // Rate limiting prevents:
    // - DDoS attacks
    // - Data scraping
    // - API abuse
}
```

### GDPR Compliance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 GDPR COMPLIANCE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Cookie consent banner                               â”‚
â”‚  âœ… Privacy policy link                                 â”‚
â”‚  âœ… Contact form: Explicit opt-in for marketing         â”‚
â”‚  âœ… No PII without consent                              â”‚
â”‚  âœ… Right to be forgotten (delete account â†’ remove      â”‚
â”‚     from public catalog)                                â”‚
â”‚  âœ… Data minimization (only public data exposed)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 6E: GUEST USER & TRIAL SYSTEM - MÃ” HÃŒNH B2B OWNER-CENTRIC

## 6E.1. Tá»•ng Quan Guest & Trial Model

### Äá»‹nh NghÄ©a

KiteClass Ã¡p dá»¥ng **mÃ´ hÃ¬nh B2B owner-centric** trong Ä‘Ã³:
- **Trial dÃ nh cho OWNER** - Business owners trial platform features, khÃ´ng pháº£i students trial courses
- **Guest contact OWNER** - Prospective students liÃªn há»‡ OWNER Ä‘á»ƒ Ä‘Äƒng kÃ½, khÃ´ng tá»± enroll
- **OWNER lÃ m sales** - KiteClass cung cáº¥p cÃ´ng cá»¥, OWNER thá»±c hiá»‡n sales process

### NguyÃªn Táº¯c Cá»‘t LÃµi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          B2B OWNER-CENTRIC PRINCIPLES                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Trial CHá»ˆ cho OWNER                                 â”‚
â”‚     - ÄÄƒng kÃ½ instance â†’ Trial expand features          â”‚
â”‚     - 14 ngÃ y test ALL features                         â”‚
â”‚     - Non-owners liÃªn há»‡ OWNER Ä‘á»ƒ request               â”‚
â”‚                                                         â”‚
â”‚  2. Guest KHÃ”NG auto-enroll                             â”‚
â”‚     - Browse public catalog                             â”‚
â”‚     - Contact OWNER (FB, Zalo, Messenger)               â”‚
â”‚     - OWNER tÆ° váº¥n â†’ Manual enroll                      â”‚
â”‚                                                         â”‚
â”‚  3. OWNER lÃ m sales                                     â”‚
â”‚     - KiteClass: Provide tools (catalog, contact info)  â”‚
â”‚     - OWNER: Execute (qualify leads, close sales)       â”‚
â”‚                                                         â”‚
â”‚  4. Admin quáº£n lÃ½ public resources                      â”‚
â”‚     - Backend service: Course visibility control        â”‚
â”‚     - ADMIN toggle: PUBLIC/PRIVATE per course           â”‚
â”‚                                                         â”‚
â”‚  5. Contact info prominent                              â”‚
â”‚     - Display: Facebook, Zalo, Messenger, Phone         â”‚
â”‚     - Vietnam market: Personal touch important          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6E.2. Trial System Architecture

### Trial Scope & Timeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TRIAL SYSTEM FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Day 0: OWNER Registration (KiteHub)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Trial Signup Form:                               â”‚
  â”‚  - Organization name                              â”‚
  â”‚  - Owner name, email, phone                       â”‚
  â”‚  - Industry type (giÃ¡o dá»¥c, corporate, etc.)      â”‚
  â”‚  - Company size (<50, 50-200, >200 students)      â”‚
  â”‚  - Referral source                                â”‚
  â”‚                                                   â”‚
  â”‚  Verification:                                    â”‚
  â”‚  - Zalo OTP (phone verification)                  â”‚
  â”‚  - Email verification link                        â”‚
  â”‚                                                   â”‚
  â”‚  âŒ NO payment info required                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
  Instance Provisioning
  - URL: {org-slug}.kiteclass.com
  - Deploy 3 core services (User, Core, Frontend)
  - Status: TRIAL
  - Tier: BASIC
          â†“

Day 1-14: Trial Period (Active)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Base Tier: BASIC                                 â”‚
  â”‚  - Free during trial                              â”‚
  â”‚  - Max 50 students                                â”‚
  â”‚  - Max 10 courses                                 â”‚
  â”‚  - Max 5 teachers                                 â”‚
  â”‚                                                   â”‚
  â”‚  Expand Features (All FREE for trial):            â”‚
  â”‚  âœ… ENGAGEMENT Pack (+300k/month normally)        â”‚
  â”‚     - Gamification                                â”‚
  â”‚     - Forum                                       â”‚
  â”‚     - Parent Portal                               â”‚
  â”‚                                                   â”‚
  â”‚  âœ… MEDIA Pack (+500k/month normally)             â”‚
  â”‚     - Video Upload (5GB trial limit)              â”‚
  â”‚     - Live Streaming (1 concurrent)               â”‚
  â”‚     - Video Analytics                             â”‚
  â”‚                                                   â”‚
  â”‚  âœ… PREMIUM Features (2tr/month normally)         â”‚
  â”‚     - AI Branding (10 generations trial)          â”‚
  â”‚     - Custom Domain (test only)                   â”‚
  â”‚     - Priority Support                            â”‚
  â”‚                                                   â”‚
  â”‚  UI Indicators:                                   â”‚
  â”‚  - Banner: "Báº¡n cÃ²n X ngÃ y trial"                 â”‚
  â”‚  - Footer: "Trial ends on [date]"                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“

Day 11-13: Late Trial Warnings
  - âš ï¸ Warning banner: "CÃ²n 3 ngÃ y trial"
  - ğŸ“§ Email reminder (Day 11, 13)
  - ğŸ”” In-app notification
  - ğŸ’° Offer: "Upgrade ngay giáº£m 20%"
          â†“

Day 14: Last Day
  - ğŸ”´ Urgent banner: "HÃ”M NAY lÃ  ngÃ y cuá»‘i"
  - ğŸ“§ Email: "Last chance to upgrade"
  - ğŸ Modal popup: Early-bird discount
          â†“

Day 14 23:59:59 â†’ Trial Expires

Day 15-17: Grace Period (Read-Only)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ“– Read-Only Mode:                               â”‚
  â”‚  âœ… Login OK                                       â”‚
  â”‚  âœ… View data (students, courses, reports)         â”‚
  â”‚  âŒ CRUD disabled (cannot add/edit/delete)         â”‚
  â”‚                                                   â”‚
  â”‚  ğŸ”’ Expand Features Locked:                        â”‚
  â”‚  - Gamification â†’ Disabled                        â”‚
  â”‚  - Forum â†’ Read-only                              â”‚
  â”‚  - Video Upload â†’ Blocked                         â”‚
  â”‚  - AI Branding â†’ Disabled                         â”‚
  â”‚                                                   â”‚
  â”‚  Banner: "Trial Ä‘Ã£ háº¿t. CÃ²n X ngÃ y grace period"  â”‚
  â”‚  ğŸ“§ Daily email reminder                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“

Day 18: Grace Period Ends â†’ Instance LOCKED
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ”’ Instance Locked:                              â”‚
  â”‚  âŒ Cannot login                                   â”‚
  â”‚  ğŸ“§ Email: "Trial & grace period Ä‘Ã£ háº¿t"           â”‚
  â”‚  ğŸ’³ "NÃ¢ng cáº¥p ngay" button â†’ KiteHub billing       â”‚
  â”‚                                                   â”‚
  â”‚  ğŸ’¾ Data Retained: 90 days                         â”‚
  â”‚  - Backup storage                                 â”‚
  â”‚  - OWNER can upgrade anytime â†’ Restore            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“

Day 18-107: Data Retention (90 days)
  - Instance locked but data preserved
  - OWNER can upgrade â†’ Instant restore
  - No charges during locked period
          â†“

Day 108: 7-Day Warning
  - ğŸ“§ Email: "CÃ²n 7 ngÃ y data sáº½ bá»‹ xÃ³a"
  - ğŸ’¾ Option: "Download backup" button
          â†“

Day 115: Permanent Deletion
  - ğŸ—‘ï¸ Instance deprovisioned
  - ğŸ—‘ï¸ Data permanently deleted
  - âŒ Cannot recover
```

### Trial Tier Specification

```java
// Trial Instance Configuration
@Entity
public class Instance {
    @Id
    private String id;

    @Enumerated(EnumType.STRING)
    private InstanceStatus status;

    @Enumerated(EnumType.STRING)
    private SubscriptionTier baseTier = SubscriptionTier.BASIC;

    // Trial-specific fields
    private LocalDateTime trialStartDate;
    private LocalDateTime trialEndDate;
    private LocalDateTime gracePeriodEndDate;

    // Expand services (enabled during trial)
    @ElementCollection
    private Set<ExpandService> trialExpandServices = new HashSet<>();

    public enum InstanceStatus {
        TRIAL,           // Day 1-14
        GRACE_PERIOD,    // Day 15-17 (read-only)
        ACTIVE,          // Paid subscription
        LOCKED,          // Day 18+ (cannot login)
        DELETED          // Day 115+ (permanent)
    }

    public enum ExpandService {
        ENGAGEMENT,      // Gamification, Forum, Parent Portal
        MEDIA,           // Video, Live Streaming
        AI_BRANDING      // AI-generated marketing assets
    }
}
```

### Trial Conversion Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MULTI-TOUCH CONVERSION STRATEGY               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Day 1: Welcome Email                                   â”‚
â”‚    â†’ Quick start guide                                  â”‚
â”‚    â†’ Feature tutorials                                  â”‚
â”‚                                                         â”‚
â”‚  Day 3: Feature Highlight                               â”‚
â”‚    â†’ "ÄÃ£ thá»­ AI Branding chÆ°a?"                        â”‚
â”‚    â†’ Video tutorial link                                â”‚
â”‚                                                         â”‚
â”‚  Day 7: Mid-Trial Check-in                              â”‚
â”‚    â†’ Survey: "Tráº£i nghiá»‡m tháº¿ nÃ o?"                    â”‚
â”‚    â†’ Early-bird offer: "Upgrade giáº£m 20%"              â”‚
â”‚                                                         â”‚
â”‚  Day 11: Late-Trial Warning                             â”‚
â”‚    â†’ âš ï¸ Banner + Email + Modal                         â”‚
â”‚    â†’ Highlight benefits of paid plan                    â”‚
â”‚                                                         â”‚
â”‚  Day 14: Last Chance                                    â”‚
â”‚    â†’ ğŸ”´ Urgent messaging                                â”‚
â”‚    â†’ One-click upgrade flow                             â”‚
â”‚                                                         â”‚
â”‚  Day 15-17: Grace Period                                â”‚
â”‚    â†’ Read-only access (see what you'll lose)           â”‚
â”‚    â†’ Daily reminder emails                              â”‚
â”‚                                                         â”‚
â”‚  Conversion Incentive:                                  â”‚
â”‚  ğŸ’° 20% discount for upgrade trong 10 ngÃ y Ä‘áº§u          â”‚
â”‚     VD: STANDARD 1tr/thÃ¡ng â†’ 800k (thÃ¡ng Ä‘áº§u)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Duplicate Trial Prevention

```java
// Trial Eligibility Service
@Service
public class TrialEligibilityService {

    public TrialEligibility checkEligibility(
        String email,
        String phone
    ) {
        // Check email (1 email = 1 trial)
        boolean emailUsed = trialRepo.existsByEmail(email);

        // Check phone (1 phone = 1 trial)
        boolean phoneUsed = trialRepo.existsByPhone(phone);

        if (emailUsed || phoneUsed) {
            // Log duplicate attempt
            auditLog.warn("Duplicate trial attempt",
                Map.of("email", email, "phone", phone)
            );

            // Notify sales team (for legitimate cases)
            salesNotificationService.notifyDuplicateTrial(
                email, phone, LocalDateTime.now()
            );

            return TrialEligibility.builder()
                .eligible(false)
                .reason("Email hoáº·c SÄT Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng cho trial")
                .existingTrialDate(getExistingTrialDate(email, phone))
                .contact("support@kiteclass.com")
                .build();
        }

        return TrialEligibility.eligible();
    }
}
```

## 6E.3. Guest User Access Architecture

### Admin-Controlled Public Resources

```java
// Course Visibility Control
@Entity
public class Course {
    @Id
    private String id;

    private String title;
    private String description;
    private BigDecimal price;

    // Admin controls public visibility
    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private PublicVisibility publicVisibility = PublicVisibility.PRIVATE;

    public enum PublicVisibility {
        PRIVATE,     // Guest khÃ´ng tháº¥y (default)
        PUBLIC       // Guest tháº¥y trong public catalog
    }
}

// Admin API - Toggle Visibility
@RestController
@RequestMapping("/api/v1/admin")
public class CourseAdminController {

    @PatchMapping("/courses/{id}/visibility")
    @PreAuthorize("hasRole('CENTER_ADMIN')")
    public ResponseEntity<Void> updateVisibility(
        @PathVariable String id,
        @RequestBody UpdateVisibilityRequest request
    ) {
        courseService.updatePublicVisibility(
            id,
            request.getVisibility()
        );

        // Invalidate public API cache
        cacheService.evict("public-courses", instanceId);

        return ResponseEntity.ok().build();
    }
}
```

### Public Course Catalog API

```java
// Public API - Only return PUBLIC courses
@RestController
@RequestMapping("/api/v1/public")
public class PublicCourseController {

    @GetMapping("/instance/{instanceId}/courses")
    @RateLimit(value = 100, period = "1m")
    public ResponseEntity<List<PublicCourseDTO>> getPublicCourses(
        @PathVariable String instanceId,
        @RequestParam(required = false) String category,
        @RequestParam(required = false) String level
    ) {
        List<Course> courses = courseRepo
            .findByInstanceIdAndPublicVisibility(
                instanceId,
                PublicVisibility.PUBLIC  // â† KEY: Chá»‰ PUBLIC
            );

        // Apply filters
        if (category != null) {
            courses = courses.stream()
                .filter(c -> c.getCategory().equals(category))
                .collect(Collectors.toList());
        }

        // Convert to PublicDTO (filter private fields)
        return ResponseEntity.ok(
            courses.stream()
                .map(this::toPublicDTO)
                .collect(Collectors.toList())
        );
    }

    private PublicCourseDTO toPublicDTO(Course course) {
        return PublicCourseDTO.builder()
            // âœ… SAFE to expose
            .id(course.getId())
            .title(course.getTitle())
            .description(course.getDescription())
            .price(course.getPrice())
            .schedule(course.getSchedule())
            .startDate(course.getStartDate())
            .instructor(toPublicInstructorDTO(course.getInstructor()))

            // âŒ NOT included (private data)
            // .lessons - Lesson content
            // .students - Student list (PII)
            // .grades - Private assessment data
            // .attendance - Private tracking data
            .build();
    }
}
```

### Instance Contact Information

```java
// Instance Contact Info
@Entity
public class Instance {
    @Id
    private String id;

    private String name;
    private String description;

    // Owner contact information (for guest inquiries)
    @Embedded
    private OwnerContactInfo ownerContact;

    @Embeddable
    public static class OwnerContactInfo {
        private String ownerName;
        private String ownerTitle;      // "GiÃ¡m Ä‘á»‘c", "TrÆ°á»Ÿng phÃ²ng", etc.
        private String ownerAvatar;

        // Contact methods
        private String phone;
        private String email;
        private String facebookUrl;     // https://fb.me/abc-academy
        private String messengerUrl;    // https://m.me/abc-academy
        private String zaloUrl;         // https://zalo.me/0123456789
    }
}

// Public API - Get Contact Info
@GetMapping("/instance/{instanceId}/contact")
public ResponseEntity<InstanceContactDTO> getContactInfo(
    @PathVariable String instanceId
) {
    Instance instance = instanceRepo.findById(instanceId)
        .orElseThrow(() -> new InstanceNotFoundException(instanceId));

    return ResponseEntity.ok(
        InstanceContactDTO.fromEntity(instance.getOwnerContact())
    );
}
```

## 6E.4. Owner-Led Sales Model

### Guest-to-Student Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GUEST-TO-STUDENT CONVERSION FLOW                â”‚
â”‚         (Manual, Owner-Led)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Guest Discovery (SEO)
  - Google search: "khÃ³a há»c láº­p trÃ¬nh HÃ  Ná»™i"
  - Click abc-academy.kiteclass.com
  - Lands on public landing page

Step 2: Browse Public Catalog
  - View course grid
  - Filter by category, level, price
  - Click course â†’ Course details page

Step 3: View Course Details
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Course Details Page:                             â”‚
  â”‚  - Title, description, syllabus                   â”‚
  â”‚  - Price, schedule, duration                      â”‚
  â”‚  - Instructor bio, photo                          â”‚
  â”‚                                                   â”‚
  â”‚  âš ï¸ NO "Enroll Now" button                        â”‚
  â”‚  âš ï¸ NO Self-registration form                     â”‚
  â”‚                                                   â”‚
  â”‚  âœ… INSTEAD: Contact OWNER Section                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚  Quan tÃ¢m khÃ³a há»c nÃ y?                     â”‚ â”‚
  â”‚  â”‚  LiÃªn há»‡ trá»±c tiáº¿p vá»›i trung tÃ¢m:          â”‚ â”‚
  â”‚  â”‚                                             â”‚ â”‚
  â”‚  â”‚  [ğŸ“± 0123-456-789]  [ğŸ’¬ Chat Zalo]         â”‚ â”‚
  â”‚  â”‚  [ğŸ“˜ Facebook]      [ğŸ“§ Email]             â”‚ â”‚
  â”‚  â”‚                                             â”‚ â”‚
  â”‚  â”‚  ğŸ‘¤ Nguyá»…n VÄƒn A - GiÃ¡m Ä‘á»‘c                â”‚ â”‚
  â”‚  â”‚     ABC Academy                             â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Guest Contacts OWNER
  - Click Facebook â†’ Messenger chat
  - Click Zalo â†’ Zalo chat
  - Click Phone â†’ Call directly
  - Click Email â†’ Send inquiry

Step 5: OWNER Sales Conversation
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  OWNER tÆ° váº¥n:                                    â”‚
  â”‚  - Giá»›i thiá»‡u chi tiáº¿t khÃ³a há»c                   â”‚
  â”‚  - Tráº£ lá»i cÃ¢u há»i                                â”‚
  â”‚  - TÆ° váº¥n gÃ³i phÃ¹ há»£p                             â”‚
  â”‚  - ThÆ°Æ¡ng lÆ°á»£ng giÃ¡ (discount, installment)       â”‚
  â”‚  - XÃ¡c nháº­n há»c viÃªn Ä‘á»§ Ä‘iá»u kiá»‡n                 â”‚
  â”‚  - Collect student info (name, email, phone)      â”‚
  â”‚  - Confirm payment method                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 6: OWNER Manually Enrolls Student
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Admin Panel:                                     â”‚
  â”‚  1. Navigate to: /admin/students                  â”‚
  â”‚  2. Click "ThÃªm Há»c ViÃªn"                         â”‚
  â”‚  3. Fill form:                                    â”‚
  â”‚     - Name: [from conversation]                   â”‚
  â”‚     - Email: [from conversation]                  â”‚
  â”‚     - Phone: [from conversation]                  â”‚
  â”‚  4. Assign to course                              â”‚
  â”‚  5. Set enrollment date                           â”‚
  â”‚  6. Mark payment status: PAID/PENDING             â”‚
  â”‚  7. Generate student account                      â”‚
  â”‚  8. Send login credentials via email/SMS          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 7: Student Receives Credentials
  - ğŸ“§ Email: "ChÃ o má»«ng Ä‘áº¿n ABC Academy"
  - Login: abc-academy.kiteclass.com/login
  - Username: student@example.com
  - Temp password: [auto-generated]
  - Prompt to change password on first login

Step 8: Student Accesses Course
  - Login to instance
  - Navigate to /dashboard/courses
  - See enrolled course
  - Start learning
```

### Frontend: Contact OWNER Component

```typescript
// components/landing/ContactOwnerSection.tsx
interface ContactOwnerSectionProps {
  owner: OwnerContactInfo
  course: PublicCourse
}

export function ContactOwnerSection({
  owner,
  course
}: ContactOwnerSectionProps) {
  // Track contact clicks for analytics
  const trackContact = (method: string) => {
    gtag('event', 'contact_owner', {
      course_id: course.id,
      course_name: course.title,
      contact_method: method
    })
  }

  return (
    <section className="bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-xl shadow-lg">
      <h2 className="text-3xl font-bold mb-3">
        Quan tÃ¢m khÃ³a há»c nÃ y?
      </h2>
      <p className="text-gray-700 mb-6 text-lg">
        LiÃªn há»‡ trá»±c tiáº¿p vá»›i trung tÃ¢m Ä‘á»ƒ Ä‘Æ°á»£c tÆ° váº¥n vÃ  Ä‘Äƒng kÃ½:
      </p>

      {/* Contact Methods Grid */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <ContactButton
          icon={<Phone />}
          href={`tel:${owner.phone}`}
          onClick={() => trackContact('phone')}
          variant="phone"
        >
          {owner.phone}
        </ContactButton>

        <ContactButton
          icon={<Zap className="text-blue-500" />}
          href={owner.zaloUrl}
          onClick={() => trackContact('zalo')}
          variant="zalo"
        >
          Chat Zalo
        </ContactButton>

        <ContactButton
          icon={<Facebook className="text-blue-600" />}
          href={owner.facebookUrl}
          onClick={() => trackContact('facebook')}
          variant="facebook"
        >
          Facebook
        </ContactButton>

        <ContactButton
          icon={<MessageCircle className="text-blue-500" />}
          href={owner.messengerUrl}
          onClick={() => trackContact('messenger')}
          variant="messenger"
        >
          Messenger
        </ContactButton>
      </div>

      {/* Owner Info Card */}
      <div className="flex items-center gap-4 p-4 bg-white rounded-lg shadow">
        <Avatar
          src={owner.avatar}
          alt={owner.name}
          size="lg"
          className="border-2 border-blue-200"
        />
        <div>
          <p className="font-bold text-lg">{owner.name}</p>
          <p className="text-gray-600">{owner.title}</p>
          <p className="text-gray-500 text-sm">{instance.name}</p>
        </div>
      </div>

      {/* Trust Indicators */}
      <div className="mt-4 flex items-center gap-2 text-sm text-gray-600">
        <Shield className="w-4 h-4 text-green-500" />
        <span>TÆ° váº¥n miá»…n phÃ­, khÃ´ng rÃ ng buá»™c</span>
      </div>
    </section>
  )
}
```

## 6E.5. Analytics & Tracking

### Guest Behavior Analytics

```typescript
// Track guest journey for OWNER insights
export function trackGuestBehavior() {

  // Landing page view
  gtag('event', 'page_view', {
    page_title: 'Landing Page',
    page_location: window.location.href,
    user_type: 'guest'
  })

  // Course catalog view
  gtag('event', 'view_course_catalog', {
    instance_id: instance.id
  })

  // Course details view
  gtag('event', 'view_course', {
    course_id: course.id,
    course_name: course.title,
    course_price: course.price,
    course_category: course.category
  })

  // Contact OWNER action
  gtag('event', 'contact_owner', {
    course_id: course.id,
    contact_method: 'facebook' | 'zalo' | 'phone' | 'email',
    value: course.price  // Potential conversion value
  })

  // Time on page
  gtag('event', 'engagement_time', {
    engagement_time_msec: timeSpent
  })
}
```

### OWNER Dashboard Analytics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         OWNER ANALYTICS DASHBOARD                       â”‚
â”‚         (/dashboard/analytics/guest-traffic)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Guest Traffic (Last 30 days)                        â”‚
â”‚  - Total visitors: 1,234                                â”‚
â”‚  - Course catalog views: 856                            â”‚
â”‚  - Course detail views: 432                             â”‚
â”‚  - Contact clicks: 89 (10.4% conversion)                â”‚
â”‚                                                         â”‚
â”‚  ğŸ“± Contact Method Distribution                          â”‚
â”‚  - Zalo: 45% (40 contacts)                              â”‚
â”‚  - Facebook: 30% (27 contacts)                          â”‚
â”‚  - Phone: 20% (18 contacts)                             â”‚
â”‚  - Email: 5% (4 contacts)                               â”‚
â”‚                                                         â”‚
â”‚  ğŸ¯ Top Viewed Courses                                   â”‚
â”‚  1. Láº­p TrÃ¬nh Web - 156 views, 23 contacts             â”‚
â”‚  2. Excel NÃ¢ng Cao - 98 views, 12 contacts             â”‚
â”‚  3. Digital Marketing - 67 views, 8 contacts            â”‚
â”‚                                                         â”‚
â”‚  ğŸ” Traffic Sources                                      â”‚
â”‚  - Google Search: 45%                                   â”‚
â”‚  - Facebook Ads: 30%                                    â”‚
â”‚  - Direct: 15%                                          â”‚
â”‚  - Other: 10%                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6E.6. Data Privacy & Security

### Public Data Filtering

```java
// Ensure no private data leakage
@Service
public class PublicDataFilterService {

    public PublicCourseDTO filterCourse(Course course) {
        return PublicCourseDTO.builder()
            // âœ… SAFE to expose publicly
            .id(course.getId())
            .title(course.getTitle())
            .description(course.getDescription())
            .price(course.getPrice())
            .schedule(course.getSchedule())
            .instructor(filterInstructor(course.getInstructor()))

            // âŒ NEVER expose (private)
            // .lessons - Course content
            // .students - List<Student> (PII)
            // .grades - Assessment data
            // .attendance - Tracking data
            // .internalNotes - Admin notes
            .build();
    }

    public PublicInstructorDTO filterInstructor(Instructor instructor) {
        return PublicInstructorDTO.builder()
            // âœ… SAFE (public profile)
            .id(instructor.getId())
            .name(instructor.getName())
            .bio(instructor.getBio())
            .avatar(instructor.getAvatar())
            .expertise(instructor.getExpertise())

            // âŒ NEVER expose
            // .email - Contact info (use owner contact instead)
            // .phone - Contact info
            // .salary - Private
            .build();
    }
}
```

### GDPR Compliance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GDPR COMPLIANCE CHECKLIST                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Cookie Consent Banner                               â”‚
â”‚     - Show on first visit                               â”‚
â”‚     - Explicit consent for analytics                    â”‚
â”‚     - Link to privacy policy                            â”‚
â”‚                                                         â”‚
â”‚  âœ… Privacy Policy                                       â”‚
â”‚     - What data collected (analytics only)              â”‚
â”‚     - How data used (OWNER insights)                    â”‚
â”‚     - No PII without consent                            â”‚
â”‚                                                         â”‚
â”‚  âœ… Contact Form Opt-in                                  â”‚
â”‚     - Checkbox: "Äá»“ng Ã½ nháº­n thÃ´ng tin tá»« trung tÃ¢m"   â”‚
â”‚     - Explicit consent for marketing                    â”‚
â”‚                                                         â”‚
â”‚  âœ… Data Minimization                                    â”‚
â”‚     - Only public data exposed                          â”‚
â”‚     - No student PII in public APIs                     â”‚
â”‚     - No tracking without consent                       â”‚
â”‚                                                         â”‚
â”‚  âœ… Right to be Forgotten                                â”‚
â”‚     - Student can delete account                        â”‚
â”‚     - Remove from analytics                             â”‚
â”‚     - Anonymize historical data                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 6F: Há»† THá»NG THANH TOÃN - VIETQR PAYMENT

**Táº¡o:** 2026-01-30
**Má»¥c Ä‘Ã­ch:** Äá»‹nh nghÄ©a há»‡ thá»‘ng thanh toÃ¡n 2 cáº¥p Ä‘á»™ vá»›i VietQR

## 6F.1. Tá»•ng quan VietQR Payment System

### Táº¡i sao chá»n VietQR thay vÃ¬ Payment Gateway truyá»n thá»‘ng?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š SO SÃNH: VietQR vs Payment Gateways                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  VietQR (QR Code Bank Transfer)                        â”‚
â”‚  âœ… Zero transaction fees (0%)                          â”‚
â”‚  âœ… Instant transfer (real-time)                        â”‚
â”‚  âœ… 95%+ Vietnamese banks support                       â”‚
â”‚  âœ… No merchant account required                        â”‚
â”‚  âœ… Simple integration (generate QR, verify transfer)   â”‚
â”‚  âœ… Popular in Vietnam (everyone has banking app)       â”‚
â”‚  âš ï¸ Manual verification (or bank API integration)       â”‚
â”‚                                                         â”‚
â”‚  VNPay / MoMo / ZaloPay                                â”‚
â”‚  âŒ 1.5-3% transaction fees                             â”‚
â”‚  âŒ Merchant account required (KYB process)             â”‚
â”‚  âŒ Integration complexity (webhooks, signature verify) â”‚
â”‚  âœ… Automatic verification                              â”‚
â”‚  âœ… Multiple payment methods (card, wallet, bank)       â”‚
â”‚                                                         â”‚
â”‚  ğŸ’¡ DECISION: VietQR cho MVP                            â”‚
â”‚     - Chi phÃ­ tháº¥p (zero fees)                          â”‚
â”‚     - Phá»• biáº¿n táº¡i Viá»‡t Nam                             â”‚
â”‚     - ÄÆ¡n giáº£n Ä‘á»ƒ implement                             â”‚
â”‚     - CÃ³ thá»ƒ thÃªm payment gateway sau (V2)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6F.2. Two-Level Payment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¦ TWO-LEVEL PAYMENT SYSTEM                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Level 1: KITEHUB PAYMENT (Platform Subscription)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  User â†’ KiteHub                                â”‚    â”‚
â”‚  â”‚  Purpose: Purchase subscription tier           â”‚    â”‚
â”‚  â”‚  Bank: KiteHub business account                â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  Example:                                       â”‚    â”‚
â”‚  â”‚  - BASIC: 499,000 VND/month                    â”‚    â”‚
â”‚  â”‚  - STANDARD: 999,000 VND/month                 â”‚    â”‚
â”‚  â”‚  - PREMIUM: 1,499,000 VND/month                â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  QR Content: "KITEHUB {orderId} {email}"       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  Level 2: INSTANCE PAYMENT (Course Enrollment)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Student â†’ Center Owner                        â”‚    â”‚
â”‚  â”‚  Purpose: Pay course tuition                   â”‚    â”‚
â”‚  â”‚  Bank: Owner's personal/business account       â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  Example:                                       â”‚    â”‚
â”‚  â”‚  - Course tuition: 2,000,000 VND               â”‚    â”‚
â”‚  â”‚  - Material fee: 500,000 VND                   â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  QR Content: "HOCPHI {courseId} {studentName}" â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  â­ OWNER CAN CUSTOMIZE:                        â”‚    â”‚
â”‚  â”‚     - Bank account (any Vietnamese bank)       â”‚    â”‚
â”‚  â”‚     - QR content template                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6F.3. VietQR Technical Implementation

### 6F.3.1. VietQR URL Format

```java
// VietQR API: https://vietqr.io/
// Generate QR image with pre-filled info

String vietqrUrl = String.format(
  "https://img.vietqr.io/image/%s-%s-compact2.jpg?amount=%d&addInfo=%s&accountName=%s",
  bankBin,           // "970415" (Vietcombank), "970422" (MB Bank), etc.
  accountNumber,     // "1234567890"
  amount,            // 499000 (VND)
  URLEncoder.encode(content, UTF_8),    // "KITEHUB ORD123 user@example.com"
  URLEncoder.encode(accountName, UTF_8) // "CONG TY TNHH KITECLASS"
);

// QR image URL:
// https://img.vietqr.io/image/970415-1234567890-compact2.jpg?amount=499000&addInfo=KITEHUB%20ORD123%20user@example.com&accountName=CONG%20TY%20TNHH%20KITECLASS
```

### 6F.3.2. Vietnamese Bank Codes (BIN)

```java
public enum VietnameseBankCode {
    VIETCOMBANK("970415", "Vietcombank"),
    ACB("970416", "ACB"),
    BIDV("970418", "BIDV"),
    MB_BANK("970422", "MB Bank"),
    TECHCOMBANK("970423", "Techcombank"),
    VIETINBANK("970436", "Vietinbank"),
    VPB("970432", "VPBank"),
    SACOMBANK("970403", "Sacombank"),
    AGRIBANK("970405", "Agribank"),
    DONGABANK("970406", "ÄÃ´ng Ã Bank"),
    // ... 40+ banks total
}
```

---

## 6F.4. KiteHub Payment (Level 1)

### 6F.4.1. Subscription Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ KITEHUB SUBSCRIPTION PAYMENT FLOW                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. User clicks "NÃ¢ng cáº¥p" â†’ Select tier (BASIC, etc.) â”‚
â”‚  2. Backend creates PaymentOrder                        â”‚
â”‚     - orderId: "ORD-20260130-123456"                   â”‚
â”‚     - amount: 499,000 VND                              â”‚
â”‚     - tier: BASIC                                       â”‚
â”‚     - status: PENDING                                   â”‚
â”‚     - expiresAt: now + 24 hours                        â”‚
â”‚                                                         â”‚
â”‚  3. Backend generates VietQR                            â”‚
â”‚     - Bank: KiteHub account (Vietcombank)              â”‚
â”‚     - Content: "KITEHUB ORD-20260130-123456 user@x.com"â”‚
â”‚     - QR Image URL returned to frontend                 â”‚
â”‚                                                         â”‚
â”‚  4. User opens banking app â†’ Scan QR â†’ Transfer         â”‚
â”‚     - Amount auto-filled: 499,000 VND                  â”‚
â”‚     - Content auto-filled: "KITEHUB ORD-20260130-12..." â”‚
â”‚     - Recipient: CONG TY TNHH KITECLASS                â”‚
â”‚                                                         â”‚
â”‚  5. Verification (2 options):                           â”‚
â”‚     A. Manual (MVP):                                    â”‚
â”‚        - ADMIN checks bank statement                    â”‚
â”‚        - Match content with orderId                     â”‚
â”‚        - Click "XÃ¡c nháº­n thanh toÃ¡n" in admin panel    â”‚
â”‚                                                         â”‚
â”‚     B. Automated (V2):                                  â”‚
â”‚        - Bank API webhook â†’ /api/webhooks/bank          â”‚
â”‚        - Auto-match content â†’ orderId                   â”‚
â”‚        - Auto-confirm payment                           â”‚
â”‚                                                         â”‚
â”‚  6. Post-payment actions:                               â”‚
â”‚     - Update order status: PAID                         â”‚
â”‚     - Activate subscription tier                        â”‚
â”‚     - Send confirmation email                           â”‚
â”‚     - Grant feature access                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6F.4.2. PaymentOrder Entity

```java
@Entity
@Table(name = "payment_orders")
public class PaymentOrder {

    @Id
    @Column(length = 50)
    private String orderId;  // "ORD-20260130-123456"

    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private PaymentType type; // SUBSCRIPTION, COURSE_ENROLLMENT

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;

    @Column(nullable = false)
    private Long amount;     // 499000 (VND)

    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private PricingTier tier; // BASIC, STANDARD, PREMIUM

    @Enumerated(EnumType.STRING)
    @Column(nullable = false)
    private PaymentStatus status; // PENDING, PAID, EXPIRED, CANCELLED

    @Column(length = 500)
    private String qrImageUrl; // VietQR image URL

    @Column(length = 200)
    private String paymentContent; // "KITEHUB ORD-123 user@x.com"

    @Column(length = 100)
    private String transactionReference; // Bank transaction ID (if available)

    @Column
    private LocalDateTime paidAt;

    @Column(nullable = false)
    private LocalDateTime createdAt;

    @Column(nullable = false)
    private LocalDateTime expiresAt; // createdAt + 24 hours

    // Getters/Setters
}
```

### 6F.4.3. VietQRService - KiteHub Level

```java
@Service
public class KiteHubPaymentService {

    private static final String KITEHUB_BANK_BIN = "970415"; // Vietcombank
    private static final String KITEHUB_ACCOUNT = "1234567890";
    private static final String KITEHUB_ACCOUNT_NAME = "CONG TY TNHH KITECLASS";

    /**
     * Create subscription payment order with VietQR
     */
    @Transactional
    public PaymentOrderResponse createSubscriptionOrder(
        User user,
        PricingTier tier
    ) {
        // Generate unique order ID
        String orderId = generateOrderId(); // "ORD-20260130-123456"

        // Get tier price
        long amount = tier.getPriceVND(); // 499k, 999k, 1499k

        // Generate payment content
        String content = String.format(
            "KITEHUB %s %s",
            orderId,
            user.getEmail()
        );

        // Generate VietQR URL
        String qrUrl = buildVietQRUrl(
            KITEHUB_BANK_BIN,
            KITEHUB_ACCOUNT,
            KITEHUB_ACCOUNT_NAME,
            amount,
            content
        );

        // Create payment order
        PaymentOrder order = new PaymentOrder();
        order.setOrderId(orderId);
        order.setType(PaymentType.SUBSCRIPTION);
        order.setUser(user);
        order.setAmount(amount);
        order.setTier(tier);
        order.setStatus(PaymentStatus.PENDING);
        order.setQrImageUrl(qrUrl);
        order.setPaymentContent(content);
        order.setCreatedAt(LocalDateTime.now());
        order.setExpiresAt(LocalDateTime.now().plusHours(24));

        paymentOrderRepo.save(order);

        // Return response
        return PaymentOrderResponse.builder()
            .orderId(orderId)
            .qrImageUrl(qrUrl)
            .bankName("Vietcombank")
            .accountNumber(maskAccountNumber(KITEHUB_ACCOUNT)) // "1234****90"
            .accountName(KITEHUB_ACCOUNT_NAME)
            .amount(amount)
            .content(content)
            .expiresAt(order.getExpiresAt())
            .build();
    }

    /**
     * Manual payment verification (MVP)
     */
    @Transactional
    public void confirmPayment(
        String orderId,
        String transactionRef,
        LocalDateTime paidAt
    ) {
        PaymentOrder order = paymentOrderRepo.findById(orderId)
            .orElseThrow(() -> new NotFoundException("Order not found"));

        if (order.getStatus() != PaymentStatus.PENDING) {
            throw new InvalidStateException("Order already processed");
        }

        // Update order
        order.setStatus(PaymentStatus.PAID);
        order.setTransactionReference(transactionRef);
        order.setPaidAt(paidAt);
        paymentOrderRepo.save(order);

        // Activate subscription
        subscriptionService.activateTier(order.getUser(), order.getTier());

        // Send confirmation email
        emailService.sendPaymentConfirmation(order);

        // Publish event
        eventPublisher.publish(new PaymentConfirmedEvent(order));
    }

    private String buildVietQRUrl(
        String bankBin,
        String accountNo,
        String accountName,
        long amount,
        String content
    ) {
        return String.format(
            "https://img.vietqr.io/image/%s-%s-compact2.jpg?amount=%d&addInfo=%s&accountName=%s",
            bankBin,
            accountNo,
            amount,
            URLEncoder.encode(content, StandardCharsets.UTF_8),
            URLEncoder.encode(accountName, StandardCharsets.UTF_8)
        );
    }

    private String generateOrderId() {
        return String.format(
            "ORD-%s-%06d",
            LocalDate.now().format(DateTimeFormatter.BASIC_ISO_DATE),
            ThreadLocalRandom.current().nextInt(1, 1_000_000)
        );
    }

    private String maskAccountNumber(String accountNo) {
        if (accountNo.length() <= 4) return accountNo;
        return accountNo.substring(0, 4) + "****" + accountNo.substring(accountNo.length() - 2);
    }
}
```

---

## 6F.5. Instance Payment (Level 2) - Owner Configurable

### 6F.5.1. Owner Bank Account Configuration

```java
@Entity
@Table(name = "instances")
public class Instance {

    @Embedded
    private BankAccountInfo ownerBankAccount;

    @Embeddable
    public static class BankAccountInfo {

        @Column(name = "bank_code", length = 10)
        private String bankCode;  // "970415" (Vietcombank), "970422" (MB Bank)

        @Column(name = "bank_name", length = 100)
        private String bankName;  // "Vietcombank" (display name)

        @Column(name = "account_number", length = 50)
        private String accountNumber;  // "9876543210"

        @Column(name = "account_name", length = 200)
        private String accountName;  // "NGUYEN VAN A" (UPPERCASE, no accents)

        @Column(name = "qr_template", length = 500)
        private String qrTemplate;  // "HOCPHI {courseId} {studentName}"

        // Getters/Setters
    }
}
```

### 6F.5.2. Course Enrollment Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ COURSE ENROLLMENT PAYMENT FLOW (Instance-Level)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. ADMIN adds Student to Course                        â”‚
â”‚     - courseId: "CRS-123"                              â”‚
â”‚     - studentId: "STU-456"                             â”‚
â”‚     - tuition: 2,000,000 VND                           â”‚
â”‚     - status: PENDING_PAYMENT                           â”‚
â”‚                                                         â”‚
â”‚  2. Backend generates VietQR for this enrollment        â”‚
â”‚     - Bank: OWNER's configured account                  â”‚
â”‚     - Content: OWNER's template                         â”‚
â”‚       "HOCPHI CRS-123 NGUYEN VAN A"                    â”‚
â”‚     - QR sent to Student via email/parent portal        â”‚
â”‚                                                         â”‚
â”‚  3. Student/Parent scans QR â†’ Transfer                  â”‚
â”‚     - Amount: 2,000,000 VND (pre-filled)               â”‚
â”‚     - Content: "HOCPHI CRS-123 NGUYEN VAN A" (pre-filled)â”‚
â”‚     - Recipient: NGUYEN VAN B (Owner's name)           â”‚
â”‚                                                         â”‚
â”‚  4. OWNER checks bank account â†’ Sees transfer           â”‚
â”‚     - Logs into KiteClass                               â”‚
â”‚     - Goes to: Students > {student} > Payments          â”‚
â”‚     - Clicks "XÃ¡c nháº­n Ä‘Ã£ nháº­n tiá»n"                   â”‚
â”‚                                                         â”‚
â”‚  5. Post-payment:                                       â”‚
â”‚     - Student status: ACTIVE                            â”‚
â”‚     - Can access course materials                       â”‚
â”‚     - Parent receives confirmation                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6F.5.3. InstancePaymentService

```java
@Service
public class InstancePaymentService {

    /**
     * Generate QR for course enrollment payment
     * Uses OWNER's configured bank account
     */
    public VietQRResponse generateEnrollmentQR(
        String instanceId,
        String courseId,
        String studentName,
        long tuitionAmount
    ) {
        // Get instance
        Instance instance = instanceRepo.findById(instanceId)
            .orElseThrow(() -> new NotFoundException("Instance not found"));

        // Get owner's bank config
        BankAccountInfo bankInfo = instance.getOwnerBankAccount();

        if (bankInfo == null || bankInfo.getAccountNumber() == null) {
            throw new PaymentConfigException(
                "Chá»§ trung tÃ¢m chÆ°a cáº¥u hÃ¬nh thÃ´ng tin chuyá»ƒn khoáº£n. " +
                "Vui lÃ²ng cáº­p nháº­t trong Settings > Payment Info."
            );
        }

        // Format payment content using owner's template
        String content = formatPaymentContent(
            bankInfo.getQrTemplate(),
            courseId,
            studentName
        );

        // Generate VietQR URL
        String qrUrl = buildVietQRUrl(
            bankInfo.getBankCode(),
            bankInfo.getAccountNumber(),
            bankInfo.getAccountName(),
            tuitionAmount,
            content
        );

        return VietQRResponse.builder()
            .qrImageUrl(qrUrl)
            .bankName(bankInfo.getBankName())
            .accountNumber(maskAccountNumber(bankInfo.getAccountNumber()))
            .accountName(bankInfo.getAccountName())
            .amount(tuitionAmount)
            .content(content)
            .build();
    }

    /**
     * Update owner's bank account info (Settings page)
     */
    @Transactional
    public void updateBankAccount(
        String instanceId,
        BankAccountUpdateRequest request
    ) {
        Instance instance = instanceRepo.findById(instanceId)
            .orElseThrow(() -> new NotFoundException("Instance not found"));

        // Validate bank code
        if (!VietnameseBankCode.isValid(request.getBankCode())) {
            throw new ValidationException("MÃ£ ngÃ¢n hÃ ng khÃ´ng há»£p lá»‡");
        }

        // Validate account number
        if (!request.getAccountNumber().matches("\\d{8,20}")) {
            throw new ValidationException("Sá»‘ tÃ i khoáº£n khÃ´ng há»£p lá»‡ (8-20 chá»¯ sá»‘)");
        }

        // Validate account name (uppercase, no accents)
        if (!request.getAccountName().matches("[A-Z0-9 ]+")) {
            throw new ValidationException(
                "TÃªn tÃ i khoáº£n pháº£i viáº¿t hoa, khÃ´ng dáº¥u (VD: NGUYEN VAN A)"
            );
        }

        // Update bank info
        BankAccountInfo bankInfo = new BankAccountInfo();
        bankInfo.setBankCode(request.getBankCode());
        bankInfo.setBankName(VietnameseBankCode.getNameByCode(request.getBankCode()));
        bankInfo.setAccountNumber(request.getAccountNumber());
        bankInfo.setAccountName(request.getAccountName());
        bankInfo.setQrTemplate(request.getQrTemplate());

        instance.setOwnerBankAccount(bankInfo);
        instanceRepo.save(instance);
    }

    /**
     * Preview QR (for testing in Settings page)
     */
    public VietQRResponse previewQR(BankAccountPreviewRequest request) {
        String sampleContent = request.getQrTemplate()
            .replace("{courseId}", "SAMPLE123")
            .replace("{studentName}", "NGUYEN VAN A")
            .replace("{timestamp}", String.valueOf(System.currentTimeMillis() / 1000));

        String qrUrl = buildVietQRUrl(
            request.getBankCode(),
            request.getAccountNumber(),
            request.getAccountName(),
            2_000_000L, // Sample amount
            sampleContent
        );

        return VietQRResponse.builder()
            .qrImageUrl(qrUrl)
            .bankName(VietnameseBankCode.getNameByCode(request.getBankCode()))
            .accountNumber(maskAccountNumber(request.getAccountNumber()))
            .accountName(request.getAccountName())
            .amount(2_000_000L)
            .content(sampleContent)
            .build();
    }

    private String formatPaymentContent(
        String template,
        String courseId,
        String studentName
    ) {
        return template
            .replace("{courseId}", courseId)
            .replace("{studentName}", removeAccents(studentName).toUpperCase())
            .replace("{timestamp}", String.valueOf(System.currentTimeMillis() / 1000));
    }
}
```

---

## 6F.6. Payment Verification Strategies

### 6F.6.1. Manual Verification (MVP)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ MANUAL PAYMENT VERIFICATION (MVP Approach)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Admin Panel: /admin/payments/pending                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Pending Payments (3)                          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  ORD-20260130-123456                           â”‚    â”‚
â”‚  â”‚  Amount: 499,000 VND                           â”‚    â”‚
â”‚  â”‚  Tier: BASIC                                    â”‚    â”‚
â”‚  â”‚  User: user@example.com                        â”‚    â”‚
â”‚  â”‚  Content: "KITEHUB ORD-20260130-123456..."     â”‚    â”‚
â”‚  â”‚  Created: 2026-01-30 10:00                     â”‚    â”‚
â”‚  â”‚  [XÃ¡c nháº­n thanh toÃ¡n] [Há»§y]                   â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚  ... more pending payments ...                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  Workflow:                                              â”‚
â”‚  1. Admin checks bank statement (internet banking)     â”‚
â”‚  2. Match content in bank with pending orders           â”‚
â”‚  3. Click "XÃ¡c nháº­n thanh toÃ¡n" for matched order      â”‚
â”‚  4. Optionally enter bank transaction ID                â”‚
â”‚  5. System activates subscription/enrollment            â”‚
â”‚                                                         â”‚
â”‚  Pros:                                                  â”‚
â”‚  âœ… Simple to implement                                 â”‚
â”‚  âœ… No bank API integration needed                      â”‚
â”‚  âœ… Works with all banks                                â”‚
â”‚  âœ… 100% accuracy (human verification)                  â”‚
â”‚                                                         â”‚
â”‚  Cons:                                                  â”‚
â”‚  âš ï¸ Manual work (1-2 minutes per payment)               â”‚
â”‚  âš ï¸ Not instant (admin needs to check)                  â”‚
â”‚  âš ï¸ Business hours only (unless 24/7 staff)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6F.6.2. Automated Verification (V2 - Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AUTOMATED VERIFICATION (V2 with Bank API)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Option A: Bank API Webhooks                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. Customer transfers money                   â”‚    â”‚
â”‚  â”‚  2. Bank sends webhook to KiteClass:           â”‚    â”‚
â”‚  â”‚     POST /api/webhooks/bank/transfer           â”‚    â”‚
â”‚  â”‚     {                                           â”‚    â”‚
â”‚  â”‚       "transactionId": "FT123456",            â”‚    â”‚
â”‚  â”‚       "amount": 499000,                       â”‚    â”‚
â”‚  â”‚       "content": "KITEHUB ORD-...",           â”‚    â”‚
â”‚  â”‚       "timestamp": "2026-01-30T10:05:00Z"     â”‚    â”‚
â”‚  â”‚     }                                           â”‚    â”‚
â”‚  â”‚  3. Backend verifies signature                 â”‚    â”‚
â”‚  â”‚  4. Match content with pending order           â”‚    â”‚
â”‚  â”‚  5. Auto-confirm payment                       â”‚    â”‚
â”‚  â”‚  6. Activate subscription instantly            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  Supported Banks (Business API):                       â”‚
â”‚  - Vietcombank Enterprise API                          â”‚
â”‚  - Techcombank Business API                            â”‚
â”‚  - MB Bank Corporate API                               â”‚
â”‚  - VPBank Open API                                     â”‚
â”‚                                                         â”‚
â”‚  Option B: Bank Statement Parsing                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. Cron job every 2 minutes                   â”‚    â”‚
â”‚  â”‚  2. Fetch latest bank transactions via API     â”‚    â”‚
â”‚  â”‚  3. Parse each transaction:                    â”‚    â”‚
â”‚  â”‚     - amount                                    â”‚    â”‚
â”‚  â”‚     - content                                   â”‚    â”‚
â”‚  â”‚     - timestamp                                 â”‚    â”‚
â”‚  â”‚  4. Match with pending orders                  â”‚    â”‚
â”‚  â”‚  5. Auto-confirm matched payments              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  Pros:                                                  â”‚
â”‚  âœ… Instant verification (1-2 minutes)                  â”‚
â”‚  âœ… 24/7 automatic                                      â”‚
â”‚  âœ… Scalable (handle 1000s of payments)                 â”‚
â”‚                                                         â”‚
â”‚  Cons:                                                  â”‚
â”‚  âŒ Requires bank API contract                          â”‚
â”‚  âŒ Integration complexity                              â”‚
â”‚  âŒ API fees (if applicable)                            â”‚
â”‚  âŒ Bank-specific implementation                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6F.7. APIs cho Payment System

### 6F.7.1. KiteHub Subscription Payment APIs

```java
// 1. Create subscription payment order
POST /api/v1/payment/subscription/create
Request:
{
  "tier": "BASIC" | "STANDARD" | "PREMIUM"
}
Response:
{
  "orderId": "ORD-20260130-123456",
  "qrImageUrl": "https://img.vietqr.io/image/970415-1234567890-compact2.jpg?...",
  "bankName": "Vietcombank",
  "accountNumber": "1234****90",
  "accountName": "CONG TY TNHH KITECLASS",
  "amount": 499000,
  "content": "KITEHUB ORD-20260130-123456 user@example.com",
  "expiresAt": "2026-01-31T10:00:00Z"
}

// 2. Check payment status
GET /api/v1/payment/orders/{orderId}/status
Response:
{
  "orderId": "ORD-20260130-123456",
  "status": "PENDING" | "PAID" | "EXPIRED" | "CANCELLED",
  "paidAt": "2026-01-30T10:05:00Z" (if PAID)
}

// 3. Manual confirm payment (ADMIN only)
POST /api/v1/admin/payments/{orderId}/confirm
Request:
{
  "transactionReference": "FT123456",
  "paidAt": "2026-01-30T10:05:00Z"
}
Response:
{
  "success": true,
  "orderId": "ORD-20260130-123456",
  "subscriptionActivated": true
}

// 4. List pending payments (ADMIN only)
GET /api/v1/admin/payments/pending
Response:
{
  "orders": [
    {
      "orderId": "ORD-20260130-123456",
      "amount": 499000,
      "tier": "BASIC",
      "userEmail": "user@example.com",
      "content": "KITEHUB ORD-20260130-123456 user@example.com",
      "createdAt": "2026-01-30T10:00:00Z",
      "expiresAt": "2026-01-31T10:00:00Z"
    }
  ]
}
```

### 6F.7.2. Instance Payment Configuration APIs

```java
// 1. Get current bank account config
GET /api/v1/instance/payment/bank-account
Response:
{
  "bankCode": "970415",
  "bankName": "Vietcombank",
  "accountNumber": "9876****10",
  "accountName": "NGUYEN VAN A",
  "qrTemplate": "HOCPHI {courseId} {studentName}",
  "configured": true
}

// 2. Update bank account (OWNER only)
PUT /api/v1/instance/payment/bank-account
Request:
{
  "bankCode": "970415",
  "accountNumber": "9876543210",
  "accountName": "NGUYEN VAN A",
  "qrTemplate": "HOCPHI {courseId} {studentName}"
}
Response:
{
  "success": true,
  "message": "ÄÃ£ cáº­p nháº­t thÃ´ng tin chuyá»ƒn khoáº£n"
}

// 3. Preview QR (test before saving)
POST /api/v1/instance/payment/preview-qr
Request:
{
  "bankCode": "970415",
  "accountNumber": "9876543210",
  "accountName": "NGUYEN VAN A",
  "qrTemplate": "HOCPHI {courseId} {studentName}",
  "sampleAmount": 2000000
}
Response:
{
  "qrImageUrl": "https://img.vietqr.io/image/970415-9876543210-compact2.jpg?...",
  "sampleContent": "HOCPHI SAMPLE123 NGUYEN VAN A"
}

// 4. Generate enrollment QR
POST /api/v1/instance/enrollments/{enrollmentId}/generate-qr
Response:
{
  "qrImageUrl": "https://img.vietqr.io/image/...",
  "bankName": "Vietcombank",
  "accountNumber": "9876****10",
  "accountName": "NGUYEN VAN A",
  "amount": 2000000,
  "content": "HOCPHI CRS-123 NGUYEN VAN B"
}

// 5. Confirm enrollment payment (OWNER/ADMIN)
POST /api/v1/instance/enrollments/{enrollmentId}/confirm-payment
Request:
{
  "transactionReference": "optional bank ref",
  "paidAt": "2026-01-30T14:30:00Z"
}
Response:
{
  "success": true,
  "enrollmentId": "ENR-123",
  "studentActivated": true
}
```

---

## 6F.8. Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”’ PAYMENT SECURITY CHECKLIST                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  âœ… Order ID Generation                                 â”‚
â”‚     - Use cryptographically secure random              â”‚
â”‚     - Include timestamp to prevent collision            â”‚
â”‚     - Unpredictable format                              â”‚
â”‚                                                         â”‚
â”‚  âœ… Payment Content Uniqueness                          â”‚
â”‚     - Include orderId (unique)                         â”‚
â”‚     - Include user identifier                           â”‚
â”‚     - Validate content format                           â”‚
â”‚                                                         â”‚
â”‚  âœ… Order Expiration                                    â”‚
â”‚     - 24-hour expiry (balance convenience & security)  â”‚
â”‚     - Auto-cancel expired orders                        â”‚
â”‚     - Prevent payment after expiry                      â”‚
â”‚                                                         â”‚
â”‚  âœ… Amount Validation                                   â”‚
â”‚     - Verify amount matches order                       â”‚
â”‚     - Exact match required (no partial payment MVP)    â”‚
â”‚                                                         â”‚
â”‚  âœ… Double-Payment Prevention                           â”‚
â”‚     - Check order status before confirming              â”‚
â”‚     - Lock order during confirmation                    â”‚
â”‚     - Idempotent confirm endpoint                       â”‚
â”‚                                                         â”‚
â”‚  âœ… Access Control                                      â”‚
â”‚     - Only ADMIN can confirm KiteHub payments           â”‚
â”‚     - Only OWNER/ADMIN can confirm instance payments    â”‚
â”‚     - Audit log all payment actions                     â”‚
â”‚                                                         â”‚
â”‚  âœ… Webhook Security (V2)                               â”‚
â”‚     - Verify signature from bank                        â”‚
â”‚     - Use HTTPS only                                    â”‚
â”‚     - Rate limiting                                     â”‚
â”‚     - Replay attack prevention                          â”‚
â”‚                                                         â”‚
â”‚  âœ… Bank Account Protection                             â”‚
â”‚     - Mask account numbers in frontend                  â”‚
â”‚     - Encrypt sensitive data at rest                    â”‚
â”‚     - OWNER-only access to update bank config           â”‚
â”‚                                                         â”‚
â”‚  âœ… Audit Trail                                         â”‚
â”‚     - Log all payment events                            â”‚
â”‚     - Track who confirmed payments                      â”‚
â”‚     - Timestamp all actions                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6F.9. Frontend Implementation Highlights

### Payment QR Display Component

```tsx
// frontend/components/payment/VietQRDisplay.tsx
interface VietQRDisplayProps {
  qrData: {
    qrImageUrl: string;
    bankName: string;
    accountNumber: string;
    accountName: string;
    amount: number;
    content: string;
    expiresAt: string;
  };
  onPaymentConfirmed?: () => void;
}

export function VietQRDisplay({ qrData, onPaymentConfirmed }: VietQRDisplayProps) {
  const [copied, setCopied] = useState(false);
  const [checking, setChecking] = useState(false);

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  const checkPaymentStatus = async () => {
    setChecking(true);
    // Poll payment status
    const response = await fetch('/api/v1/payment/orders/{orderId}/status');
    const data = await response.json();

    if (data.status === 'PAID') {
      toast.success('Thanh toÃ¡n thÃ nh cÃ´ng!');
      onPaymentConfirmed?.();
    } else {
      toast.info('ChÆ°a nháº­n Ä‘Æ°á»£c thanh toÃ¡n. Vui lÃ²ng thá»­ láº¡i sau Ã­t phÃºt.');
    }
    setChecking(false);
  };

  return (
    <Card className="max-w-2xl mx-auto p-6">
      {/* QR Code */}
      <div className="flex justify-center mb-6">
        <div className="p-4 bg-white rounded-lg shadow-lg">
          <img
            src={qrData.qrImageUrl}
            alt="VietQR Code"
            className="w-64 h-64"
          />
        </div>
      </div>

      {/* Bank Details */}
      <div className="space-y-3 mb-6">
        <InfoRow label="NgÃ¢n hÃ ng" value={qrData.bankName} />
        <InfoRow
          label="Sá»‘ tÃ i khoáº£n"
          value={qrData.accountNumber}
          copyable
          onCopy={() => copyToClipboard(qrData.accountNumber)}
        />
        <InfoRow label="Chá»§ tÃ i khoáº£n" value={qrData.accountName} />
        <InfoRow
          label="Sá»‘ tiá»n"
          value={`${qrData.amount.toLocaleString('vi-VN')} Ä‘`}
          highlight
        />
        <InfoRow
          label="Ná»™i dung"
          value={qrData.content}
          copyable
          onCopy={() => copyToClipboard(qrData.content)}
          mono
        />
      </div>

      {/* Instructions */}
      <Alert className="mb-6">
        <AlertCircle className="h-4 w-4" />
        <AlertDescription>
          <strong>Quan trá»ng:</strong> Vui lÃ²ng ghi ÄÃšNG ná»™i dung chuyá»ƒn khoáº£n
          Ä‘á»ƒ há»‡ thá»‘ng tá»± Ä‘á»™ng xÃ¡c nháº­n thanh toÃ¡n.
        </AlertDescription>
      </Alert>

      {/* Check payment button */}
      <Button
        onClick={checkPaymentStatus}
        disabled={checking}
        className="w-full"
      >
        {checking ? 'Äang kiá»ƒm tra...' : 'TÃ´i Ä‘Ã£ chuyá»ƒn khoáº£n'}
      </Button>

      {/* Expiry time */}
      <p className="text-sm text-muted-foreground text-center mt-4">
        MÃ£ QR cÃ³ hiá»‡u lá»±c Ä‘áº¿n: {formatDateTime(qrData.expiresAt)}
      </p>
    </Card>
  );
}
```

---

## 6F.10. Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š PAYMENT SYSTEM SUMMARY                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  âœ… Two-Level Architecture                              â”‚
â”‚     - KiteHub: Platform subscription (BASIC, etc.)     â”‚
â”‚     - Instance: Course enrollment (Owner configurable)  â”‚
â”‚                                                         â”‚
â”‚  âœ… VietQR Technology                                   â”‚
â”‚     - Zero transaction fees                             â”‚
â”‚     - Instant transfers                                 â”‚
â”‚     - Works with 40+ Vietnamese banks                   â”‚
â”‚     - Simple QR code generation                         â”‚
â”‚                                                         â”‚
â”‚  âœ… MVP: Manual Verification                            â”‚
â”‚     - Admin checks bank statement                       â”‚
â”‚     - Clicks confirm in admin panel                     â”‚
â”‚     - 1-2 minutes per payment                           â”‚
â”‚                                                         â”‚
â”‚  âœ… V2: Automated Verification (Future)                 â”‚
â”‚     - Bank API webhooks                                 â”‚
â”‚     - Instant confirmation                              â”‚
â”‚     - 24/7 automatic                                    â”‚
â”‚                                                         â”‚
â”‚  âœ… Owner Flexibility                                   â”‚
â”‚     - Configure own bank account                        â”‚
â”‚     - Customize QR content template                     â”‚
â”‚     - Preview QR before saving                          â”‚
â”‚     - Any Vietnamese bank supported                     â”‚
â”‚                                                         â”‚
â”‚  âœ… Security                                            â”‚
â”‚     - Unique order IDs                                  â”‚
â”‚     - 24-hour expiry                                    â”‚
â”‚     - Amount validation                                 â”‚
â”‚     - Double-payment prevention                         â”‚
â”‚     - Audit logging                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# PHáº¦N 7: Tá»”NG Káº¾T KIáº¾N TRÃšC V3

## 7.1. So sÃ¡nh cÃ¡c phiÃªn báº£n

| TÃ­nh nÄƒng | V1 | V2 | V3.1 (Optimized) |
|-----------|:--:|:--:|:----------------:|
| **KiteHub** |
| Backend Architecture | 3 Microservices | Modular Monolith (NestJS) | **Modular Monolith (Java Spring Boot)** |
| Backend Tech | NestJS | NestJS | **Java Spring Boot** â­ |
| Frontend | Basic | Basic | **Next.js Full Stack** |
| Authentication | Basic | Basic | **JWT + OAuth 2.0** |
| AI Marketing | âŒ | âœ… | âœ… |
| Preview Website | âŒ | âŒ | âœ… â­ NEW |
| Admin Dashboard | Basic | Basic | **Full Featured** |
| Customer Portal | âŒ | âŒ | âœ… |
| Agent Chat UI | âŒ | âŒ | âœ… |
| **KiteClass Instance** |
| Services | 7 | 7 | **3-5** (Dynamic V3.1) â­ |
| API Gateway | âŒ | âŒ | âœ… (Merged into User Service) |
| AI Quiz Generator | âŒ | âŒ (Proposed) | âŒ (Rejected) |
| **Features** |
| Actor Parent | âŒ | âŒ | âœ… |
| Billing/Invoice | âŒ | âŒ | âœ… |
| Gamification | âŒ | âŒ | âœ… (Optional) |
| QR Payment | âŒ | âŒ | âœ… |
| Zalo OTP | âŒ | âŒ | âœ… |
| **Add-on Packs** |
| Engagement Pack | âŒ | âŒ | âœ… â­ NEW |
| Media Pack | âŒ | âŒ | âœ… â­ NEW |

## 7.2. Danh sÃ¡ch tÃ­nh nÄƒng V3

### KiteHub (Modular Monolith + Frontend)

**Backend (Java Spring Boot):**
- âœ… Sale Module: Landing page, pricing, orders
- âœ… Message Module: Chat support, notifications
- âœ… Maintaining Module: Instance provisioning, monitoring
- âœ… AI Agent Module: Marketing assets generation

**Frontend (Next.js):**
- âœ… Landing Page: Marketing website, features, pricing
- âœ… Admin Dashboard: Instance management, customer management, analytics
- âœ… Customer Portal: My instances, billing, support tickets
- âœ… Agent Chat Interface: AI-powered chat vá»›i customers
- âœ… Instance Management UI: Provisioning, monitoring, configuration

### KiteClass Instance (3-5 Services V3.1)

**User + Gateway Service (Báº¯t buá»™c):** â­ MERGED
- âœ… API Gateway Layer (Embedded Spring Cloud Gateway)
  - JWT Validation, Rate Limiting, CORS, Routing
- âœ… Authentication (JWT + OAuth)
- âœ… Authorization (RBAC)
- âœ… User Management
- âœ… Multi-tenant support
- âœ… Parent registration (Zalo OTP)
- ğŸ’¾ RAM: ~512MB

**Core Service (Báº¯t buá»™c):**
- âœ… Class Module: Courses, classes, schedules
- âœ… Learning Module: Attendance, assignments, grades
- âœ… **Billing Module**: Tuition, invoices, payments, debts, QR
- ğŸ’¾ RAM: ~768MB

**Engagement Service (TÃ¹y chá»n - Add-on Pack):** â­ NEW
- âœ… **Gamification Module**: Points, badges, rewards, leaderboard
- âœ… **Parent Module**: Portal, notifications, child linking
- âœ… **Forum Module**: Q&A forum
- ğŸ’¾ RAM: ~384MB

**Media Service (TÃ¹y chá»n - Add-on Pack):**
- âœ… Video upload & transcode
- âœ… Live streaming (WebSocket)
- âœ… Recording
- ğŸ’¾ RAM: ~512MB

**Frontend (Báº¯t buá»™c):**
- âœ… Multi-role UI (Admin, Teacher, Student, Parent)
- âœ… Responsive design
- âœ… SSR for SEO
- ğŸ’¾ RAM: ~256MB

---

### Cáº¥u hÃ¬nh theo gÃ³i dá»‹ch vá»¥

| GÃ³i | Services | RAM Tá»•ng |
|-----|----------|----------|
| **BASIC** | User+GW, Core, FE | ~1.7GB |
| **STANDARD** | User+GW, Core, Engagement, FE | ~2GB |
| **PREMIUM** | User+GW, Core, Engagement, FE | ~2GB |
| **+ Media Pack** | + Media Service | +512MB |

## 7.3. LÃ½ do loáº¡i bá» AI Quiz Generator

| TiÃªu chÃ­ | ÄÃ¡nh giÃ¡ | Ghi chÃº |
|----------|----------|---------|
| **Äá»™ phá»©c táº¡p** | Cao | Cáº§n nhiá»u prompt engineering, fine-tuning |
| **Chi phÃ­** | ~$128/thÃ¡ng | Chi phÃ­ LLM API Ä‘Ã¡ng ká»ƒ |
| **Äá»™ á»•n Ä‘á»‹nh** | Tháº¥p | Output khÃ´ng nháº¥t quÃ¡n, cáº§n human review |
| **ROI** | ChÆ°a rÃµ | KhÃ¡ch hÃ ng chÆ°a thá»±c sá»± cáº§n tÃ­nh nÄƒng nÃ y |
| **Rá»§i ro** | Cao | CÃ¢u há»i sai cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng cháº¥t lÆ°á»£ng giÃ¡o dá»¥c |

**Káº¿t luáº­n:** TÃ­nh nÄƒng AI Quiz Generator sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ láº¡i trong cÃ¡c phiÃªn báº£n sau khi:
- CÃ´ng nghá»‡ LLM á»•n Ä‘á»‹nh hÆ¡n
- Chi phÃ­ giáº£m
- CÃ³ feedback thá»±c táº¿ tá»« khÃ¡ch hÃ ng

## 7.4. Roadmap triá»ƒn khai V3.1

| Phase | TÃ­nh nÄƒng | Æ¯u tiÃªn | Ghi chÃº |
|-------|-----------|---------|---------|
| **Phase 1** | Merge Gateway + User Service | P0 | Tiáº¿t kiá»‡m ~128MB RAM |
| **Phase 2** | TÃ¡ch Engagement Service | P1 | Gamification + Parent + Forum |
| **Phase 3** | Billing Module (QR Payment) | P0 | Core feature |
| **Phase 4** | Dynamic Provisioning Logic | P0 | Deploy 3-5 services theo gÃ³i |
| **Phase 5** | Add-on Pack System | P1 | Cho phÃ©p mua thÃªm features |
| **Phase 6** | Testing & Deployment | P0 | End-to-end testing |

## 7.5. Tá»•ng káº¿t tá»‘i Æ°u V3.1

| Metric | V3 (Original) | V3.1 (Optimized) | Cáº£i thiá»‡n |
|--------|---------------|------------------|-----------|
| **Sá»‘ services tá»‘i thiá»ƒu** | 4 | 3 | -25% |
| **Sá»‘ services tá»‘i Ä‘a** | 4 | 5 | +25% (linh hoáº¡t) |
| **RAM gÃ³i BASIC** | ~2.25GB | ~1.7GB | -22% |
| **Unused modules (BASIC)** | ~40% | 0% | Tá»‘i Æ°u |
| **Flexibility** | Cá»‘ Ä‘á»‹nh | Äá»™ng (Add-on) | âœ… |

---

*BÃ¡o cÃ¡o Ä‘Æ°á»£c táº¡o bá»Ÿi: Claude Assistant*
*NgÃ y: 23/12/2025*
*PhiÃªn báº£n: 3.1 (Optimized)*
