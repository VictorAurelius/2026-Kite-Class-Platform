# Test profile configuration
# Disable Resilience4j for tests to avoid configuration conflicts
resilience4j:
  circuitbreaker:
    enabled: false
  retry:
    enabled: false
  timelimiter:
    enabled: false

spring:
  # Use H2 in-memory database for tests instead of PostgreSQL
  r2dbc:
    url: r2dbc:h2:mem:///testdb?options=DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:

  flyway:
    enabled: true  # Enable Flyway to create schema
    url: jdbc:h2:mem:testdb
    user: sa
    password:
    locations: classpath:db/migration

  data:
    redis:
      host: localhost
      port: 6379

  mail:
    host: localhost
    port: 3025
    username: test
    password: test
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false
          ssl:
            trust: "*"
        debug: false

email:
  from: test@kiteclass.com
  base-url: http://localhost:3000
  reset-token-expiration: 3600000

# Logging for tests
logging:
  level:
    root: INFO
    com.kiteclass: DEBUG
    org.springframework.mail: DEBUG
